import a from'./RenderUtil.js';let Renderer=function(b,c){let d=this,e,f;this['Util']=new a(b,c),this['RenderEvent']=![],this['LockRender']=![],this['enableDrawCall']=![],this['enableTimePanel']=![],this['enableFPS']=![];let g={'nodeNum':0x0,'meshblock':0x0,'fps':0x0,'drawCall':0x0,'occlusionCullingCount':0x0},h=new c['Color'](0xff,0xff,0xff,0xff),i=new c['Color'](0xcb,0xd5,0xe0,0xff),j=new c['Color'](0xff,0xff,0xff,0xff);this['mainFramebufferClear']=!![],this['enableRenderLimit']=![],this['enableRenderLimitCnt']=0x7d0,this['currentRenderCnt']=0x0,this['enableRenderLimitRate']=-0x1;let k=0x0;this['enableOcclusion']=![],this['occlusionProcessCount']=0x0,this['occlusionProcessMax']=0x0,this['enableMaterialTextureLoadingDrawModel']=!![];let l=![],m=new c['Color'](0xff,0xff,0xff,0xa),n=![],o=new c['Color'](0xff,0xff,0xff,0xa),p=![],q=![],r=![],s=b['Configuration']['Render']['Edge']['Color'],t=b['Configuration']['Render']['Edge']['CustomColor'],u=b['Configuration']['Render']['GroupEdge']==undefined?new c['Color'](0x0,0x0,0x0,0xff):b['Configuration']['Render']['GroupEdge']['Color'],v=![],w=![],x=![],y=b['Configuration']['Render']['CustomEdge']['Color'],z=!![],A=0x1,B=new c['Color'](0xff,0xff,0xff,0xff),C=![],D=c['Enum']['RENDER_MODES']['Smooth'],E=![],F=![],G=![],H=b['Configuration']['Render']['Edge']['HiddenColor'],I=![],J=![],K=-0x1,L=new c['Color'](0x0,0x0,0x0,0xff),M=![],N=![],O=0.5,P=![],Q=!![],R=![],S=![],T=!![],U=new c['Color'](0x0,0xc8,0x0,0xff),V=![],W=![],X=![],Y=!![],Z=![],a0=undefined,a1=0x2710,a2=0x186a0,a3=new c['Color'](0xff,0xff,0xff,0xff),a4=new c['Color'](0xff,0xff,0xff,0xff);this['useNoteEffect']=![];let a5=![],a6=![],a7=-0x1,a8=![],a9=0x3e8,aa=undefined,ab=-0x5,ac=0x64,ad=0xa,ae=new c['Color'](0xff,0xff,0xff,0xff),af=![],ag=0x258,ah=undefined,ai=0x5,aj=0xa,ak=0xa,al=new c['Color'](0xff,0xff,0xff,0xff),am=![],an=0x32,ao=undefined,ap=0x5,aq=0xaae60,ar=0x14,as=new c['Color'](0xff,0xff,0xff,0xff),at=![],au=0x32,av=undefined,aw=0x5,ax=0x30d40,ay=0x14,az=new c['Color'](0xff,0xff,0xff,0xff),aA=!![],aB=0x1f4,aC=c['Enum']['ViewUnderControlVisibleMode']['SHADED'],aD=!![],aE=0.2,aF=0x1,aG=new c['Color'](0x80,0x80,0x80,0xc8),aH=0x3e8,aI=!![],aJ=0x64,aK=new c['Color'](0xe6,0xe6,0xe6,0xc8),aL=![],aM=[],aN=[0x1,0x0,0x0,0x0],aO=!![],aP=![],aQ=new c['Vector2'](),aR=new c['Color'](0xff,0x7e,0x100,0xff),aS=new c['Color'](0xff,0x0,0x0,0xff),aT=0x1,aU=![],aV=!![],aW=![],aX=!![],aY=!![];b0();function aZ(bH,bI){bI=bI||0x1;const bJ=bH['clientWidth']*bI|0x0,bK=bH['clientHeight']*bI|0x0;if(bH['width']!==bJ||bH['height']!==bK)return bH['width']=bJ,bH['height']=bK,!![];return![];}function b0(){e=b['gl'],f=b['ctx_review'],aZ(e['canvas']),aZ(f['canvas']),e['viewport'](0x0,0x0,e['canvas']['width'],e['canvas']['height']),f['clearRect'](0x0,0x0,f['canvas']['width'],f['canvas']['height']);let bH=h['glColor']();e['clearColor'](bH['r'],bH['g'],bH['b'],bH['a']),e['clear'](e['COLOR_BUFFER_BIT']);if(b['DEBUG']===!![]){if(b['DemoType']!==0x1)d['enableDrawCall']=!![];}b['DemoType']===0x1&&(d['enableTimePanel']=!![]);}this['InitCanvas']=function(){b0();};function b1(){let bH=![],bI;for(let bJ=0x0;bJ<b['Data']['ObjectsUpdateLength'];bJ++){let bK=b['Data']['Objects'][bJ];if(!bK['flag']['updateProcess'])continue;b['RenderWGL']['InitRenderPipeline'](bK,!![]),bI=bK;if(W){bK['flag']['updateProcess']=!![];let bL=b['RenderWGL']['GetPipeline'](bK['uuid']);b['RenderWGL']['InitRenderPipelineByWireframe'](bK,bL);}bH=!![];}bH&&aX&&(b['ColorMap']['SetCurrentColorMapInfo'](bI['id_file']),b['ColorMap']['SetColorMapTexture'](bI['mapId']));}function b2(){if(X){b3();return;}e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);let bH=b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BACKGROUND']);if(bH){if(b['Configuration']['Render']['Background']===undefined){let bI=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],bJ=i['glColor'](),bK=j['glColor'](),bL=[bK['r'],bK['g'],bK['b'],bK['a'],bK['r'],bK['g'],bK['b'],bK['a'],bJ['r'],bJ['g'],bJ['b'],bJ['a'],bJ['r'],bJ['g'],bJ['b'],bJ['a']];const bM=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],bM),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bI),e['STATIC_DRAW']);const bN=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],bN),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bL),e['STATIC_DRAW']),e['bindBuffer'](e['ARRAY_BUFFER'],bM),e['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,e['FLOAT'],![],0x0,0x0),e['bindBuffer'](e['ARRAY_BUFFER'],bN),e['vertexAttribPointer'](b['Shader']['colorAttributeLocation'],0x4,e['FLOAT'],![],0x0,0x0),e['drawArrays'](e['TRIANGLE_STRIP'],0x0,0x4),e['deleteBuffer'](bM),e['deleteBuffer'](bN);}else{if(b['Configuration']['Render']['Background']['Mode']===c['Enum']['BackgroundModes']['COLOR_TWO_CENTER']||b['Configuration']['Render']['Background']['Mode']===c['Enum']['BackgroundModes']['COLOR_TWO_CORNER']){let bO=b['Configuration']['Render']['Background']['OneColor']['glColor'](),bP=b['Configuration']['Render']['Background']['TwoColor']['glColor']();{let bQ=undefined,bR=undefined;b['Configuration']['Render']['Background']['Mode']===c['Enum']['BackgroundModes']['COLOR_TWO_CENTER']?(bQ=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],bR=[bP['r'],bP['g'],bP['b'],bP['a'],bP['r'],bP['g'],bP['b'],bP['a'],bP['r'],bP['g'],bP['b'],bP['a'],bP['r'],bP['g'],bP['b'],bP['a']]):(bQ=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],bR=[bO['r'],bO['g'],bO['b'],bO['a'],bO['r'],bO['g'],bO['b'],bO['a'],bO['r'],bO['g'],bO['b'],bO['a'],bO['r'],bO['g'],bO['b'],bO['a']]);const bS=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],bS),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bQ),e['STATIC_DRAW']);const bT=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],bT),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bR),e['STATIC_DRAW']),e['bindBuffer'](e['ARRAY_BUFFER'],bS),e['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,e['FLOAT'],![],0x0,0x0),e['bindBuffer'](e['ARRAY_BUFFER'],bT),e['vertexAttribPointer'](b['Shader']['colorAttributeLocation'],0x4,e['FLOAT'],![],0x0,0x0),e['drawArrays'](e['TRIANGLE_STRIP'],0x0,0x4),e['deleteBuffer'](bS),e['deleteBuffer'](bT);}{let bU=0x0,bV=[],bW=[];switch(b['Configuration']['Render']['Background']['Mode']){case c['Enum']['BackgroundModes']['COLOR_TWO_CENTER']:{let bZ=d['GetSizeWidth'](),c0=d['GetSizeHeight'](),c1=Math['sqrt'](bZ*bZ+c0*c0)*0.5*1.5;c1/=bZ<c0?bZ:c0;for(let c2=0x0;c2<0x24;c2++){let c3=Math['cos'](c2/0x12*3.141592654)*c1,c4=Math['cos']((c2+0x1)/0x12*3.141592654)*c1,c5=Math['sin'](c2/0x12*3.141592654)*c1,c6=Math['sin']((c2+0x1)/0x12*3.141592654)*c1;bV[bU*0x3+0x0]=0x0,bV[bU*0x3+0x1]=0x0,bV[bU*0x3+0x2]=0.5,bW[bU*0x4+0x0]=bO['r'],bW[bU*0x4+0x1]=bO['g'],bW[bU*0x4+0x2]=bO['b'],bW[bU*0x4+0x3]=bO['a'],bU++,bV[bU*0x3+0x0]=c3,bV[bU*0x3+0x1]=c5,bV[bU*0x3+0x2]=0.5,bW[bU*0x4+0x0]=bP['r'],bW[bU*0x4+0x1]=bP['g'],bW[bU*0x4+0x2]=bP['b'],bW[bU*0x4+0x3]=bP['a'],bU++,bV[bU*0x3+0x0]=c4,bV[bU*0x3+0x1]=c6,bV[bU*0x3+0x2]=0.5,bW[bU*0x4+0x0]=bP['r'],bW[bU*0x4+0x1]=bP['g'],bW[bU*0x4+0x2]=bP['b'],bW[bU*0x4+0x3]=bP['a'],bU++;}}break;case c['Enum']['BackgroundModes']['COLOR_TWO_CORNER']:{let c7=d['GetSizeWidth'](),c8=d['GetSizeHeight'](),c9=Math['sqrt'](c7*c7+c8*c8)*0.5*1.5;c9/=c7<c8?c7:c8;for(let ca=0x0;ca<0x24;ca++){let cb=Math['cos'](ca/0x12*3.141592654)*c9,cc=Math['cos']((ca+0x1)/0x12*3.141592654)*c9,cd=Math['sin'](ca/0x12*3.141592654)*c9,ce=Math['sin']((ca+0x1)/0x12*3.141592654)*c9;bV[bU*0x3+0x0]=0x0,bV[bU*0x3+0x1]=0x0,bV[bU*0x3+0x2]=0.5,bW[bU*0x4+0x0]=bP['r'],bW[bU*0x4+0x1]=bP['g'],bW[bU*0x4+0x2]=bP['b'],bW[bU*0x4+0x3]=bP['a'],bU++,bV[bU*0x3+0x0]=cb,bV[bU*0x3+0x1]=cd,bV[bU*0x3+0x2]=0.5,bW[bU*0x4+0x0]=bO['r'],bW[bU*0x4+0x1]=bO['g'],bW[bU*0x4+0x2]=bO['b'],bW[bU*0x4+0x3]=bO['a'],bU++,bV[bU*0x3+0x0]=cc,bV[bU*0x3+0x1]=ce,bV[bU*0x3+0x2]=0.5,bW[bU*0x4+0x0]=bO['r'],bW[bU*0x4+0x1]=bO['g'],bW[bU*0x4+0x2]=bO['b'],bW[bU*0x4+0x3]=bO['a'],bU++;}}break;}const bX=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],bX),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bV),e['STATIC_DRAW']);const bY=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],bY),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bW),e['STATIC_DRAW']),e['bindBuffer'](e['ARRAY_BUFFER'],bX),e['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,e['FLOAT'],![],0x0,0x0),e['bindBuffer'](e['ARRAY_BUFFER'],bY),e['vertexAttribPointer'](b['Shader']['colorAttributeLocation'],0x4,e['FLOAT'],![],0x0,0x0),e['drawArrays'](e['TRIANGLES'],0x0,bU),e['deleteBuffer'](bX),e['deleteBuffer'](bY);}}else{let cf=b['Configuration']['Render']['Background']['OneColor']['glColor'](),cg=b['Configuration']['Render']['Background']['TwoColor']['glColor'](),ch=0x0,ci=undefined,cj=undefined;switch(b['Configuration']['Render']['Background']['Mode']){case c['Enum']['BackgroundModes']['COLOR_ONE']:ch=0x4,ci=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],cj=[cf['r'],cf['g'],cf['b'],cf['a'],cf['r'],cf['g'],cf['b'],cf['a'],cf['r'],cf['g'],cf['b'],cf['a'],cf['r'],cf['g'],cf['b'],cf['a']];break;case c['Enum']['BackgroundModes']['COLOR_TWO_HOR']:ch=0x4,ci=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],cj=[cf['r'],cf['g'],cf['b'],cf['a'],cf['r'],cf['g'],cf['b'],cf['a'],cg['r'],cg['g'],cg['b'],cg['a'],cg['r'],cg['g'],cg['b'],cg['a']];break;case c['Enum']['BackgroundModes']['COLOR_TWO_HOR_REVERSE']:ch=0x4,ci=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],cj=[cg['r'],cg['g'],cg['b'],cg['a'],cg['r'],cg['g'],cg['b'],cg['a'],cf['r'],cf['g'],cf['b'],cf['a'],cf['r'],cf['g'],cf['b'],cf['a']];break;case c['Enum']['BackgroundModes']['COLOR_TWO_VER']:ch=0x4,ci=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],cj=[cf['r'],cf['g'],cf['b'],cf['a'],cg['r'],cg['g'],cg['b'],cg['a'],cf['r'],cf['g'],cf['b'],cf['a'],cg['r'],cg['g'],cg['b'],cg['a']];break;case c['Enum']['BackgroundModes']['COLOR_TWO_VER_REVERSE']:ch=0x4,ci=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],cj=[cg['r'],cg['g'],cg['b'],cg['a'],cf['r'],cf['g'],cf['b'],cf['a'],cg['r'],cg['g'],cg['b'],cg['a'],cf['r'],cf['g'],cf['b'],cf['a']];break;case c['Enum']['BackgroundModes']['COLOR_TWO_CHOR']:ch=0x6,ci=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x0,0.5,0x1,0x0,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],cj=[cf['r'],cf['g'],cf['b'],cf['a'],cf['r'],cf['g'],cf['b'],cf['a'],cg['r'],cg['g'],cg['b'],cg['a'],cg['r'],cg['g'],cg['b'],cg['a'],cf['r'],cf['g'],cf['b'],cf['a'],cf['r'],cf['g'],cf['b'],cf['a']];break;case c['Enum']['BackgroundModes']['COLOR_TWO_CHOR_REVERSE']:ch=0x6,ci=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x0,0.5,0x1,0x0,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],cj=[cg['r'],cg['g'],cg['b'],cg['a'],cg['r'],cg['g'],cg['b'],cg['a'],cf['r'],cf['g'],cf['b'],cf['a'],cf['r'],cf['g'],cf['b'],cf['a'],cg['r'],cg['g'],cg['b'],cg['a'],cg['r'],cg['g'],cg['b'],cg['a']];break;case c['Enum']['BackgroundModes']['COLOR_TWO_CVER']:ch=0x6,ci=[-0x1,-0x1,0.5,-0x1,0x1,0.5,0x0,-0x1,0.5,0x0,0x1,0.5,0x1,-0x1,0.5,0x1,0x1,0.5],cj=[cf['r'],cf['g'],cf['b'],cf['a'],cf['r'],cf['g'],cf['b'],cf['a'],cg['r'],cg['g'],cg['b'],cg['a'],cg['r'],cg['g'],cg['b'],cg['a'],cf['r'],cf['g'],cf['b'],cf['a'],cf['r'],cf['g'],cf['b'],cf['a']];break;case c['Enum']['BackgroundModes']['COLOR_TWO_CVER_REVERSE']:ch=0x6,ci=[-0x1,-0x1,0.5,-0x1,0x1,0.5,0x0,-0x1,0.5,0x0,0x1,0.5,0x1,-0x1,0.5,0x1,0x1,0.5],cj=[cg['r'],cg['g'],cg['b'],cg['a'],cg['r'],cg['g'],cg['b'],cg['a'],cf['r'],cf['g'],cf['b'],cf['a'],cf['r'],cf['g'],cf['b'],cf['a'],cg['r'],cg['g'],cg['b'],cg['a'],cg['r'],cg['g'],cg['b'],cg['a']];break;}const ck=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],ck),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(ci),e['STATIC_DRAW']);const cl=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],cl),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(cj),e['STATIC_DRAW']),e['bindBuffer'](e['ARRAY_BUFFER'],ck),e['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,e['FLOAT'],![],0x0,0x0),e['bindBuffer'](e['ARRAY_BUFFER'],cl),e['vertexAttribPointer'](b['Shader']['colorAttributeLocation'],0x4,e['FLOAT'],![],0x0,0x0),e['drawArrays'](e['TRIANGLE_STRIP'],0x0,ch),e['deleteBuffer'](ck),e['deleteBuffer'](cl);}}}b['Shader']['EndShader']();}function b3(){e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);let bH=b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['SKYBOX']);if(bH){let bI=new c['Matrix4']()['copy'](b['Camera']['matMV']);bI['setPosition'](new c['Vector3']());let bJ=new c['Matrix4']();if(b['Camera']['perspectiveView']){const bQ=b['Util']['DegToRad'](0x3c),bR=b['Camera']['clientWidth']/b['Camera']['clientHeight'];let bS=new c['Matrix4']()['perspective'](bQ,bR,0.001,0xa),bT=new c['Matrix4']();bT['elements']=bS,bJ=new c['Matrix4']()['multiplyMatrices'](bT,bI);}else{const bU=b['Util']['DegToRad'](0x5a),bV=b['Camera']['clientWidth']/b['Camera']['clientHeight'];let bW=new c['Matrix4']()['perspective'](bU,bV,0.001,0xa),bX=new c['Matrix4']();bX['elements']=bW,bJ=new c['Matrix4']()['multiplyMatrices'](bX,bI);}b['Shader']['SetMatrix'](bJ,undefined),b['Shader']['SetGLSkyBox']();let bK=new c['Vector3'](-0x1,-0x1,-0x1),bL=new c['Vector3'](0x1,0x1,0x1),bM=[0x2,0x0,0x3,0x0,0x3,0x1,0x4,0x6,0x5,0x6,0x5,0x7,0x0,0x4,0x1,0x4,0x1,0x5,0x6,0x2,0x7,0x2,0x7,0x3,0x4,0x0,0x6,0x0,0x6,0x2,0x1,0x5,0x3,0x5,0x3,0x7],bN=[bK['x'],bK['y'],bK['z'],bK['x'],bK['y'],bL['z'],bK['x'],bL['y'],bK['z'],bK['x'],bL['y'],bL['z'],bL['x'],bK['y'],bK['z'],bL['x'],bK['y'],bL['z'],bL['x'],bL['y'],bK['z'],bL['x'],bL['y'],bL['z']];const bO=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],bO),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bN),e['STATIC_DRAW']),e['bindBuffer'](e['ARRAY_BUFFER'],bO),e['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,e['FLOAT'],![],0x0,0x0);let bP=e['createBuffer']();e['bindBuffer'](e['ELEMENT_ARRAY_BUFFER'],bP),e['bufferData'](e['ELEMENT_ARRAY_BUFFER'],new Uint16Array(bM),e['STATIC_DRAW']),e['bindBuffer'](e['ELEMENT_ARRAY_BUFFER'],bP),e['drawElements'](e['TRIANGLES'],0x24,e['UNSIGNED_SHORT'],0x0),e['deleteBuffer'](bO),e['deleteBuffer'](bP);}b['Shader']['EndShader'](),e['clear'](e['DEPTH_BUFFER_BIT']);}let b4=0x0;function b5(){if(b['DemoType']===0x8){if(!b['IsAccessUser']())return;}if(d['LockRender'])return;if(k>0x0)return;if(b['useFramebuffer']){if(e['canvas']['width']>0x0&&e['canvas']['height']>0x0){b['Avatar']['RenderPreprocessing']();if(d['mainFramebufferClear'])b['Font']['BeginFontCache']();for(let bH=b['MultiView']['length']-0x1;bH>0x0;bH--){if(!b['MultiView'][bH]['Visible']())continue;f['clearRect'](0x0,0x0,f['canvas']['width'],f['canvas']['height']),b['Mode']['Camera'](b['MultiView'][bH]['CameraIndex']),b['MultiView'][bH]['Enable']&&bh(),b['Data']['DataProcessCheck'](f),b['MultiView'][bH]['Draw'](),b['MultiView'][bH]['EndUpdateFramebuffer']();}f['clearRect'](0x0,0x0,f['canvas']['width'],f['canvas']['height']),b['Mode']['Camera'](0x0),b['MultiView'][0x0]['Visible']()?(bh(),b['MultiView'][0x0]['EndUpdateFramebuffer']()):bk(),b['Mode']['Camera'](0x0),bo(),b['Font']['EndFontCache'](),b['Data']['DataProcessCheck'](f);}d['RenderEvent']=![],d['mainFramebufferClear']=![];return;}else{let bI=h['glColor']();e['clearColor'](bI['r'],bI['g'],bI['b'],bI['a']),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b1(),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PHONG']),b['Shader']['SetGLLight'](),e['enable'](e['DEPTH_TEST']);const bJ=new c['Matrix4']();bJ['copy'](b['Camera']['cameraMatrix']);const bK=new c['Matrix4']()['multiplyMatrices'](b['Camera']['projectionMatrix'],bJ);b['Shader']['SetMatrix'](bK,bJ),b['Shader']['SetClipping'](bJ);let bL=b['Data']['ObjectsUpdateLength'];for(let bM=0x0;bM<bL;bM++){UpdateRenderProcessByObject(b['Data']['Objects'][bM],![]);}e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']);for(let bN=0x0;bN<bL;bN++){UpdateRenderProcessByObject(b['Data']['Objects'][bN],!![]);}e['disable'](e['BLEND']),b['Shader']['EndShader']();if(p||l){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PICK']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']);for(let bO=0x0;bO<bL;bO++){UpdateRenderProcessByPickObject(b['Data']['Objects'][bO]);}b['Shader']['EndShader']();}b['Shader']['EndFramebuffer']();}if(p||l){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['EDGE']);if(F)bx(c['Enum']['SHADER_TYPES']['EDGE'],c['Enum']['FB_RENDER_TYPES']['PICK'],H);else bx(c['Enum']['SHADER_TYPES']['EDGE'],c['Enum']['FB_RENDER_TYPES']['PICK'],s);b['Shader']['EndShader'](),b['Shader']['EndFramebuffer'](),bx(c['Enum']['SHADER_TYPES']['FXAA'],c['Enum']['FB_RENDER_TYPES']['CUSTOM']),e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);}e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),bD(),e['disable'](e['BLEND']);if(T){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['SELECTED']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']);for(let bP=0x0;bP<bL;bP++){UpdateRenderProcessBySelectObject(b['Data']['Objects'][bP]);}b['Shader']['EndShader'](),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);if(b['Configuration']['Model']['Selection']['LineColor']!==undefined)U=b['Configuration']['Model']['Selection']['LineColor'];bx(c['Enum']['SHADER_TYPES']['EDGE'],c['Enum']['FB_RENDER_TYPES']['SELECTED'],U),b['Shader']['EndFramebuffer'](),bx(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOM']),e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);}e['clear'](e['DEPTH_BUFFER_BIT']);{b7(),bF();}d['RenderEvent']=![];}}function b6(bH,bI){return b['Util']['IsRenderReivewNearPlane'](bH,bI);}this['GetReviewNearPlane']=function(){return aN;};function b7(){for(let bH=0x0;bH<b['Data']['Reviews']['length'];bH++){let bI=b['Data']['Reviews'][bH];b['Data']['Review']['RenderReviewItem'](f,bI);}for(let bJ=0x0;bJ<b['Data']['Clashes']['length'];bJ++){let bK=b['Data']['Clashes'][bJ];d['RenderClashItem'](bK);}if(b['Custom']['RenderReviewItem']!==undefined)b['Custom']['RenderReviewItem']();b['Control']['Render2D'](f),b['Avatar']['Render2D'](),b['Font']['RenderEdgeTest'](f);if(b['Configuration']['Render']['Compass2D']!==undefined&&b['Configuration']['Render']['Compass2D']['Visible'])b['Compass']['RenderCompass']();}function b8(){for(let bH=0x0;bH<b['Data']['Reviews']['length'];bH++){let bI=b['Data']['Reviews'][bH];b['Data']['Review']['Render3DReviewItem'](bI);}};function b9(){if(b['Configuration']['Render']['Pivot']['Visible']&&b['Camera']['RenderPivot']){if(b['Configuration']['Render']['Pivot']['GuideLine']!==undefined&&b['Configuration']['Render']['Pivot']['GuideLine']['Enable']===!![]){let bH=f['canvas']['width'],bI=f['canvas']['height'],bJ=new c['Vector3']()['copy'](b['Camera']['pivot']);const bK=new c['Matrix4']()['copy'](b['Camera']['matMVP']);let bL=b['Renderer']['Util']['GetScreenPositionByMatrix'](bK,bJ),bM=new c['Color'](0xff,0xff,0xff,0xc8);f['strokeStyle']='rgba('+bM['r']+','+bM['g']+','+bM['b']+','+bM['glAlpha']()+')';let bN=b['Configuration']['Render']['Pivot']['GuideLine']['Thickness']==undefined?0x1:b['Configuration']['Render']['Pivot']['GuideLine']['Thickness'];f['lineWidth']=bN;let bO=0xa;b['Renderer']['Util']['DrawLine'](f,0x0,bL['y'],bL['x']-bO,bL['y']),b['Renderer']['Util']['DrawLine'](f,bL['x']+bO,bL['y'],bH,bL['y']),b['Renderer']['Util']['DrawLine'](f,bL['x'],0x0,bL['x'],bL['y']-bO),b['Renderer']['Util']['DrawLine'](f,bL['x'],bL['y']+bO,bL['x'],bI);}}};function ba(){if(b['Configuration']['Render']['Pivot']['Visible']&&b['Camera']['RenderPivot']&&b['Configuration']['Render']['Pivot']['GuideLine']!==undefined&&b['Configuration']['Render']['Pivot']['GuideLine']['Enable']===!![]){let bH=b['Configuration']['Render']['Pivot']['GuideLine']['Alpha'];if(bH===undefined)bH=0x19;e['depthFunc'](e['LEQUAL']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),b['Shader']['SetMatrix'](b['Camera']['matMVP'],b['Camera']['matMV']),d['Util']['PivotAxisLine3D'](new c['Color'](0xff,0x0,0x0,0xff),new c['Color'](0x0,0xff,0x0,0xff),new c['Color'](0x64,0x64,0xff,0xff)),e['depthFunc'](e['GREATER']),d['Util']['PivotAxisLine3D'](new c['Color'](0xff,0x0,0x0,bH),new c['Color'](0x0,0xff,0x0,bH),new c['Color'](0x64,0x64,0xff,bH)),b['Shader']['EndShader'](),e['depthFunc'](e['LEQUAL']);}};function bb(){let bH=b['Configuration']['Render']['Pivot']['GuideLine']['Alpha'];if(bH===undefined)bH=0x19;e['disable'](e['DEPTH_TEST']),d['Util']['OrbitAxisLine'](aR,aS,aT,aU),e['enable'](e['DEPTH_TEST']);};this['RenderClashItem']=function(bH){if(!bH['visible'])return;if(bH['drawitem']['position']['length']===0x0)return;if(b6(bH['drawitem']['position'][0x0],aN))return;const bI=bH['drawitem']['color'];f['strokeStyle']='rgba('+bI['r']+',\x20'+bI['g']+',\x20'+bI['b']+',\x20'+bI['glAlpha']()+')',f['lineWidth']=0x2;let bJ=new c['Vector3']()['copy'](bH['drawitem']['position'][0x0]);const bK=new c['Matrix4']()['copy'](b['Camera']['matMVP']);let bL=d['Util']['GetScreenPositionByMatrix'](bK,bJ),bM=bH['drawitem']['size'],bN=bH['drawitem']['size'],bO=bL['x']-bM*0.5,bP=bL['y']-bN*0.5;switch(bH['itemType']){case c['Enum']['DRAW_TYPES']['RECT']:{b['Renderer']['Util']['DrawRect'](f,bO,bP,bM,bN,![],!![]);}break;case c['Enum']['DRAW_TYPES']['CIRCLE']:{}break;case c['Enum']['DRAW_TYPES']['TRIANGLE']:{let bQ=bL['x'],bR=bL['y'],bS=bL['x'],bT=bL['y']+0x2;b['Renderer']['Util']['DrawTriangle'](f,bQ,bR,bS,bT,bH['drawitem']['size']);}break;default:break;}},this['AddDrawCount']=function(){g['drawCall']++;},this['AddOcclusionCullingCount']=function(){g['occlusionCullingCount']++;};function bc(bH){if(bH){let bI='Arial',bJ=0xc,bK=new c['Color'](0x0,0x0,0x0,0xc8);f['fillStyle']=b['Data']['GetColorString'](bK),f['font']=bJ+'pt\x20'+bI;let bL='Triangle\x20Mesh\x20Count\x20:\x20'+new Intl['NumberFormat']()['format'](b['Data']['TotalTriNum']);;let bM=f['canvas']['getBoundingClientRect']()['left'];f['fillText'](bL,bM+0xc8,f['canvas']['height']-0x14);}else{let bN='Arial',bO=0xc,bP=new c['Color'](0x36,0xaf,0xb8,0xc8);f['fillStyle']=b['Data']['GetColorString'](bP),f['font']=bO+'pt\x20'+bN;let bQ='Node\x20:\x20'+b['Data']['ModelFileManager']['GetNodeCount']()+'\x20,\x20'+'Draw\x20:\x20'+g['drawCall']+'\x20,\x20'+'Culling\x20:\x20'+g['occlusionCullingCount']+'\x20,\x20'+'MeshBlock\x20:\x20'+b['Data']['Objects']['length']+'\x20,\x20'+'MeshCnt\x20:\x20'+b['Data']['TotalTriNum'];if(d['enableFPS'])bQ+=',\x20FPS\x20:'+b['GetFPS']();f['fillText'](bQ,f['canvas']['width']-0x320,f['canvas']['height']-0x14);}}function bd(){f['fillStyle']=b['Data']['GetColorString'](g['font']['color']),f['font']=0x18+'pt\x20'+g['font']['face'];let bH=b['Animation']['Daelim_GetTimeString']();f['fillText'](bH,f['canvas']['width']-0x190,f['canvas']['height']-0xc8);}function be(){let bH=b['MeshBlock']['DownloadDataPercent']();if(bH>=0x1)return;if(b['MeshBlock']['DownloadDataNum']()<=0x0)return;if(b['MeshBlock']['DownloadCount']()===0x0)return;let bI=new c['Vector2'](0.94,0.98);bI['x']=b['Camera']['clientWidth']*bI['x'],bI['y']=b['Camera']['clientHeight']-b['Camera']['clientHeight']*bI['y'];let bJ=b['Camera']['clientWidth']*0.003,bK=b['Camera']['clientWidth']*0.035;bJ=Math['max'](bJ,0x3),bK=Math['max'](bK,0x1);let bL=bK*bH,bM=new c['Vector3'](bI['x'],bI['y'],0x0),bN=new c['Vector3'](bI['x']+bK,bI['y']+bJ,0x0),bO=new c['Vector3'](bI['x']+bL,bI['y']+bJ,0x0);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),e['disable'](e['DEPTH_TEST']),b['Shader']['SetMatrix'](b['Camera']['screenProjectionMatrix'],undefined);let bP=new c['Color'](0x0,0x0,0x0,0xff),bQ=new c['Color'](0xc8,0xc8,0xc8,0xff),bR=new c['Color'](0x14,0xff,0x14,0xff);d['Util']['DrawRectangle2D'](bM,bN,bQ),d['Util']['DrawRectangle2D'](bM,bO,bR),d['Util']['DrawLineRectangle2D'](bM,bN,bP),b['Shader']['EndShader']();}let bf=function(bH,bI){if(bH['flag']['sequence']>bI['flag']['sequence'])return 0x1;else{if(bH['flag']['sequence']<bI['flag']['sequence'])return-0x1;}return 0x0;};function bg(){for(let bH=0x0;bH<b['Data']['ObjectsUpdateLength'];bH++){let bI=b['Data']['ObjectsUpdateLength'],bJ=b['Data']['ModelFileManager']['GetFileAreaData'](b['Data']['Objects'][bH]['id_file'],b['Data']['Objects'][bH]['link']);bJ!==undefined&&(bI=bJ['lod_sequence']),b['Data']['Objects'][bH]['flag']['sequence']=bI;}b['Data']['Objects']['sort'](bf);}this['Sort']=function(){bg();},this['SetViewDistanceBBox']=function(bH){if(bH===undefined)bH=![];let bI=![],bJ=b['Renderer']['GetReviewNearPlane'](),bK=new c['Matrix4']()['copy'](b['Camera']['matMVP']),bL=new c['Matrix4']();for(let bM=0x0;bM<b['Data']['ObjectsUpdateLength'];bM++){let bN=b['Data']['Objects'][bM],bO=b['Data']['ModelFileManager']['GetFileInfo'](bN['id_file']);if(bO===undefined)continue;if(!bH){if(!bO['UseViewDistance'])continue;}let bP=b['Data']['ModelFileManager']['GetFileAreaData'](bN['id_file'],bN['link']);if(bP===undefined)continue;for(let bQ=0x0;bQ<bN['tag']['length'];bQ++){let bR=bN['tag'][bQ],bS=b['Data']['ShapeAction']['GetAction'](bN['id_file'],bR['origin_id']);if(bS===undefined)continue;if(!bO['UseViewDistance']||bS['disableViewDistaceBBox']){bS['drawViewDistanceBBox']&&(bR['object']['flag']['updateProcess']=!![],bI=!![],bS['drawViewDistanceBBox']=![]);continue;}let bT=new c['BBox']()['copy'](bR['BBox']);if(!bS['transform']['equals'](bL))bT=b['Util']['GetBBoxFormMatrix'](bT,bS['transform']);let bU=0x0,bV=!![];if(b['Util']['IsRenderReivewNearPlane'](bT['center'],bJ))bU=bO['ViewDistance']+0x1,bV=![];else{let bW=new c['Vector3']()['copy'](bT['center'])['applyMatrix4'](bK);(bW['x']<-0x1||bW['x']>0x1||bW['y']<-0x1||bW['y']<-0x1)&&(bU=bO['ViewDistance']+0x1,bV=![]);}bV&&(bU=b['Camera']['GetScreen1PixelLength'](bT['center']),bV=![]);if(bV)b['Camera']['perspectiveView']?bU=new c['Vector3']()['subVectors'](bT['center'],cameraPos)['length']():bU=b['Camera']['GetScreen1PixelLength'](bT['center']);if(bU>bO['ViewDistance']){if(!bS['drawViewDistanceBBox'])bR['object']['flag']['updateProcess']=!![],bI=!![];else{let bX=b['RenderWGL']['GetPipeline'](bN['uuid']);if(bX!==undefined)for(let bY=0x0;bY<bX['listProcess']['length'];bY++){let bZ=bX['listProcess'][bY]['start'],c0=bZ+bX['listProcess'][bY]['length'];if(bR['m_triIdx']>=bZ&&bR['m_triIdx']<c0){bR['object']['flag']['updateProcess']=!![],bI=!![];break;}}}bS['drawViewDistanceBBox']=!![];}else{if(bS['drawViewDistanceBBox'])bR['object']['flag']['updateProcess']=!![],bI=!![];else{let c1=b['RenderWGL']['GetPipeline'](bN['uuid']);if(c1!==undefined){let c2=![];for(let c3=0x0;c3<c1['listProcess']['length'];c3++){let c4=c1['listProcess'][c3]['start'],c5=c4+c1['listProcess'][c3]['length'];if(bR['m_triIdx']>=c4&&bR['m_triIdx']<c5){c2=!![];break;}}!c2&&(bR['object']['flag']['updateProcess']=!![],bI=!![]);}}bS['drawViewDistanceBBox']=![];}}}bI&&b['RenderWGL']['DeleteUtilWGLItem'](0x5);},this['SetViewDistanceBBoxColor']=function(bH){a4=bH;},this['GetViewDistanceBBoxColor']=function(){return a4;};function bh(){let bH=h['glColor'](),bI=b['MultiView'][b['CameraIndex']];bI['UseDefaultViewColor']===![]&&(bH=bI['MultiViewBGColor']['glColor']());if(bI['canvasElement']['canvas']['id']=='canvas_miniview'&&aV){aV=![];if(aX)b['Shader']['deletesTypeShader'](c['Enum']['SHADER_TYPES']['VCOLOR']);else b['Shader']['deletesTypeShader'](c['Enum']['SHADER_TYPES']['PBR']),b['Shader']['deletesTypeShader'](c['Enum']['SHADER_TYPES']['PHONG']);aW=!![];}else{if(aW==!![]){aV=!![];if(aX)b['Shader']['deletesTypeShader'](c['Enum']['SHADER_TYPES']['VCOLOR']);else b['Shader']['deletesTypeShader'](c['Enum']['SHADER_TYPES']['PBR']),b['Shader']['deletesTypeShader'](c['Enum']['SHADER_TYPES']['PHONG']);aW=![];}}e['clearColor'](bH['r'],bH['g'],bH['b'],bH['a']),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);if(b['Data']['IsDisconnectedClear']()&&b['Data']['GetLicenseResult']()!==0x5)return;b1();const bJ=bI['UpdateFramebuffer'];if(bJ)b['CustomObject']['InitRenderProcess']();let bK=bI['ObjectRenderEnable']['length'];bK>0x0&&b['Shader']['CreateShaderData']();if(d['enableRenderLimit']&&b['IsUseProgressive']()){if(d['enableRenderLimitRate']<0x0){if(b['Configuration']['Render']['Progressive']['UseLimitCount']){if(bK>d['enableRenderLimitCnt'])bK=d['enableRenderLimitCnt'];}else{let bO=0x0,bP=b['Data']['TotalTriNum']/0x64*b['Configuration']['Render']['Progressive']['Percentage'];for(let bQ=0x0;bQ<bK;bQ++){let bR=b['Data']['ModelFileManager']['GetFileAreaData'](b['Data']['Objects'][bQ]['id_file'],b['Data']['Objects'][bQ]['link']);if(bR===undefined)continue;bO+=bR['tri_num'];if(bP<bO){bK=bQ;break;}}}}else{let bS=Math['floor'](bK*d['enableRenderLimitRate']);bS=Math['max'](bS,0x1);if(bK>bS)bK=bS;}}if(bJ){g['drawCall']=0x0;for(let bU=0x0;bU<bK;bU++){b['Data']['Objects'][bU]['attribs']['a_index']['buffer']!==null&&(b['Data']['Objects'][bU]['flag']['renderEnable']=!![]),!b['Data']['Objects'][bU]['flag']['cache']&&(b['Data']['Objects'][bU]['flag']['renderEnable']=![]);}b['CustomObject']['BenginRenderObject']();let bT=[0x1,0x0,0x0,0x0];{let bV=new c['Matrix4']()['copy'](b['Camera']['cameraMatrix']),bW=new c['Matrix4']()['getInverse'](bV),bX=bW['multiplyVector'](b['Camera']['cameraPosition']),bY=bW['multiplyVector'](b['Camera']['cameraTarget']),bZ=b['Camera']['near'],c0=new c['Vector3']()['subVectors'](bY,bX);c0['normalize'](),bT[0x0]=c0['x'],bT[0x1]=c0['y'],bT[0x2]=c0['z'];let c1=new c['Vector3']()['addVectors'](bX,c0['multiplyScalar'](bZ));bT[0x3]=-(bT[0x0]*c1['x']+bT[0x1]*c1['y']+bT[0x2]*c1['z']);}aN=bT;}else for(let c2=0x0;c2<bK;c2++){if(b['Data']['Objects'][c2]['attribs']['a_index']['buffer']===null)continue;b['Data']['Objects'][c2]['flag']['renderEnable']=bI['ObjectRenderEnable'][c2];}{if(b['CameraIndex']===0x0)bl(bK);bm(bJ,bK);}b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['MAIN']);bJ&&(e['clearColor'](bH['r'],bH['g'],bH['b'],bH['a']),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),bI['UseDefaultViewColor']&&b2());if(aD){if(b['Grid']!==undefined)b['Grid']['Render'](e,f,bJ);else{if(bJ)bB();}}if(bJ)bD();let bL=!![],bM=b['Control']['UnderControl'](),bN=b['Control']['GetMode']();bL=bI['ViewEntityInfo']['ShowObject'];if(bL&&aC===c['Enum']['ViewUnderControlVisibleMode']['BOUNDBOX']&&bN!==c['Enum']['CONTROL_STATE']['WALKTHROUGH']&&bN!==c['Enum']['CONTROL_STATE']['FLY']&&bM){bL=![];let c3=b['Data']['GetBBox']();if(c3['radius']>0x0){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);const c4=new c['Matrix4']()['copy'](b['Camera']['matMV']),c5=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['SetGLLight'](),b['Shader']['SetClipping'](undefined),b['Shader']['SetMatrix'](c5,c4);let c6=new c['Color']()['copy'](b['Configuration']['Model']['Selection']['Color']),c7=c6['glColor']();b['Shader']['SetGLColor'](c7['r'],c7['g'],c7['b'],c7['a']),d['Util']['DrawBoundBox3D'](c3,1.5),b['Shader']['EndShader']();}}if(bL){bJ&&(e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']),b['RenderWGL']['Util_RenderViewDistBBox'](bK,a4));let c8=c['Enum']['SHADER_TYPES']['PHONG'];if(b['useWebGL2'])c8=c['Enum']['SHADER_TYPES']['PBR'];e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);if(![]){if(N){if(b['Camera']['matShadowMV']!==undefined&&b['Camera']['matShadowProjection']!==undefined){let c9=new c['Matrix4']()['copy'](b['Camera']['matShadowMV']);const ca=new c['Matrix4']()['multiplyMatrices'](b['Camera']['matShadowProjection'],c9);b['Shader']['SetCustomMatrix']('u_MVPShadowMatrix',ca),b['Shader']['SetCustomMatrix']('u_ProjectionShadowMatrix',b['Camera']['matShadowProjection']);let cb=b['Shader']['GetPositionTexture'](0xa);b['Shader']['SetCurrentTexture']('uShadowPositionTexture',e['TEXTURE_2D'],cb['texture']);let cc=e['getUniformLocation'](b['Shader']['currentProgram'],'uBias');cc&&e['uniform1f'](cc,-0.008);}}}if(!F){e['disable'](e['BLEND']);if(b['Custom']['ImproveRender']){b['Shader']['BeginShader'](c8),b['Shader']['SetGLLight'](!![]);const cd=new c['Matrix4']()['copy'](b['Camera']['matMV']),ce=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['SetMatrix'](ce,cd),b['Shader']['SetClipping'](cd),b['Custom']['ImproveRender'](b['Data']['Objects']),b['Shader']['EndShader']();}b['RenderWGL']['SetUpdateClipping'](!![]),b['RenderWGL']['SetUpdateLightRotate'](!![]);if(aX){if(bK>0x0){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['VCOLOR']);if(b['Shader']['currentShaderType']!==undefined){b['Shader']['SetGLCameraData']();if(b['Camera']['CameraIndex']===0x3)b['Shader']['SetGLIsolate'](0x0);else b['Shader']['SetGLIsolate'](0x1);b['Shader']['SetGLAlpha'](0x1);let cf=e['getUniformLocation'](b['Shader']['currentProgram'],'uColorMapSize');cf&&e['uniform1f'](cf,b['ColorMap']['GetColorMapWidth']());const cg=new c['Matrix4']()['copy'](b['Camera']['matMV']),ch=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['SetMatrix'](ch,cg);if(b['RenderWGL']['GetUpdateClipping']())b['Shader']['SetClipping'](cg);else b['Shader']['SetClipping'](undefined);b['Shader']['SetGLLight'](b['RenderWGL']['GetUpdateLightRotate']());for(let ci=0x0;ci<bK;ci++){b['Shader']['SetGLMaterial'](b['Data']['Objects'][ci]['tag'][0x0]['material']),b['Shader']['SetGLColor'](b['Configuration']['Model']['Selection']['Color']['r']/0xff,b['Configuration']['Model']['Selection']['Color']['g']/0xff,b['Configuration']['Model']['Selection']['Color']['b']/0xff,b['Configuration']['Model']['Selection']['Color']['a']/0xff),b['RenderWGL']['UpdateRenderProcessByObject_v4'](b['Data']['Objects'][ci],![]);}b['Shader']['EndShader']();}b['Shader']['BeginShader'](c8);for(let cj=0x0;cj<bK;cj++){if(b['Data']['Objects'][cj]['tInd']!==undefined&&b['Data']['Objects'][cj]['tInd']['size']!==0x0)b['RenderWGL']['UpdateRenderProcessByObject_v3'](b['Data']['Objects'][cj],![],c8);}b['Shader']['EndShader']();}}else for(let ck=0x0;ck<bK;ck++){b['RenderWGL']['UpdateRenderProcessByObject_v3'](b['Data']['Objects'][ck],![],c8);}e['enable'](e['DEPTH_TEST']),e['depthMask'](!![]),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']);if(aX){if(bK>0x0){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['VCOLOR']);if(b['Shader']['currentShaderType']!==undefined){b['Shader']['SetGLCameraData'](),b['Shader']['SetMVPMatrix'](b['Camera']['matMV'],b['Camera']['viewMatrix'],b['Camera']['projectionMatrixSrc']);if(b['Camera']['CameraIndex']===0x3)b['Shader']['SetGLIsolate'](0x0);else b['Shader']['SetGLIsolate'](0x1);b['Shader']['SetGLAlpha'](0x0);let cl=e['getUniformLocation'](b['Shader']['currentProgram'],'uColorMapSize');cl&&e['uniform1f'](cl,b['ColorMap']['GetColorMapWidth']());const cm=new c['Matrix4']()['copy'](b['Camera']['matMV']),cn=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['SetMatrix'](cn,cm);if(b['RenderWGL']['GetUpdateClipping']())b['Shader']['SetClipping'](cm);else b['Shader']['SetClipping'](undefined);b['Shader']['SetGLLight'](b['RenderWGL']['GetUpdateLightRotate']());for(let co=0x0;co<bK;co++){b['Shader']['SetGLMaterial'](b['Data']['Objects'][co]['tag'][0x0]['material']),b['Shader']['SetGLColor'](b['Configuration']['Model']['Selection']['Color']['r']/0xff,b['Configuration']['Model']['Selection']['Color']['g']/0xff,b['Configuration']['Model']['Selection']['Color']['b']/0xff,b['Configuration']['Model']['Selection']['Color']['a']/0xff),b['RenderWGL']['UpdateRenderProcessByObject_v4'](b['Data']['Objects'][co],!![]);}b['Shader']['EndShader'](),b['Shader']['BeginShader'](c8);for(let cp=0x0;cp<bK;cp++){if(b['Data']['Objects'][cp]['tInd']!==undefined&&b['Data']['Objects'][cp]['tInd']['size']!==0x0)b['RenderWGL']['UpdateRenderProcessByObject_v3'](b['Data']['Objects'][cp],!![],c8);}b['Shader']['EndShader']();}}}else for(let cq=0x0;cq<bK;cq++){b['RenderWGL']['UpdateRenderProcessByObject_v3'](b['Data']['Objects'][cq],!![],c8);}}b['Shader']['EndShader']();}e['disable'](e['BLEND']),e['depthMask'](!![]);bJ&&(b['CustomObject']['Render'](),b['CustomObject']['AnimationRender']());bJ&&(b['Font']['RenderPMIFont'](),b['Font']['RenderEdge']());bJ&&b['Pick']['RenderPreselectEdge']();if(bJ&&b['Configuration']['Model']['Selection']['Mode']===c['Enum']['SelectionVisibleMode']['BOUNDBOX']){let cr=!![],cs=new c['BBox'](),ct=b['Data']['GetSelection']();if(ct['length']>0x0){if(cr){let cv=b['Data']['GetBodies'](ct);cs=b['Data']['GetBBox'](cv),cr=![];}}let cu=b['CustomObject']['GetSelection']();if(cu['length']>0x0){if(cr)cs=b['CustomObject']['GetBoundBox'](cu);else{let cw=b['CustomObject']['GetBoundBox'](cu);cs['min']['min'](cw['min']),cs['max']['min'](cw['max']),cs['update']();}}if(cs['radius']>0x0){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);const cx=new c['Matrix4']()['copy'](b['Camera']['matMV']),cy=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['SetGLLight'](),b['Shader']['SetClipping'](undefined),b['Shader']['SetMatrix'](cy,cx);let cz=new c['Color']()['copy'](b['Configuration']['Model']['Selection']['Color']),cA=cz['glColor']();b['Shader']['SetGLColor'](cA['r'],cA['g'],cA['b'],cA['a']),d['Util']['DrawBoundBox3D'](cs,b['Configuration']['Model']['Selection']['Thickness']),b['Shader']['EndShader'](),e['enable'](e['DEPTH_TEST']);}}if(bJ&&a5&&b['useWebGL2']){e['enable'](e['DEPTH_TEST']),e['depthMask'](![]),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']);let cB=!![];if(!b['Camera']['perspectiveView']&&aA){let cC=aB,cD=new c['Vector3']()['copy'](b['Camera']['pivot']),cE=b['Camera']['GetScreen1PixelLength'](cD);if(cE<cC)cB=![];}if(cB){if(am){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['TEXTURE2DCOLOR']);let cF=ao;if(cF===undefined)cF=b['Data']['GetBBox']();let cG=an,cH=aq,cI=ar;if(cF['radius']>0x0){let cJ=new c['Vector3'](0x1,0x0,0x0),cK=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['SetMatrix'](cK,undefined);let cL=as['glColor']();b['Shader']['SetGLColor'](cL['r'],cL['g'],cL['b'],cL['a']);let cM=b['Shader']['SetGLAlphaCloud']();cF['max']['z']+=cH*0.75+cF['max']['z'],cF['min']['x']-=cH/0x2,cF['max']['x']+=cH/0x2;if(cM)b['RenderWGL']['Util_RenderCloud'](cF,cH,cJ,cI,cG);}b['Shader']['EndShader']();}if(at){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['TEXTURE2DCOLOR']);let cN=av;if(cN===undefined)cN=b['Data']['GetBBox']();let cO=au,cP=ax,cQ=ay;if(cN['radius']>0x0){let cR=new c['Vector3'](0x1,0x0,0x0),cS=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['SetMatrix'](cS,undefined);let cT=az['glColor']();b['Shader']['SetGLColor'](cT['r'],cT['g'],cT['b'],cT['a']);let cU=b['Shader']['SetGLAlphaMist']();cN['max']['z']+=cP*0.05+cN['max']['z'],cN['min']['x']-=cP/0x2,cN['max']['x']+=cP/0x2;if(cU)b['RenderWGL']['Util_RenderMist'](cN,cP,cR,cQ,cO);}b['Shader']['EndShader']();}}if(a8){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['TEXTURE2DCOLOR']);let cV=ah;if(cV===undefined)cV=b['Data']['GetBBox']();let cW=a9,cX=ab,cY=ac,cZ=ad;if(cV['radius']>0x0){let d0=new c['Matrix4']();d0['makeRotationX'](cX*Math['PI']/0xb4);let d1=new c['Vector3'](0x0,0x0,-0x1);d1=d0['multiplyVector'](d1);let d2=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['SetMatrix'](d2,undefined);let d3=new c['Color'](0x99,0xd9,0xea,0x96)['glColor']();b['Shader']['SetGLColor'](d3['r'],d3['g'],d3['b'],d3['a']);let d4=b['Shader']['SetGLAlphaRain']();cV['max']['z']+=0x1e8480;if(d4)b['RenderWGL']['Util_RenderRain'](cV,cY,d1,cZ,cW);}b['Shader']['EndShader']();}else{if(af){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['TEXTURE2DCOLOR']);let d5=ah;if(d5===undefined)d5=b['Data']['GetBBox']();let d6=ag,d7=ai,d8=aj,d9=ak;if(d5['radius']>0x0){let da=new c['Matrix4']();da['makeRotationX'](d7*Math['PI']/0xb4);let db=new c['Vector3'](0x0,0x0,-0x1);db=da['multiplyVector'](db);let dc=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['SetMatrix'](dc,undefined);let dd=al['glColor']();b['Shader']['SetGLColor'](dd['r'],dd['g'],dd['b'],dd['a']);let de=b['Shader']['SetGLAlphaDot']();if(de)b['RenderWGL']['Util_RenderSnow'](d5,d8,db,d9,d6);}b['Shader']['EndShader']();}}e['disable'](e['DEPTH_TEST']),e['depthMask'](!![]);}if(bJ){b8(),e['enable'](e['DEPTH_TEST']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']);if(aP!==!![])ba();else bb(),aP=![];e['disable'](e['DEPTH_TEST']),e['disable'](e['BLEND']);}b['Avatar']['Render'](),b['Shader']['EndFramebuffer'](),b['Avatar']['GLSLPreprocessing'](bJ,bK),e['disable'](e['DEPTH_TEST']);{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['MODELAFTER']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);![]&&(b['Shader']['EndFramebuffer'](),b['Shader']['CopyFBDepthBuffer'](c['Enum']['FB_RENDER_TYPES']['MODELAFTER'],c['Enum']['FB_RENDER_TYPES']['MAIN']),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['MODELAFTER']),b['CustomObject']['AnimationRender'](),b['Avatar']['Render']());if(b['Configuration']['Model']['Selection']['Mode']===c['Enum']['SelectionVisibleMode']['HIGHLIGHT_SHADED']){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC3D']);if(aV)b['Shader']['SetGLCameraData']();e['enable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);const df=new c['Matrix4']()['copy'](b['Camera']['matMV']),dg=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['SetClipping'](df),b['Shader']['SetMatrix'](dg,df);let dh=new c['Color']()['copy'](b['Configuration']['Model']['Selection']['Color']),di=dh['glColor']();b['Shader']['SetGLColor'](di['r'],di['g'],di['b'],di['a']);for(let dj=0x0;dj<bK;dj++){let dk=b['Data']['Objects'][dj]['flag']['renderEnable'];b['Data']['Objects'][dj]['flag']['renderEnable']=!![],b['RenderWGL']['UpdateRenderProcessBySelectPickObject_v2'](b['Data']['Objects'][dj]),b['Data']['Objects'][dj]['flag']['renderEnable']=dk;}b['Shader']['EndShader']();{b['CustomObject']['SelectedRender'](c['Enum']['SHADER_TYPES']['BASIC3D']);}}e['clear'](e['DEPTH_BUFFER_BIT']),b['Control']['Render'](),b['Shader']['EndFramebuffer']();}b['Control']['GetMode']()===c['Enum']['CONTROL_STATE']['MARKUP']&&b['Pick']['EnableControlPicker']&&(b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CANVASGL']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Pick']['RenderControlPicker'](),b['Shader']['EndFramebuffer']());b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['EndFramebuffer']();if(bK<=0x0){{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);let dl=b['Shader']['GetItemFramebuffer'](c['Enum']['FB_RENDER_TYPES']['MAIN']);dl!==undefined&&dl['msaa']?(b['Shader']['CopyFBColorBuffer'](c['Enum']['FB_RENDER_TYPES']['END'],c['Enum']['FB_RENDER_TYPES']['MAIN']),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END'])):bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['MAIN']),b['Shader']['EndFramebuffer'](),bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['END']);}return;}if(p||l||F){{let dm=b['Configuration']['Render']['Edge']['Thickness'];if(dm<0.0001)dm=0.0001;if(F&&G){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['EDGE']);let dn=b['Shader']['GetColorIDTexture'](0xb);if(dn)bx(c['Enum']['SHADER_TYPES']['EDGE'],dn['texture'],dn['width']/dm,dn['height']/dm,new c['Color'](0xff,0xff,0xff,0xff),0xb);b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']),bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],H),b['Shader']['EndFramebuffer']();}b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['EDGE']);{let dp=b['Shader']['GetColorIDTexture'](0x0);if(dp)bx(c['Enum']['SHADER_TYPES']['EDGE'],dp['texture'],dp['width']/dm,dp['height']/dm,new c['Color'](0xff,0xff,0xff,0xff));}b['Shader']['EndShader'](),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']),b['Configuration']['Render']['Edge']&&(b['Configuration']['Render']['Edge']['Color']&&(s=b['Configuration']['Render']['Edge']['Color'])),bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],s),b['Shader']['EndFramebuffer']();}if(![]){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['EDGE']);{let dq=b['Shader']['GetColorIDTexture'](0x1);bx(c['Enum']['SHADER_TYPES']['EDGE'],dq['texture'],dq['width'],dq['height'],new c['Color'](0xff,0xff,0xff,0xff));}b['Shader']['EndShader'](),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']);if(F)bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],H);else bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],t);b['Shader']['EndFramebuffer']();}e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);}if(r){if(b['Configuration']['Render']['GroupEdge']!==undefined){let dr=b['Configuration']['Render']['GroupEdge']['Thickness'];if(dr<0.0001)dr=0.0001;b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['EDGE']);{let ds=b['Shader']['GetColorIDTexture'](0x4);if(ds!==undefined)bx(c['Enum']['SHADER_TYPES']['EDGE'],ds['texture'],ds['width']/dr,ds['height']/dr,new c['Color'](0xff,0xff,0xff,0xff));}b['Shader']['EndShader'](),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']),bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],u),b['Shader']['EndFramebuffer']();}e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);}if(q){{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['EDGE']);let dt=b['Configuration']['Render']['Edge']['Thickness'];if(dt<0.0001)dt=0.0001;{let du=b['Shader']['GetColorIDTexture'](0x1);if(du)bx(c['Enum']['SHADER_TYPES']['EDGE'],du['texture'],du['width']/dt,du['height']/dt,new c['Color'](0xff,0xff,0xff,0xff));}b['Shader']['EndShader'](),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']);if(F)bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],H);else bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],t);b['Shader']['EndFramebuffer']();}e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);}if(x){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['EDGE']);let dv=b['Configuration']['Render']['Edge']['Thickness'];if(dv<0.0001)dv=0.0001;let dw=b['Shader']['GetColorIDTexture'](0x3);if(dw)bx(c['Enum']['SHADER_TYPES']['EDGE'],dw['texture'],dw['width']/dv,dw['height']/dv,new c['Color'](0xff,0xff,0xff,0xff));b['Shader']['EndShader'](),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']),bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],y),b['Shader']['EndFramebuffer']();}if(z){{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['EDGE']);let dx=b['Shader']['GetColorIDTexture'](0x2);dx!==undefined&&bx(c['Enum']['SHADER_TYPES']['EDGE'],dx['texture'],dx['width'],dx['height'],new c['Color'](0xff,0xff,0xff,0xff)),b['Shader']['EndShader'](),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']),bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],B),b['Shader']['EndFramebuffer']();}e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);}{if(T){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']);{let dy=b['Configuration']['Model']['Selection']['Thickness'];if(dy<0.0001)dy=0.0001;let dz=b['Shader']['GetItemFramebuffer'](c['Enum']['FB_RENDER_TYPES']['SELECTED']);bx(c['Enum']['SHADER_TYPES']['EDGE'],dz['targetTexture'][0x0],dz['width']/dy,dz['height']/dy,new c['Color'](0xff,0xff,0xff,0xff));}b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']);if(b['Configuration']['Model']['Selection']['LineColor']!==undefined)U=b['Configuration']['Model']['Selection']['LineColor'];bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],U),b['Shader']['EndFramebuffer'](),e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);}}e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']);if(![]){if(a5&&b['useWebGL2']){if(a8){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMAFTEREFFECT']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['TEXTURE2D']);const dA=b['Util']['DegToRad'](0x2d),dB=b['Camera']['clientWidth']/b['Camera']['clientHeight'];let dC=new c['Matrix4']()['perspective'](dA,dB,0x0,0xa),dD=new c['Matrix4']();dD['elements']=dC;let dE=new c['Vector3'](0x0,0x0,-0.1),dF=new c['Vector3'](0x0,0x0,0x0),dG=new c['Vector3'](0x0,0x1,0x0),dH=new c['Matrix4']()['copy'](b['Camera']['matMV']);dH['setPosition'](new c['Vector3']());let dI=new c['Matrix4']()['lookAt'](dE,dF,dG);dI=new c['Matrix4']()['getInverse'](dI);let dJ=-0x5,dK=0x3,dL=-0.001*dK,dM=new c['Matrix4']();dM['makeRotationZ'](dJ*Math['PI']/0xb4);let dN=new c['Vector3'](0x0,0x0,0x1);dN=dH['multiplyVector'](dN),dN=dM['multiplyVector'](dN);let dO=undefined;{let dS=b['CustomObject']['GetKey']()+'_Rain',dT=b['RenderProcessTime']-b['LastRenderProcessTime'],dU=b['Data']['ShapeAction']['GetAction'](dS,0x0);dU===undefined?(dU=b['Data']['ActionItem'](),dO=dU['transform'],dO['copy'](dM),b['Data']['ShapeAction']['SetAction'](dS,0x0,dU)):(dO=dU['transform'],dN['multiplyScalar'](dL*dT),dO['translate'](dN['x'],dN['y'],dN['z']),dO['getTranslate']()['y']<-0x1&&dO['copy'](dM));}let dP=new c['Matrix4']()['multiplyMatrices'](dO,dI),dQ=new c['Matrix4']()['multiplyMatrices'](dD,dP);b['Shader']['SetMatrix'](dQ,undefined),b['Shader']['SetGLColor'](0x0,0.5,0x1,0.4);let dR=b['Shader']['SetGLAlphaDot']();if(dR)b['RenderWGL']['Util_RenderScreenRain']();b['Shader']['EndShader'](),e['enable'](e['DEPTH_TEST']),b['Shader']['EndFramebuffer']();}else{if(af){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMAFTEREFFECT']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['TEXTURE2D']);const dV=b['Util']['DegToRad'](0x2d),dW=b['Camera']['clientWidth']/b['Camera']['clientHeight'];let dX=new c['Matrix4']()['perspective'](dV,dW,0x0,0xa),dY=new c['Matrix4']();dY['elements']=dX;let dZ=new c['Matrix4']()['copy'](b['Camera']['matMV']);dZ['setPosition'](new c['Vector3']());let e0=new c['Vector3'](0x0,0x0,-0.1),e1=new c['Vector3'](0x0,0x0,0x0),e2=new c['Vector3'](0x0,0x0,0x1),e3=new c['Matrix4']()['lookAt'](e0,e1,e2);e3=new c['Matrix4']()['getInverse'](e3);let e4=new c['Matrix4']()['multiplyMatrices'](dZ,e3),e5=new c['Matrix4']()['multiplyMatrices'](dY,e4);b['Shader']['SetMatrix'](e5,undefined),b['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);let e6=b['Shader']['SetGLAlphaDot']();if(e6)b['RenderWGL']['Util_RenderScreenSnow']();b['Shader']['EndShader'](),e['enable'](e['DEPTH_TEST']),b['Shader']['EndFramebuffer']();}else{if(a7>0x0){let e7=b['Material']['GetMaterial'](a7);e7!==undefined&&(b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMAFTEREFFECT']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['SetGLMaterial'](a7),b['Shader']['SetMatrix'](new c['Matrix4'](),undefined),b['Shader']['SetGLColor'](0x1,0x1,0x1,0x1),b['RenderWGL']['Util_RenderQuad'](![]),b['Shader']['EndShader'](),b['Shader']['EndFramebuffer']());}}}}}{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['UI']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),bE(),bF(),b['ViewCube']['Render'](),be();if(b['Configuration']['Render']['Pivot']['Visible']&&b['Camera']['RenderPivot']){e['clear'](e['DEPTH_BUFFER_BIT']),e['enable'](e['DEPTH_TEST']);let e8=0xa;{let eb=new c['Matrix4']()['copy'](b['Camera']['matMVP']),ec=new c['Vector3']()['copy'](b['Camera']['pivot']),ed=b['Camera']['world2ScreenWithMatrix'](eb,ec),ee=ed['add'](new c['Vector3'](e8,0x0,0x0));ec=b['Camera']['screen2WorldWithMatrix'](eb,ee),e8=new c['Vector3']()['subVectors'](b['Camera']['pivot'],ec)['length']();}let e9=b['Configuration']['Render']['Pivot']['Color'],ea=e9['glColor']();b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PHONG']),b['Shader']['SetGLDefaultLight'](),b['Shader']['SetClipping'](undefined),b['Shader']['SetMatrix'](b['Camera']['matMVP'],b['Camera']['matMV']),b['Shader']['SetGLColor'](ea['r'],ea['g'],ea['b'],ea['a']),d['Util']['DrawSphere3D'](b['Camera']['pivot'],e8),b['Shader']['EndShader'](),e['disable'](e['DEPTH_TEST']),e['disable'](e['BLEND']);}if(![]){if(bJ&&b['Control']['_sub']===c['Enum']['MOUSE_CONTROL_SUB_TYPE']['ORBIT']){e['clear'](e['DEPTH_BUFFER_BIT']),e['enable'](e['DEPTH_TEST']);let ef=0xa,eg;{let ej=new c['Matrix4']()['copy'](b['Camera']['matMVP']),ek=new c['Vector3']()['copy'](b['Camera']['pivot']),el=b['Camera']['world2ScreenWithMatrix'](ej,ek),em=el['add'](new c['Vector3'](ef,0x0,0x0));ek=b['Camera']['screen2WorldWithMatrix'](ej,em),ef=new c['Vector3']()['subVectors'](b['Camera']['pivot'],ek)['length']();let en=b['Renderer']['GetSizeWidth'](),eo=b['Renderer']['GetSizeHeight'](),ep=el;ep['x']=en*0.5,ep['y']=eo*0.5,eg=b['Camera']['screen2WorldWithMatrix'](ej,ep);}let eh=b['Configuration']['Render']['Pivot']['Color'],ei=eh['glColor']();b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PHONG']),b['Shader']['SetGLDefaultLight'](),b['Shader']['SetClipping'](undefined),b['Shader']['SetMatrix'](b['Camera']['matMVP'],b['Camera']['matMV']),b['Shader']['SetGLColor'](ei['r'],ei['g'],ei['b'],ei['a']),d['Util']['DrawSphere3D'](eg,ef),b['Shader']['EndShader'](),e['disable'](e['DEPTH_TEST']),e['disable'](e['BLEND']);}}b['Shader']['EndFramebuffer']();}{if(![]){b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['SSS']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['RT']);{b['Shader']['SetMVPMatrix'](b['Camera']['matMV'],b['Camera']['viewMatrix'],b['Camera']['projectionMatrixSrc']);let er=new c['Matrix4']()['copy'](b['Camera']['matMV']);b['Shader']['SetMatrix'](new c['Matrix4'](),er),b['Shader']['SetGLCameraData'](),b['Shader']['SetGLLight'](),b['Shader']['SetResolutionData']();let es=b['Shader']['GetPositionTexture']();b['Shader']['SetCurrentTexture']('u_PositionTexture',e['TEXTURE_2D'],es['texture']);let et=b['Shader']['GetNormalTexture']();b['Shader']['SetCurrentTexture']('u_NormalTexture',e['TEXTURE_2D'],et['texture']),b['Shader']['CopyFBColorBuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM'],c['Enum']['FB_RENDER_TYPES']['MAIN']);let eu=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']);b['Shader']['SetCurrentTexture']('u_ColorTexture',e['TEXTURE_2D'],eu['texture']),b['RenderWGL']['Util_RenderQuad'](![]);}b['Shader']['EndShader'](),b['Shader']['EndFramebuffer']();return;}let eq=b['Shader']['GetItemFramebuffer'](c['Enum']['FB_RENDER_TYPES']['MAIN']);{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x1,0x1,0x1,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);{if(eq!==undefined&&eq['msaa'])b['Shader']['EndFramebuffer'](),b['Shader']['CopyFBColorBuffer'](c['Enum']['FB_RENDER_TYPES']['END'],c['Enum']['FB_RENDER_TYPES']['MAIN']),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']);else{if(b['CameraIndex']===0x0)bw(c['Enum']['SHADER_TYPES']['FXAA'],c['Enum']['FB_RENDER_TYPES']['MAIN']);else bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['MAIN']);}}}if(I&&![]){b['Shader']['EndFramebuffer']();const ev=b['Renderer']['GetSizeWidth'](),ew=b['Renderer']['GetSizeHeight']();b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PICK']);let ex=bu(ev/0x2,ew/0x2);b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['SSS']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),e['disable'](e['BLEND']);let ey=b['Camera']['GetCameraPos'](),ez;b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['SSS']);{b['Shader']['SetMVPMatrix'](b['Camera']['matMV'],b['Camera']['viewMatrix'],b['Camera']['projectionMatrixSrc']);let eC=new c['Matrix4']()['copy'](b['Camera']['matMV']);b['Shader']['SetMatrix'](new c['Matrix4'](),eC),b['Shader']['SetGLCameraData'](),b['Shader']['SetGLLight'](),b['Shader']['SetResolutionData']();let eD=b['Shader']['GetPositionTexture']();b['Shader']['SetCurrentTexture']('u_PositionTexture',e['TEXTURE_2D'],eD['texture']);let eE=b['Shader']['GetNormalTexture']();b['Shader']['SetCurrentTexture']('u_NormalTexture',e['TEXTURE_2D'],eE['texture']),b['Shader']['CopyFBColorBuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM'],c['Enum']['FB_RENDER_TYPES']['MAIN']);let eF=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']);b['Shader']['SetCurrentTexture']('u_ColorTexture',e['TEXTURE_2D'],eF['texture']),b['RenderWGL']['Util_RenderQuad'](![]);}b['Shader']['EndShader'](),b['Shader']['EndFramebuffer'](),e['enable'](e['BLEND']),b['Shader']['CopyFBColorBuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM'],c['Enum']['FB_RENDER_TYPES']['END']);let eA=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']),eB=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['SSS']);b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']),bz(c['Enum']['SHADER_TYPES']['TEXTURE2D_SSAO'],eA['texture'],eB['texture'],![]),b['Shader']['EndFramebuffer']();if(![]){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']);{let eG=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['SSS']);if(eG)bv(0x1,c['Enum']['SHADER_TYPES']['TEXTURE2D'],eG['texture'],eG['width'],eG['height'],undefined,0x0);}}}if(J){b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM2']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),e['disable'](e['BLEND']),bA(c['Enum']['SHADER_TYPES']['SSAO'],K),e['enable'](e['BLEND']),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),e['enable'](e['BLEND']);{let eH=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOM2']);b['useWebGL2']?by(c['Enum']['SHADER_TYPES']['BLUR'],eH['texture'],eH['width'],eH['height'],0x1,new c['Vector2'](0x1,0x0),0x1,new c['Color'](0xff,0xff,0xff,0xff),![]):bx(c['Enum']['SHADER_TYPES']['TEXTURE2D'],eH['texture'],eH['width'],eH['height'],new c['Color'](0xff,0xff,0xff,0xff));}b['Shader']['EndFramebuffer']();{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM2']);let eI=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['MAIN']);bx(c['Enum']['SHADER_TYPES']['TEXTURE2D'],eI['texture'],eI['width'],eI['height'],new c['Color'](0xff,0xff,0xff,0xff)),b['Shader']['EndFramebuffer']();let eJ=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOM2']),eK=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']);b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']),e['disable'](e['DEPTH_TEST']),e['enable'](e['BLEND']),bz(c['Enum']['SHADER_TYPES']['TEXTURE2D_SSAO'],eJ['texture'],eK['texture'],![]);}}{bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']),bw(c['Enum']['SHADER_TYPES']['FXAA'],c['Enum']['FB_RENDER_TYPES']['MODELAFTER']);}if(![]){if(a5&&b['useWebGL2']){if(a8||af)bw(c['Enum']['SHADER_TYPES']['FXAA'],c['Enum']['FB_RENDER_TYPES']['CUSTOMAFTEREFFECT']);else bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['CUSTOMAFTEREFFECT']);}}if(p&&v){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);{let eL=b['Shader']['GetColorIDTexture'](0x0);if(eL)bx(c['Enum']['SHADER_TYPES']['EDGE'],eL['texture'],eL['width'],eL['height'],new c['Color'](0xff,0xff,0xff,0xff));}b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']);{let eM=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']);if(eM)bv(0x0,c['Enum']['SHADER_TYPES']['TEXTURE2D'],eM['texture'],eM['width'],eM['height'],new c['Color'](0xff,0xff,0xff,0xff));}}if(q&&v){{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['EDGE']);{let eN=b['Shader']['GetColorIDTexture'](0x1);if(eN)bx(c['Enum']['SHADER_TYPES']['EDGE'],eN['texture'],eN['width'],eN['height'],new c['Color'](0xff,0xff,0xff,0xff));}b['Shader']['EndShader'](),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']);{let eO=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']);if(eO)bv(0x1,c['Enum']['SHADER_TYPES']['TEXTURE2D'],eO['texture'],eO['width'],eO['height'],new c['Color'](0xff,0xff,0xff,0xff));}}e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);}if(x&&v){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);{let eP=b['Shader']['GetColorIDTexture'](0x3);if(eP)bx(c['Enum']['SHADER_TYPES']['EDGE'],eP['texture'],eP['width'],eP['height'],new c['Color'](0xff,0xff,0xff,0xff));}b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']);{let eQ=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']);if(eQ)bv(0x0,c['Enum']['SHADER_TYPES']['TEXTURE2D'],eQ['texture'],eQ['width'],eQ['height'],new c['Color'](0xff,0xff,0xff,0xff));}}if(r&&w){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);{let eR=b['Shader']['GetColorIDTexture'](0x4);if(eR)bx(c['Enum']['SHADER_TYPES']['EDGE'],eR['texture'],eR['width'],eR['height'],new c['Color'](0xff,0xff,0xff,0xff));}b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']);{let eS=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']);if(eS)bv(0x0,c['Enum']['SHADER_TYPES']['TEXTURE2D'],eS['texture'],eS['width'],eS['height'],new c['Color'](0xff,0xff,0xff,0xff));}{let eT=b['Shader']['GetColorIDTexture'](0x4);if(eT)bv(0x1,c['Enum']['SHADER_TYPES']['TEXTURE2D'],eT['texture'],eT['width'],eT['height'],new c['Color'](0xff,0xff,0xff,0xff));}}if(z&&C){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);{let eU=b['Shader']['GetColorIDTexture'](0x2);if(eU)bx(c['Enum']['SHADER_TYPES']['EDGE'],eU['texture'],eU['width'],eU['height'],new c['Color'](0xff,0xff,0xff,0xff));}b['Shader']['EndShader'](),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']);{let eV=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']);if(eV)bv(0x0,c['Enum']['SHADER_TYPES']['TEXTURE2D'],eV['texture'],eV['width'],eV['height'],new c['Color'](0xff,0xff,0xff,0xff),undefined,0x0);}e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);}if(J&&M){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']),e['clearColor'](0x0,0x0,0x0,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),bA(c['Enum']['SHADER_TYPES']['SSAO'],K),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']);{let eW=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']);bv(0x0,c['Enum']['SHADER_TYPES']['TEXTURE2D'],eW['texture'],eW['width'],eW['height'],new c['Color'](0xff,0xff,0xff,0xff));}{let eX=b['Shader']['GetNormalTexture']();bv(0x1,c['Enum']['SHADER_TYPES']['TEXTURE2D'],eX['texture'],eX['width'],eX['height'],undefined,0x0);}{let eY=b['Shader']['GetPositionTexture']();bv(0x2,c['Enum']['SHADER_TYPES']['TEXTURE2D'],eY['texture'],eY['width'],eY['height'],undefined,0x0);}}if(S){{let eZ=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['PRESELECT']);bv(0x0,c['Enum']['SHADER_TYPES']['TEXTURE2D'],eZ['texture'],eZ['width'],eZ['height'],new c['Color'](0xff,0xff,0xff,0xff));}{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']),e['clearColor'](0x1,0x1,0x1,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Pick']['RenderPreselectEdge'](),b['Shader']['EndFramebuffer'](),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']);let f0=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']);bv(0x1,c['Enum']['SHADER_TYPES']['TEXTURE2D'],f0['texture'],f0['width'],f0['height'],new c['Color'](0xff,0xff,0xff,0xff));}}if(R){let f1=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['PICK']);bv(0x0,c['Enum']['SHADER_TYPES']['TEXTURE2D'],f1['texture'],f1['width'],f1['height'],undefined,new c['Color'](0xff,0xff,0xff,0xff));}if(![]){let f2=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['COLOROBJECT']);bv(0x0,c['Enum']['SHADER_TYPES']['TEXTURE2D'],f2['texture'],f2['width'],f2['height'],undefined,0x0);}if(N&&P&&b['useWebGL2']){let f3=b['Shader']['GetPositionTexture'](0xa);if(f3)bv(0x0,c['Enum']['SHADER_TYPES']['TEXTURE2D'],f3['texture'],f3['width'],f3['height'],undefined,0x0);}if(Q&&P&&b['useWebGL2']){{let f4=b['Shader']['GetPositionTexture'](0xa);if(f4)bv(0x0,c['Enum']['SHADER_TYPES']['TEXTURE2D'],f4['texture'],f4['width'],f4['height'],undefined,0x0);}{let f5=b['Shader']['GetPositionTexture'](0xb);if(f5)bv(0x1,c['Enum']['SHADER_TYPES']['TEXTURE2D'],f5['texture'],f5['width'],f5['height'],undefined,0x0);}{let f6=b['Shader']['GetPositionTexture'](0xc);if(f6)bv(0x2,c['Enum']['SHADER_TYPES']['TEXTURE2D'],f6['texture'],f6['width'],f6['height'],undefined,0x0);}}a5&&a6&&b['useWebGL2']&&(b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['TEXTURE2D']),b['Shader']['SetGLPerlinNoiseDebug'](),bv(0x0,c['Enum']['SHADER_TYPES']['TEXTURE2D'],undefined,0x400,0x400,undefined,0x0));{}e['disable'](e['DEPTH_TEST']),bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['UI']),e['disable'](e['BLEND']);{b['Shader']['EndFramebuffer'](),bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['END']);}}bC();if(bI['ViewEntityInfo']['ShowReview'])b7();if(b['Control']['GetMode']()===c['Enum']['CONTROL_STATE']['MARKUP']&&b['Pick']['EnableControlPicker']){const f7=b['Shader']['GetFrameBufferTexture'](c['Enum']['FB_RENDER_TYPES']['CANVASGL']);if(f7!==undefined){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CANVASGL']),b['Shader']['BindTargetTexture']();const f8=new Uint8Array(f7['width']*f7['height']*0x4);b['gl']['readPixels'](0x0,0x0,f7['width'],f7['height'],e['RGBA'],e['UNSIGNED_BYTE'],f8);const f9=document['createElement']('canvas');f9['width']=f7['width'],f9['height']=f7['height'];const fa=f9['getContext']('2d');let fc=fa['createImageData'](f9['width'],f9['height']);fc['data']['set'](f8),fa['putImageData'](fc,0x0,0x0);const fd=document['createElement']('canvas');fd['width']=f7['width'],fd['height']=f7['height'];const fe=fd['getContext']('2d');fe['translate'](0x0,fd['height']),fe['scale'](0x1,-0x1),fe['drawImage'](f9,0x0,0x0,f9['width'],f9['height']),f['drawImage'](fd,0x0,0x0,fd['width'],fd['height']),f9['remove'](),fd['remove'](),b['Shader']['EndFramebuffer']();}}d['enableDrawCall']&&bc();d['enableTimePanel']&&bd();b['Configuration']['Render']['Debug']['Enable']&&bc(!![]);if(b['Interface']['Watermark']!==undefined)b['Interface']['Watermark']['Render']();}function bi(){b['Shader']['CreateShaderData']();let bH=h['glColor']();b['MultiView'][b['CameraIndex']]['UseDefaultViewColor']===![]&&(bH=b['MultiView'][b['CameraIndex']]['MultiViewBGColor']['glColor']());e['clearColor'](bH['r'],bH['g'],bH['b'],bH['a']),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b1(),b2();let bI=b['Data']['ObjectsUpdateLength'];const bJ=d['mainFramebufferClear'];for(let bK=0x0;bK<bI;bK++){b['Data']['Objects'][bK]['attribs']['a_index']['buffer']!==null&&(b['Data']['Objects'][bK]['flag']['renderEnable']=!![]);}{if(b['useWebGL2']===![])b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PHONG']);else b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PBR']);b['Shader']['SetGLLight'](!![]),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);const bL=new c['Matrix4']();bL['copy'](b['Camera']['cameraMatrix']);const bM=new c['Matrix4']()['multiplyMatrices'](b['Camera']['projectionMatrix'],bL);b['Shader']['SetMatrix'](bM,bL),b['Shader']['SetClipping'](bL);if(!F){e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']);for(let bN=0x0;bN<bI;bN++){b['RenderWGL']['UpdateRenderProcessByObject_v2'](b['Data']['Objects'][bN],![]);}e['enable'](e['DEPTH_TEST']),e['depthMask'](!![]),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']);for(let bO=0x0;bO<bI;bO++){b['RenderWGL']['UpdateRenderProcessByObject_v2'](b['Data']['Objects'][bO],!![]);}}b['Shader']['EndShader']();}}function bj(){let bH=h['glColor']();b['MultiView'][b['CameraIndex']]['UseDefaultViewColor']===![]&&(bgGLColor=b['MultiView'][b['CameraIndex']]['MultiViewBGColor']['glColor']()),e['clearColor'](bH['r'],bH['g'],bH['b'],bH['a']),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['END']),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),e['disable'](e['DEPTH_TEST']),b2(),b['Shader']['EndFramebuffer'](),bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['END']);}function bk(){let bH=h['glColor']();b['MultiView'][b['CameraIndex']]['UseDefaultViewColor']===![]&&(bgGLColor=b['MultiView'][b['CameraIndex']]['MultiViewBGColor']['glColor']()),e['clearColor'](bH['r'],bH['g'],bH['b'],bH['a']),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],c['Enum']['FB_RENDER_TYPES']['END']);}function bl(bH){g['occlusionCullingCount']=0x0;if(d['enableOcclusion']===![])return;if(b['useWebGL2']===![]){for(let bK=0x0;bK<bH;bK++){let bL=b['RenderWGL']['InitRenderPipeline'](b['Data']['Objects'][bK]);bL['renderEnableOcclusion']=!![];}return;}let bI=![];e['colorMask'](![],![],![],![]),e['depthMask'](![]),e['enable'](e['DEPTH_TEST']);let bJ=new c['Color'](0xff,0xff,0xff,0xff);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']);for(let bM=0x0;bM<bH;bM++){if(d['occlusionProcessMax']>0x0){if(d['occlusionProcessCount']>d['occlusionProcessMax']){bI=!![];break;}}b['RenderWGL']['UpdateRenderProcessByObjectOcclusion_v2'](b['Data']['Objects'][bM],bJ);}b['Shader']['EndShader'](),e['colorMask'](!![],!![],!![],!![]),e['depthMask'](!![]),e['disable'](e['DEPTH_TEST']);}function bm(bH,bI){if(bI<=0x0)return;if(b['useWebGL2']){if(aY){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PICK']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));if(aX){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['VPICK']),b['Shader']['SetClipping'](b['Camera']['matMV']),b['Shader']['SetMatrix'](b['Camera']['matMVP'],b['Camera']['matMV']),b['Shader']['SetGLMaterial'](-0x1);if(b['Camera']['CameraIndex']===0x3)b['Shader']['SetGLIsolate'](0x0);else b['Shader']['SetGLIsolate'](0x1);if(b['Configuration']['Model']['Selection']['Kind']===c['Enum']['SelectionObject3DTypes']['ALL'])b['Shader']['SetGLSelectMode'](0x0);else{if(b['Configuration']['Model']['Selection']['Kind']===c['Enum']['SelectionObject3DTypes']['OPAQUE_OBJECT3D'])b['Shader']['SetGLSelectMode'](0x2);else{if(b['Configuration']['Model']['Selection']['Kind']===c['Enum']['SelectionObject3DTypes']['CUSTOMCOLOR_OBJECT3D'])b['Shader']['SetGLSelectMode'](0x3);}}let bJ=e['getUniformLocation'](b['Shader']['currentProgram'],'uColorMapSize');bJ&&e['uniform1f'](bJ,b['ColorMap']['GetColorMapWidth']());for(let bK=0x0;bK<bI;bK++){b['RenderWGL']['UpdateRenderProcessByPickObject_v3'](b['Data']['Objects'][bK]);}b['Shader']['EndShader'](),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']),b['Shader']['SetClipping'](b['Camera']['matMV']);for(let bL=0x0;bL<bI;bL++){b['RenderWGL']['UpdateRenderProcessByPickObject_v3_t'](b['Data']['Objects'][bL]);}b['Shader']['EndShader']();}else{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']),b['Shader']['SetClipping'](b['Camera']['matMV']),b['Shader']['SetGLCameraData']();for(let bM=0x0;bM<bI;bM++){b['RenderWGL']['UpdateRenderProcessByPickObject_v2'](b['Data']['Objects'][bM]);}b['Shader']['EndShader']();}{b['CustomObject']['PickRender'](c['Enum']['SHADER_TYPES']['PICKING']);}b['Shader']['EndFramebuffer']();}{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PRESELECT']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);{b['Pick']['RenderPreselectEdgeColor']();}b['Shader']['EndFramebuffer']();}{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['SELECTED']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));if(aX){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['VPICK']),b['Shader']['SetClipping'](b['Camera']['matMV']),b['Shader']['SetGLCameraData'](),b['Shader']['SetMatrix'](b['Camera']['matMVP'],b['Camera']['matMV']),b['Shader']['SetGLMaterial'](-0x1);if(b['Camera']['CameraIndex']===0x3)b['Shader']['SetGLIsolate'](0x0);else b['Shader']['SetGLIsolate'](0x1);b['Shader']['SetGLSelectMode'](0x1);let bN=e['getUniformLocation'](b['Shader']['currentProgram'],'uColorMapSize');bN&&e['uniform1f'](bN,b['ColorMap']['GetColorMapWidth']());for(let bO=0x0;bO<bI;bO++){b['RenderWGL']['UpdateRenderProcessBySelectPickObject_v3'](b['Data']['Objects'][bO]);}b['Shader']['EndShader'](),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']),b['Shader']['SetClipping'](b['Camera']['matMV']),b['Shader']['SetGLCameraData']();for(let bP=0x0;bP<bI;bP++){b['RenderWGL']['UpdateRenderProcessBySelectPickObject_v3_t'](b['Data']['Objects'][bP]);}b['Shader']['EndShader']();}else{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']),b['Shader']['SetClipping'](b['Camera']['matMV']),b['Shader']['SetGLCameraData']();for(let bQ=0x0;bQ<bI;bQ++){b['RenderWGL']['UpdateRenderProcessBySelectPickObject_v2'](b['Data']['Objects'][bQ]);}b['Shader']['EndShader']();}b['Shader']['EndShader']();{b['CustomObject']['SelectedRender'](c['Enum']['SHADER_TYPES']['PICKING']);}}if(!![]){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PREPROCESSING']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{if(aX){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PREPROCESSING']),b['Shader']['SetGLCameraData'](),b['Shader']['SetMatrix'](b['Camera']['matMVP'],b['Camera']['matMV']),b['Shader']['SetMVPMatrix'](b['Camera']['matMV'],b['Camera']['viewMatrix'],b['Camera']['projectionMatrixSrc']),b['Shader']['SetGLMaterial'](-0x1),b['Shader']['SetClipping'](b['Camera']['matMV']);for(let bR=0x0;bR<bI;bR++){b['RenderWGL']['UpdateRenderProcessByColorID_v3'](b['Data']['Objects'][bR]);}for(let bS=0x0;bS<bI;bS++){b['RenderWGL']['UpdateRenderProcessByColorID_v3_t'](b['Data']['Objects'][bS]);}b['Shader']['EndShader']();}else{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PREPROCESSING']),b['Shader']['SetGLCameraData']();for(let bT=0x0;bT<bI;bT++){b['RenderWGL']['UpdateRenderProcessByColorID_v2'](b['Data']['Objects'][bT]);}b['Shader']['EndShader']();}}{b['CustomObject']['ColorIDRender'](c['Enum']['SHADER_TYPES']['PREPROCESSING']);}b['Shader']['EndFramebuffer']();}{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['COLOROBJECT']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{if(aX){b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['VPICK']),b['Shader']['SetClipping'](b['Camera']['matMV']),b['Shader']['SetGLCameraData'](),b['Shader']['SetMatrix'](b['Camera']['matMVP'],b['Camera']['matMV']),b['Shader']['SetGLMaterial'](-0x1);if(b['Camera']['CameraIndex']===0x3)b['Shader']['SetGLIsolate'](0x0);else b['Shader']['SetGLIsolate'](0x1);b['Shader']['SetGLSelectMode'](0x0);let bU=e['getUniformLocation'](b['Shader']['currentProgram'],'uColorMapSize');bU&&e['uniform1f'](bU,b['ColorMap']['GetColorMapWidth']());for(let bV=0x0;bV<bI;bV++){b['RenderWGL']['UpdateRenderProcessByColorID_v3'](b['Data']['Objects'][bV]);}b['Shader']['EndShader'](),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']),b['Shader']['SetClipping'](b['Camera']['matMV']);for(let bW=0x0;bW<bI;bW++){b['RenderWGL']['UpdateRenderProcessByColorID_v3_t'](b['Data']['Objects'][bW]);}b['Shader']['EndShader']();}else{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']),b['Shader']['SetClipping'](b['Camera']['matMV']);for(let bX=0x0;bX<bI;bX++){b['RenderWGL']['UpdateRenderProcessByColorID_v2'](b['Data']['Objects'][bX]);}b['Shader']['EndShader']();}}{let bY=new c['Color'](0x0,0x0,0x0,0xff);b['CustomObject']['OneColorRender'](c['Enum']['SHADER_TYPES']['BASIC2D'],bY);}{let bZ=new c['Color'](0x0,0x0,0x0,0xff);b['Avatar']['OneColorRender'](c['Enum']['SHADER_TYPES']['ANIMATIONBASIC2D'],bZ);}b['Shader']['EndFramebuffer']();}{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['COLORCUSTOMOBJECT']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{let c0=new c['Color'](0x0,0x0,0x0,0xff);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),b['Shader']['SetGLCameraData']();for(let c1=0x0;c1<bI;c1++){b['RenderWGL']['UpdateRenderProcessByObjectOneColor_v3'](b['Data']['Objects'][c1],c0);}b['Shader']['EndShader']();}{b['CustomObject']['ColorIDRender'](c['Enum']['SHADER_TYPES']['PICKING']);}{let c2=new c['Color'](0x0,0x0,0x0,0xff);b['Avatar']['OneColorRender'](c['Enum']['SHADER_TYPES']['ANIMATIONBASIC2D'],c2);}b['Shader']['EndFramebuffer']();}if(x){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM_EDGE']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']),b['Shader']['SetClipping'](b['Camera']['matMV']);for(let c3=0x0;c3<bI;c3++){b['RenderWGL']['UpdateRenderProcessByCustomEdgeColorID_v2'](b['Data']['Objects'][c3]);}b['Shader']['EndShader']();}{}b['Shader']['EndFramebuffer']();}if(F&&G){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PREPROCESSING_DISABLE_DEPTH']),e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PREPROCESSING']),b['Shader']['SetGLCameraData']();for(let c4=0x0;c4<bI;c4++){b['RenderWGL']['UpdateRenderProcessByColorID_v2'](b['Data']['Objects'][c4]);}b['Shader']['EndShader']();}{b['CustomObject']['ColorIDRender'](c['Enum']['SHADER_TYPES']['PREPROCESSING']);}b['Shader']['EndFramebuffer']();}if(N){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{let c5=b['Camera']['GetCameraData']();if(![]){let c6=![];if(b['Shader']['ViewLightAsRotate'])c6=!![];let c7=new c['Vector3'](),c8=b['Data']['GetBBox'](),c9=new c['Vector3']()['copy'](c8['center']),ca=new c['Matrix4']()['copy'](b['Camera']['matMV']);ca['setPosition'](new c['Vector3']());let cb=new c['Vector3']()['copy'](c9)['applyMatrix4'](new c['Matrix4']()['copy'](b['Camera']['matMV'])),cc=new c['Vector3']()['copy'](b['Shader']['GetLightDirection']()),cd,ce,cf;cf=new c['Vector3']()['copy'](cc);!c6&&(cf=cf['applyMatrix4'](ca));ce=new c['Vector3'](0x0,0x1,0x0);!c6&&(ce=ce['applyMatrix4'](ca));cd=new c['Vector3']()['crossVectors'](ce,cf),cd['normalize'](),ce=new c['Vector3']()['crossVectors'](cf,cd),ce['normalize'](),c7=new c['Vector3']()['copy'](cb);let cg=new c['Matrix4']()['lookAt'](c7,new c['Vector3']()['addVectors'](c7,cf),ce),ch=new c['Matrix4']()['getInverse'](cg);b['Camera']['matShadowMV']=new c['Matrix4']()['multiplyMatrices'](ch,new c['Matrix4']()['copy'](b['Camera']['matMV']));{let ci=0.7,cj=c8['radius']*ci,ck=c8['radius']*ci,cl=-cj/0x2,cm=cj/0x2,cn=-ck/0x2,co=ck/0x2,cp=c8['radius']*-ci,cq=c8['radius']*ci,cr=new c['Matrix4']()['orthographic'](cl,cm,cn,co,cp,cq);b['Camera']['matShadowProjection']=new c['Matrix4'](),b['Camera']['matShadowProjection']['elements']=cr;}}if(![]){let cs=![];if(b['Shader']['ViewLightAsRotate'])cs=!![];let ct=new c['Vector3'](),cu=b['Data']['GetBBox'](),cv=new c['Vector3']()['copy'](cu['center']),cw=new c['Matrix4']()['copy'](b['Camera']['matMV']);cw['setPosition'](new c['Vector3']());let cx=new c['Vector3']()['copy'](cv)['applyMatrix4'](new c['Matrix4']()['copy'](b['Camera']['matMV'])),cy=new c['Vector3']()['copy'](b['Shader']['GetLightDirection']()),cz,cA,cB;cB=new c['Vector3']()['copy'](cy);!cs&&(cB=cB['applyMatrix4'](cw));cA=new c['Vector3'](0x0,0x1,0x0);!cs&&(cA=cA['applyMatrix4'](cw));cz=new c['Vector3']()['crossVectors'](cA,cB),cz['normalize'](),cA=new c['Vector3']()['crossVectors'](cB,cz),cA['normalize'](),ct=new c['Vector3']()['copy'](cx);let cC=new c['Matrix4']()['lookAt'](ct,new c['Vector3']()['addVectors'](ct,cB),cA),cD=new c['Matrix4']()['getInverse'](cC);b['Camera']['matShadowMV']=new c['Matrix4']()['multiplyMatrices'](cD,new c['Matrix4']()['copy'](b['Camera']['matMV']));{let cE=2.2,cF=cu['radius']*cE,cG=cu['radius']*cE,cH=-cF/0x2,cI=cF/0x2,cJ=-cG/0x2,cK=cG/0x2,cL=cu['radius']*-cE,cM=cu['radius']*cE,cN=new c['Matrix4']()['orthographic'](cH,cI,cJ,cK,cL,cM);b['Camera']['matShadowProjection']=new c['Matrix4'](),b['Camera']['matShadowProjection']['elements']=cN;}}if(!Q||!b['Camera']['perspectiveView']){let cO=![];if(b['Shader']['ViewLightAsRotate'])cO=!![];let cP=new c['Vector3'](),cQ=b['Data']['GetBBox'](),cR=new c['Vector3']()['copy'](cQ['center']),cS=new c['Matrix4']()['copy'](b['Camera']['matMV']);cS['setPosition'](new c['Vector3']());if(b['DemoType']===0x7){cR=new c['Vector3'](0x8bd,0x18f1c,-0x320);let d0=0x249f0;cQ['min']['set'](cR['x']-d0,cR['y']-d0,cR['z']-0x249f0),cQ['max']['set'](cR['x']+d0,cR['y']+d0,cR['z']+0x249f0),cQ['update'](),cR['copy'](cQ['center']);}let cT=new c['Vector3']()['copy'](cR)['applyMatrix4'](new c['Matrix4']()['copy'](b['Camera']['matMV'])),cU=new c['Vector3']()['copy'](b['Shader']['GetLightDirection']()),cV,cW,cX;cX=new c['Vector3']()['copy'](cU);cO&&(cX=cX['applyMatrix4'](cS));cW=new c['Vector3'](0x0,0x1,0x0);cO&&(cW=cW['applyMatrix4'](cS));cV=new c['Vector3']()['crossVectors'](cW,cX),cV['normalize'](),cW=new c['Vector3']()['crossVectors'](cX,cV),cW['normalize'](),cP=new c['Vector3']()['copy'](cT);let cY=new c['Matrix4']()['lookAt'](cP,new c['Vector3']()['addVectors'](cP,cX),cW),cZ=new c['Matrix4']()['getInverse'](cY);b['Camera']['matShadowMV']=new c['Matrix4']()['multiplyMatrices'](cZ,new c['Matrix4']()['copy'](b['Camera']['matMV']));if(!![]){let d1=new c['BBox']();{let d9=[new c['Vector3'](cQ['min']['x'],cQ['min']['y'],cQ['min']['z']),new c['Vector3'](cQ['min']['x'],cQ['min']['y'],cQ['max']['z']),new c['Vector3'](cQ['min']['x'],cQ['max']['y'],cQ['min']['z']),new c['Vector3'](cQ['min']['x'],cQ['max']['y'],cQ['max']['z']),new c['Vector3'](cQ['max']['x'],cQ['min']['y'],cQ['min']['z']),new c['Vector3'](cQ['max']['x'],cQ['min']['y'],cQ['max']['z']),new c['Vector3'](cQ['max']['x'],cQ['max']['y'],cQ['min']['z']),new c['Vector3'](cQ['max']['x'],cQ['max']['y'],cQ['max']['z'])];for(let da=0x0;da<0x8;++da){d9[da]['applyMatrix4'](b['Camera']['matShadowMV']),da==0x0?(d1['min']['copy'](d9[da]),d1['max']['copy'](d9[da])):(d1['min']['min'](d9[da]),d1['max']['max'](d9[da]));}d1['update']();}let d2=d1['min']['x']-d1['center']['x'],d3=d1['max']['x']-d1['center']['x'],d4=d1['min']['y']-d1['center']['y'],d5=d1['max']['y']-d1['center']['y'],d6=d1['min']['z']-d1['center']['z'],d7=d1['max']['z']-d1['center']['z'],d8=new c['Matrix4']()['orthographic'](d2,d3,d4,d5,d6,d7);b['Camera']['matShadowProjection']=new c['Matrix4'](),b['Camera']['matShadowProjection']['elements']=d8;}if(![]){let db=new c['BBox']();{let dk=[new c['Vector3'](-0x1,-0x1,0x0),new c['Vector3'](0x1,-0x1,0x0),new c['Vector3'](-0x1,0x1,0x0),new c['Vector3'](0x1,0x1,0x0),new c['Vector3'](-0x1,-0x1,0x1),new c['Vector3'](0x1,-0x1,0x1),new c['Vector3'](-0x1,0x1,0x1),new c['Vector3'](0x1,0x1,0x1)],dl=new c['Matrix4']()['getInverse'](b['Camera']['matMVP']);for(let dm=0x0;dm<0x8;++dm){dk[dm]['applyMatrix4'](dl),dm==0x0?(db['min']['copy'](dk[dm]),db['max']['copy'](dk[dm])):(db['min']['min'](dk[dm]),db['max']['max'](dk[dm]));}db['update']();}let dc=new c['BBox']();{let dn=[new c['Vector3'](db['min']['x'],db['min']['y'],db['min']['z']),new c['Vector3'](db['min']['x'],db['min']['y'],db['max']['z']),new c['Vector3'](db['min']['x'],db['max']['y'],db['min']['z']),new c['Vector3'](db['min']['x'],db['max']['y'],db['max']['z']),new c['Vector3'](db['max']['x'],db['min']['y'],db['min']['z']),new c['Vector3'](db['max']['x'],db['min']['y'],db['max']['z']),new c['Vector3'](db['max']['x'],db['max']['y'],db['min']['z']),new c['Vector3'](db['max']['x'],db['max']['y'],db['max']['z'])];for(let dp=0x0;dp<0x8;++dp){dn[dp]['applyMatrix4'](cY),dp==0x0?(dc['min']['copy'](dn[dp]),dc['max']['copy'](dn[dp])):(dc['min']['min'](dn[dp]),dc['max']['max'](dn[dp]));}dc['update']();}let dd=dc['min']['x']-dc['center']['x'],de=dc['max']['x']-dc['center']['x'],df=dc['min']['y']-dc['center']['y'],dg=dc['max']['y']-dc['center']['y'],dh=dc['min']['z']-dc['center']['z'],di=dc['max']['z']-dc['center']['z'],dj=new c['Matrix4']()['orthographic'](dd,de,df,dg,dh,di);b['Camera']['matShadowProjection']=new c['Matrix4'](),b['Camera']['matShadowProjection']['elements']=dj;}}if(Q&&b['Camera']['perspectiveView']){let dq=![],dr=![],ds=![],dt=![],du=![];const dv=b['Camera']['clientWidth']/b['Camera']['clientHeight'];if(b['Camera']['far']<0x4e20){Q=![],b['Shader']['UpdateShader'](),b['MeshBlock']['Reset'](),b['Renderer']['Render']();return;}else{if(b['Camera']['far']<0xc350){const dw=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0x1,0x4e20);let dx=bn(dw);const dy=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0x4e20,b['Camera']['far']);let dz=bn(dy);b['Camera']['matShadowMV1']=dx[0x0],b['Camera']['matShadowProjection1']=dx[0x1],b['Camera']['matShadowMV2']=dz[0x0],b['Camera']['matShadowProjection2']=dz[0x1],dq=!![],dr=!![],ds=![],dt=![],du=![];}else{if(b['Camera']['far']<0x30d40){const dA=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0x1,0x4e20);let dB=bn(dA);const dC=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0x4e20,0xc350);let dD=bn(dC);const dE=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0xc350,b['Camera']['far']);let dF=bn(dE);b['Camera']['matShadowMV1']=dB[0x0],b['Camera']['matShadowProjection1']=dB[0x1],b['Camera']['matShadowMV2']=dD[0x0],b['Camera']['matShadowProjection2']=dD[0x1],b['Camera']['matShadowMV3']=dF[0x0],b['Camera']['matShadowProjection3']=dF[0x1],dq=!![],dr=!![],ds=!![],dt=![],du=![];}else{if(b['Camera']['far']<0xf4240){const dG=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0x1,0x4e20);let dH=bn(dG);const dI=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0x4e20,0xc350);let dJ=bn(dI);const dK=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0xc350,0x30d40);let dL=bn(dK);const dM=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0x30d40,b['Camera']['far']);let dN=bn(dM);b['Camera']['matShadowMV1']=dH[0x0],b['Camera']['matShadowProjection1']=dH[0x1],b['Camera']['matShadowMV2']=dJ[0x0],b['Camera']['matShadowProjection2']=dJ[0x1],b['Camera']['matShadowMV3']=dL[0x0],b['Camera']['matShadowProjection3']=dL[0x1],b['Camera']['matShadowMV4']=dN[0x0],b['Camera']['matShadowProjection4']=dN[0x1],dq=!![],dr=!![],ds=!![],dt=!![],du=![];}else{dq=!![],dr=!![],ds=!![],dt=!![],du=!![];let dO=b['Camera']['far']*1.5;const dP=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0x1,0x4e20);let dQ=bn(dP);const dR=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0x4e20,0xc350);let dS=bn(dR);const dT=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0xc350,0x30d40);let dU=bn(dT);const dV=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0x30d40,0xf4240);let dW=bn(dV);const dX=new c['Matrix4']()['perspective'](b['Util']['DegToRad'](b['Camera']['fieldOfView']),dv,0xf4240,b['Camera']['far']);let dY=bn(dX);b['Camera']['matShadowMV1']=dQ[0x0],b['Camera']['matShadowProjection1']=dQ[0x1],b['Camera']['matShadowMV2']=dS[0x0],b['Camera']['matShadowProjection2']=dS[0x1],b['Camera']['matShadowMV3']=dU[0x0],b['Camera']['matShadowProjection3']=dU[0x1],b['Camera']['matShadowMV4']=dW[0x0],b['Camera']['matShadowProjection4']=dW[0x1],b['Camera']['matShadowMV5']=dY[0x0],b['Camera']['matShadowProjection5']=dY[0x1];}}}}if(Q){e['enable'](e['CULL_FACE']),e['cullFace'](e['BACK']);let dZ=d['enableOcclusion'];d['enableOcclusion']=![],b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PREPROCESSINGSHADOW']),b['Shader']['SetGLCameraData'](),b['Shader']['SetGLMaterial'](-0x1);{let e0=new c['Matrix4']()['copy'](b['Camera']['matShadowMV1']);const e1=new c['Matrix4']()['copy'](e0),e2=new c['Matrix4']()['multiplyMatrices'](b['Camera']['matShadowProjection1'],e0);b['Shader']['SetMatrix'](e2,e1);for(let e3=0x0;e3<bI;e3++){b['RenderWGL']['UpdateRenderProcessByColorIDByMatrix_v3'](b['Data']['Objects'][e3]);}b['Shader']['EndFramebuffer']();}if(dr){let e4=new c['Matrix4']()['copy'](b['Camera']['matShadowMV2']);b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW2']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));const e5=new c['Matrix4']()['copy'](e4),e6=new c['Matrix4']()['multiplyMatrices'](b['Camera']['matShadowProjection2'],e4);b['Shader']['SetMatrix'](e6,e5);for(let e7=0x0;e7<bI;e7++){b['RenderWGL']['UpdateRenderProcessByColorIDByMatrix_v3'](b['Data']['Objects'][e7]);}b['Shader']['EndFramebuffer']();}if(ds){let e8=new c['Matrix4']()['copy'](b['Camera']['matShadowMV3']);b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW3']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));const e9=new c['Matrix4']()['copy'](e8),ea=new c['Matrix4']()['multiplyMatrices'](b['Camera']['matShadowProjection3'],e8);b['Shader']['SetMatrix'](ea,e9);for(let eb=0x0;eb<bI;eb++){b['RenderWGL']['UpdateRenderProcessByColorIDByMatrix_v3'](b['Data']['Objects'][eb]);}b['Shader']['EndFramebuffer']();}if(dt){let ec=new c['Matrix4']()['copy'](b['Camera']['matShadowMV4']);b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW4']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));const ed=new c['Matrix4']()['copy'](ec),ee=new c['Matrix4']()['multiplyMatrices'](b['Camera']['matShadowProjection4'],ec);b['Shader']['SetMatrix'](ee,ed);for(let ef=0x0;ef<bI;ef++){b['RenderWGL']['UpdateRenderProcessByColorIDByMatrix_v3'](b['Data']['Objects'][ef]);}b['Shader']['EndFramebuffer']();}if(du){let eg=new c['Matrix4']()['copy'](b['Camera']['matShadowMV5']);b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW5']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));const eh=new c['Matrix4']()['copy'](eg),ei=new c['Matrix4']()['multiplyMatrices'](b['Camera']['matShadowProjection5'],eg);b['Shader']['SetMatrix'](ei,eh);for(let ej=0x0;ej<bI;ej++){b['RenderWGL']['UpdateRenderProcessByColorIDByMatrix_v3'](b['Data']['Objects'][ej]);}b['Shader']['EndFramebuffer']();}b['Shader']['EndShader'](),e['disable'](e['CULL_FACE']),d['enableOcclusion']=dZ;}}b['Camera']['CameraUpdateWithCameraData'](c5);}if(b['Camera']['matShadowMV']!==undefined){let ek=new c['Matrix4']()['copy'](b['Camera']['matShadowMV']),el=new c['Matrix4']()['multiplyMatrices'](b['Camera']['matShadowProjection'],ek),em=d['enableOcclusion'];d['enableOcclusion']=![],b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PREPROCESSINGSHADOW']),b['Shader']['SetGLCameraData'](),b['Shader']['SetClipping'](ek);for(let en=0x0;en<bI;en++){b['RenderWGL']['UpdateRenderProcessByColorIDByMatrix_v2'](b['Data']['Objects'][en],b['Camera']['matShadowProjection'],ek);}b['Shader']['EndShader'](),d['enableOcclusion']=em;{}if(am){let eo=new c['Matrix4']()['copy'](b['Camera']['matMV']),ep=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Camera']['matMV']['copy'](ek),b['Camera']['matMVP']['copy'](el),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PREPROCESSINGSHADOW']),b['Shader']['SetGLCameraData'](),b['Shader']['SetClipping'](undefined);let eq=ao;if(eq===undefined)eq=b['Data']['GetBBox']();let er=an,es=aq,et=ar;if(eq['radius']>0x0){let eu=new c['Vector3'](0x1,0x0,0x0),ev=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['SetMatrix'](ev,undefined);let ew=b['Shader']['SetGLAlphaCloud']();eq['max']['z']+=es*0.75+eq['max']['z'],eq['min']['x']-=es/0x2,eq['max']['x']+=es/0x2;if(ew){let ex=b['gl']['getUniformLocation'](b['Shader']['currentProgram'],'useTexture');b['gl']['uniform1i'](ex,0x1);let ey=b['gl']['getUniformLocation'](b['Shader']['currentProgram'],'uTiling'),ez=b['gl']['getUniformLocation'](b['Shader']['currentProgram'],'uOffset');if(ey!==null)b['gl']['uniform2f'](ey,0x1,0x1);if(ez!==null)b['gl']['uniform2f'](ez,0x0,0x0);b['RenderWGL']['Util_RenderCloud'](eq,es,eu,et,er);}}b['Shader']['EndShader'](),b['Camera']['matMV']['copy'](eo),b['Camera']['matMVP']['copy'](ep);}}b['Shader']['EndFramebuffer']();}if(r){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['COLOROBJECTGROUP']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));if(![]){let eA=b['Group']['GetList'](),eB=new c['Color'](0x0,0x0,0x1,0xff);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC3D']),b['Shader']['SetClipping'](b['Camera']['matMV']);for(let eC=0x0;eC<eA['length'];eC++){if(eA[eC]['effect']===![])continue;eB['new']();let eD=eB['glColor']();b['Shader']['SetGLColor'](eD['r'],eD['g'],eD['b'],eD['a']);for(let eE=0x0;eE<bI;eE++){b['RenderWGL']['UpdateRenderProcessByGroupIdx'](b['Data']['Objects'][eE],eC);}}{let eF=new c['Color'](0x0,0x0,0x0,0xff),eG=eF['glColor']();b['Shader']['SetGLColor'](eG['r'],eG['g'],eG['b'],eG['a']);for(let eH=0x0;eH<bI;eH++){b['RenderWGL']['UpdateRenderProcessByGroupIdx'](b['Data']['Objects'][eH],-0x1);}b['Shader']['EndShader']();}b['Shader']['EndShader']();}else{let eI=b['Group']['GetList']();if(eI['length']>0x0){let eJ=new c['Color'](0x0,0x0,0x1,0xff);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC3D']),b['Shader']['SetClipping'](b['Camera']['matMV']);let eK=new c['Color'](0x0,0x0,0x0,0xff),eL=[];for(let eM=0x0;eM<eI['length'];eM++){eJ['new'](),eL[eM]=new c['Color']()['copy'](eJ);}for(let eN=0x0;eN<bI;eN++){b['RenderWGL']['UpdateRenderProcessByGroupColor'](b['Data']['Objects'][eN],eI,eL,eK);}b['Shader']['EndShader']();}}b['Shader']['EndFramebuffer']();}if(0x0){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['NORMAL']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['NORMAL']);for(let eO=0x0;eO<bI;eO++){b['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](b['Data']['Objects'][eO]);}b['Shader']['EndShader']();}{}b['Shader']['EndFramebuffer']();}}else{{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['DEPTH']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['DEPTH']),b['Shader']['SetGLCameraData']();for(let eP=0x0;eP<bI;eP++){b['RenderWGL']['UpdateRenderProcessByPickObject_v2'](b['Data']['Objects'][eP]);}b['Shader']['EndShader']();}b['Shader']['EndFramebuffer'](),e['disable'](e['BLEND']),e['disable'](e['DEPTH_TEST']);}{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PICK']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']),b['Shader']['SetClipping'](b['Camera']['matMV']);for(let eQ=0x0;eQ<bI;eQ++){b['RenderWGL']['UpdateRenderProcessByPickObject_v2'](b['Data']['Objects'][eQ]);}b['Shader']['EndShader']();}{b['CustomObject']['PickRender'](c['Enum']['SHADER_TYPES']['PICKING']);}b['Shader']['EndFramebuffer']();}{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PRESELECT']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']),e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']);if(![]){let eR=new c['Color'](0x0,0x0,0x0,0x0);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']);for(let eS=0x0;eS<bI;eS++){b['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](b['Data']['Objects'][eS],eR);}b['Shader']['EndShader'](),b['CustomObject']['OneColorRender'](c['Enum']['SHADER_TYPES']['BASIC2D'],eR);}{b['Pick']['RenderPreselectEdgeColor']();}b['Shader']['EndFramebuffer']();}{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['SELECTED']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']),b['Shader']['SetClipping'](b['Camera']['matMV']);for(let eT=0x0;eT<bI;eT++){b['RenderWGL']['UpdateRenderProcessBySelectPickObject_v2'](b['Data']['Objects'][eT]);}b['Shader']['EndShader']();{b['CustomObject']['SelectedRender'](c['Enum']['SHADER_TYPES']['PICKING']);}}{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['COLOROBJECT']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PICKING']);for(let eU=0x0;eU<bI;eU++){b['RenderWGL']['UpdateRenderProcessByColorID_v2'](b['Data']['Objects'][eU]);}b['Shader']['EndShader']();}{let eV=new c['Color'](0x0,0x0,0x0,0xff);b['CustomObject']['OneColorRender'](c['Enum']['SHADER_TYPES']['BASIC2D'],eV);}b['Shader']['EndFramebuffer']();}{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['COLORCUSTOMOBJECT']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{let eW=new c['Color'](0x0,0x0,0x0,0xff);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']);for(let eX=0x0;eX<bI;eX++){b['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](b['Data']['Objects'][eX],eW);}b['Shader']['EndShader']();}{b['CustomObject']['ColorIDRender'](c['Enum']['SHADER_TYPES']['PICKING']);}b['Shader']['EndFramebuffer']();}if(0x1){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['NORMAL']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['NORMAL']);for(let eY=0x0;eY<bI;eY++){b['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](b['Data']['Objects'][eY]);}b['Shader']['EndShader']();}{}b['Shader']['EndFramebuffer']();}if(0x1){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['POSITION']),e['disable'](e['BLEND']),e['enable'](e['DEPTH_TEST']);bH&&(e['clearColor'](0x0,0x0,0x0,0x0),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']));{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['POSITION']);for(let eZ=0x0;eZ<bI;eZ++){b['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](b['Data']['Objects'][eZ]);}b['Shader']['EndShader']();}{}b['Shader']['EndFramebuffer']();}}}function bn(bH){const bI=b['Camera']['clientWidth']/b['Camera']['clientHeight'];let bJ=new c['Matrix4']();bJ['elements']=bH;const bK=new c['Matrix4']()['copy'](b['Camera']['viewMatrix']);bJ['multiply'](bK)['multiplyScalar'](0x1);let bL=b['Camera']['GetFrustumCornersWorldSpace'](bJ),bM=new c['Vector3']();for(let c9=0x0;c9<0x8;c9++){bM['add'](bL[c9]);}bM['multiplyScalar'](0x1/0x8);let bN=![];if(b['Shader']['ViewLightAsRotate'])bN=!![];let bO=new c['Matrix4']()['copy'](b['Camera']['matMV']);bO['setPosition'](new c['Vector3']());let bP=b['Data']['GetBBox'](),bQ=new c['Vector3']()['copy'](bP['center']),bR=new c['Matrix4'](),bS=new c['Vector3']()['copy'](b['Shader']['GetLightDirection']()),bT,bU,bV;bV=new c['Vector3']()['copy'](bS);!bN&&(bV=bV['applyMatrix4'](bO));bU=new c['Vector3'](0x0,0x1,0x0);!bN&&(bU=bU['applyMatrix4'](bO));bT=new c['Vector3']()['crossVectors'](bU,bV),bT['normalize'](),bU=new c['Vector3']()['crossVectors'](bV,bT),bU['normalize']();let bW=new c['Vector3']()['copy'](bM)['applyMatrix4'](new c['Matrix4']()['copy'](b['Camera']['matMV'])),bX=new c['Matrix4']()['lookAt'](bW,new c['Vector3']()['addVectors'](bW,bV),bU),bY=new c['Matrix4']()['getInverse'](bX),bZ=new c['Matrix4']()['multiplyMatrices'](bY,new c['Matrix4']()['copy'](b['Camera']['matMV'])),c0=Number['POSITIVE_INFINITY'],c1=Number['NEGATIVE_INFINITY'],c2=Number['POSITIVE_INFINITY'],c3=Number['NEGATIVE_INFINITY'],c4=Number['POSITIVE_INFINITY'],c5=Number['NEGATIVE_INFINITY'];for(let ca=0x0;ca<0x8;ca++){let cb=new c['Matrix4']()['copy'](bZ);const cc=cb['multiplyVector'](bL[ca]);c0=Math['min'](c0,cc['x']),c1=Math['max'](c1,cc['x']),c2=Math['min'](c2,cc['y']),c3=Math['max'](c3,cc['y']),c4=Math['min'](c4,cc['z']),c5=Math['max'](c5,cc['z']);}const c6=0xa;c4<0x0?c4*=c6:c4/=c6;c5<0x0?c5/=c6:c5*=c6;let c7=new c['Matrix4']()['orthographic'](c0,c1,c2,c3,c4,c5),c8=new c['Matrix4']();return c8['elements']=c7,[bZ,c8];}function bo(){let bH=b['Data']['ObjectsUpdateLength'];if(b['Renderer']['GetEnableColorMap']())b['ColorMap']['InitList']();for(let bI=0x0;bI<bH;bI++){b['Data']['Objects'][bI]['flag']['renderEnable']=![];let bJ=b['RenderWGL']['GetPipeline'](b['Data']['Objects'][bI]['uuid']);if(bJ!==undefined)bJ['renderEnableOcclusion']=![];if(!b['Data']['Objects'][bI]['flag']['renderEnable']&&!b['Data']['Objects'][bI]['flag']['cache']&&(bJ!==undefined&&bJ['queryInProgress']===![])){b['Renderer']['ReleaseDataByCache'](b['Data']['Objects'][bI]);if(b['Renderer']['GetEnableColorMap']())b['ColorMap']['AddReleaseList'](b['Data']['Objects'][bI]);}else{if(b['Renderer']['GetEnableColorMap']())b['ColorMap']['AddReferenceList'](b['Data']['Objects'][bI]);}}if(b['Renderer']['GetEnableColorMap']()){for(let bK=bH;bK<b['Data']['Objects']['length'];bK++){b['ColorMap']['AddReferenceList'](b['Data']['Objects'][bK]);}b['ColorMap']['ReleaseColorMap']();}}function bp(){let bH=b['Data']['ObjectsUpdateLength'];for(let bI=0x0;bI<bH;bI++){b['Data']['Objects'][bI]['flag']['renderEnable']=![];let bJ=b['RenderWGL']['GetPipeline'](b['Data']['Objects'][bI]['uuid']);if(bJ!==undefined)bJ['renderEnableOcclusion']=![];}}this['IsRenderUpdate']=function(){if(d['RenderEvent'])return!![];if(a5){if(!d['mainFramebufferClear'])return b['ViewRefresh'](![]),![];return!![];}if(d['useNoteEffect'])return!![];if(d['enableOcclusion']){if(d['occlusionProcessCount']>0x0)return!![];}return![];};function bq(bH,bI,bJ){if(bJ===undefined){if(aY)bJ=c['Enum']['FB_RENDER_TYPES']['PICK'];else bJ=c['Enum']['FB_RENDER_TYPES']['COLOROBJECT'];}b['Shader']['BeginFramebuffer'](bJ),b['Shader']['BindTargetTexture']();const bK=bH,bL=b['Camera']['clientHeight']-bI,bM=new Uint8Array(0x4);e['readPixels'](bK,bL,0x1,0x1,e['RGBA'],e['UNSIGNED_BYTE'],bM);const bN=bM[0x0]+(bM[0x1]<<0x8)+(bM[0x2]<<0x10)+bM[0x3]*0x1000000;b['Shader']['EndFramebuffer']();if(bN===0x0)return undefined;let bO=b['Data']['GetBodyByColorIdx'](bN);return bO;}function br(bH,bI){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PICK']),b['Shader']['BindTargetTexture']();const bJ=bH,bK=b['Camera']['clientHeight']-bI,bL=new Uint8Array(0x4);e['readPixels'](bJ,bK,0x1,0x1,e['RGBA'],e['UNSIGNED_BYTE'],bL);const bM=bL[0x0]+(bL[0x1]<<0x8)+(bL[0x2]<<0x10)+bL[0x3]*0x1000000;b['Shader']['EndFramebuffer']();if(bM===0x0)return undefined;let bN=b['CustomObject']['GetObjectByColorIdx'](bM);if(bN===undefined)return undefined;return bN[0x1];}function bs(bH,bI){if(aY)b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PICK']);else b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['COLOROBJECT']);b['Shader']['BindTargetTexture']();const bJ=bH,bK=b['Camera']['clientHeight']-bI,bL=new Uint8Array(0x4);e['readPixels'](bJ,bK,0x1,0x1,e['RGBA'],e['UNSIGNED_BYTE'],bL);const bM=bL[0x0]+(bL[0x1]<<0x8)+(bL[0x2]<<0x10)+bL[0x3]*0x1000000;b['Shader']['EndFramebuffer']();if(bM===0x0)return undefined;let bN=b['CustomObject']['GetObjectByColorIdx'](bM);return bN;}function bt(bH,bI){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PRESELECT']),b['Shader']['BindTargetTexture']();let bJ=0x9,bK=Math['floor'](bJ*0.5);const bL=bH,bM=b['Camera']['clientHeight']-bI,bN=bL-bK,bO=bM-bK;if(!![]){let bQ=undefined,bR=bJ*bJ;const bS=new Uint8Array(bR*0x4);e['readPixels'](bN,bO,bJ,bJ,e['RGBA'],e['UNSIGNED_BYTE'],bS),b['Shader']['EndFramebuffer']();for(let bT=0x0;bT<bR;bT++){const bU=bS[bT*0x4+0x0]+(bS[bT*0x4+0x1]<<0x8)+(bS[bT*0x4+0x2]<<0x10)+bS[bT*0x4+0x3]*0x1000000;if(bU===0x0)continue;if(bQ!==undefined){if(bQ['id']===bU)continue;}let bV=b['Pick']['GetPreselectDataByID'](bU);if(bQ===undefined)bQ=bV;}return bQ;}let bP=undefined;for(let bW=0x0;bW<=bK;bW++){for(let bX=0x0;bX<=bK;bX++){const bY=new Uint8Array(0x4);e['readPixels'](bN+bW,bO+bX,0x1,0x1,e['RGBA'],e['UNSIGNED_BYTE'],bY);const bZ=bY[0x0]+(bY[0x1]<<0x8)+(bY[0x2]<<0x10)+bY[0x3]*0x1000000;if(bZ===0x0)continue;if(bP!==undefined){if(bP['id']===bZ)continue;}let c0=b['Pick']['GetPreselectDataByID'](bZ);if(bP===undefined)bP=c0;else bP['pickKind']!==c0['pickKind']&&((bP['pickKind']===c['Enum']['PRESELECT_PICK_KIND']['EDGE']||bP['pickKind']===c['Enum']['PRESELECT_PICK_KIND']['CIRCLE'])&&((c0['pickKind']!==c['Enum']['PRESELECT_PICK_KIND']['EDGE']||c0['pickKind']!==c['Enum']['PRESELECT_PICK_KIND']['CIRCLE'])&&(bP=c0)));}}return b['Shader']['EndFramebuffer'](),bP;}function bu(bH,bI){if(b['useWebGL2']){let bJ=b['Shader']['GetPositionTexture']();if(bJ){b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['PREPROCESSING']),e['readBuffer'](e['COLOR_ATTACHMENT1']);const bK=bH,bL=b['Camera']['clientHeight']-bI,bM=new Float32Array(0x4);e['readPixels'](bK,bL,0x1,0x1,e['RGBA'],e['FLOAT'],bM),e['readBuffer'](e['COLOR_ATTACHMENT0']),b['Shader']['EndFramebuffer']();const bN=new c['Matrix4']()['copy'](b['Camera']['matMV']),bO=new c['Matrix4']()['getInverse'](bN);let bP=new c['Vector3'](bM[0x0],bM[0x1],bM[0x2]),bQ=bO['multiplyVector'](bP);if(bQ['x']===0x0&&bQ['y']===0x0&&bQ['z']===0x0)return undefined;return bQ;}}else{b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['DEPTH']),b['Shader']['BindTargetTexture']();const bR=bH,bS=b['Camera']['clientHeight']-bI,bT=new Uint8Array(0x4);e['readPixels'](bR,bS,0x1,0x1,e['RGBA'],e['UNSIGNED_BYTE'],bT),b['Shader']['EndFramebuffer']();if(bT[0x0]===0x0&&bT[0x1]===0x0&&bT[0x2]===0x0)return undefined;let bU=new c['Matrix4']()['copy'](b['Camera']['matMVP']);if(![]){let bV=new c['Vector3']();bV['x']=bH,bV['y']=bI;let bW=bT[0x2];if(b['Camera']['perspectiveView'])bV['z']=bW/0xff;else bV['z']=bW/0xff*0x2-0x1;let bX=b['Camera']['screen2WorldWithMatrix'](bU,bV);return bX;}else{let bY=new c['Vector3'](),bZ=bT[0x0]+bT[0x1]*0x100+bT[0x2]*0x10000;bY['x']=bH,bY['y']=bI;const c0=0xffffff;if(b['Camera']['perspectiveView'])bY['z']=bZ/c0;else bY['z']=bZ/c0*0x2-0x1;let c1=b['Camera']['screen2WorldWithMatrix'](bU,bY);return c1;}}return undefined;}function bv(bH,bI,bJ,bK,bL,bM,bN){b['Shader']['BeginShader'](bI);{b['Shader']['SetMatrix'](new c['Matrix4'](),undefined);if(bM===undefined)b['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let bV=bM['glColor']();b['Shader']['SetGLColor'](bV['r'],bV['g'],bV['b'],bV['a']);}if(bN===undefined)bN=0x0;let bO;if(bH===0x0)bO=[0.25,0.35,0.5,0.75,0.35,0.5,0.25,0.85,0.5,0.75,0.85,0.5];else{if(bH===0x1)bO=[0.25,-0.225,0.5,0.75,-0.225,0.5,0.25,0.225,0.5,0.75,0.225,0.5];else bH===0x2&&(bO=[0.25,-0.85,0.5,0.75,-0.85,0.5,0.25,-0.35,0.5,0.75,-0.35,0.5]);}let bP=[0x0,0x0,0x1,0x0,0x0,0x1,0x1,0x1],bQ=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],bQ),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bO),e['STATIC_DRAW']);let bR=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],bR),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bP),e['STATIC_DRAW']);if(bJ!==undefined)b['Shader']['SetCurrentTexture']('u_Texture',e['TEXTURE_2D'],bJ);let bS=e['getUniformLocation'](b['Shader']['currentProgram'],'uTexScale');bS&&e['uniform2f'](bS,bK,bL);let bT=e['getUniformLocation'](b['Shader']['currentProgram'],'uSigma');bT&&e['uniform1f'](bT,0x1);let bU=e['getUniformLocation'](b['Shader']['currentProgram'],'uLevel');bU&&e['uniform1f'](bU,bN),e['bindBuffer'](e['ARRAY_BUFFER'],bQ),e['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,e['FLOAT'],![],0x0,0x0),e['bindBuffer'](e['ARRAY_BUFFER'],bR),e['vertexAttribPointer'](b['Shader']['uvAttributeLocation'],0x2,e['FLOAT'],![],0x0,0x0),e['drawArrays'](e['TRIANGLE_STRIP'],0x0,0x4),e['deleteBuffer'](bQ),e['deleteBuffer'](bR),e['bindTexture'](e['TEXTURE_2D'],null);}b['Shader']['EndShader']();}function bw(bH,bI,bJ,bK,bL){let bM=b['Shader']['GetItemFramebuffer'](bI);if(bM===undefined)return;bx(bH,bM['targetTexture'][0x0],bM['width'],bM['height'],bJ,bK,bL);}function bx(bH,bI,bJ,bK,bL,bM,bN){b['Shader']['BeginShader'](bH);{b['Shader']['SetMatrix'](new c['Matrix4'](),undefined);if(bL===undefined)b['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let bQ=bL['glColor']();b['Shader']['SetGLColor'](bQ['r'],bQ['g'],bQ['b'],bQ['a']);}b['Shader']['SetCurrentTexture']('u_Texture',e['TEXTURE_2D'],bI);let bO=e['getUniformLocation'](b['Shader']['currentProgram'],'uTexScale');bO&&e['uniform2f'](bO,bJ,bK);let bP=e['getUniformLocation'](b['Shader']['currentProgram'],'uSigma');bP&&e['uniform1f'](bP,0x1);if(bH===c['Enum']['SHADER_TYPES']['EDGE']){let bR=e['getUniformLocation'](b['Shader']['currentProgram'],'ubUseStipple');bR&&e['uniform1f'](bR,0x0);}if(bM!==undefined){if(bM===0xb){let bS=e['getUniformLocation'](b['Shader']['currentProgram'],'ubUseStipple');bS&&e['uniform1f'](bS,0x1);}}b['RenderWGL']['Util_RenderQuad'](bN),e['bindTexture'](e['TEXTURE_2D'],null);}b['Shader']['EndShader']();}function by(bH,bI,bJ,bK,bL,bM,bN,bO,bP){b['Shader']['BeginShader'](bH);{b['Shader']['SetMatrix'](new c['Matrix4'](),undefined);if(bO===undefined)b['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let bU=bO['glColor']();b['Shader']['SetGLColor'](bU['r'],bU['g'],bU['b'],bU['a']);}b['Shader']['SetCurrentTexture']('u_Texture',e['TEXTURE_2D'],bI);let bQ=e['getUniformLocation'](b['Shader']['currentProgram'],'uTexScale');bQ&&e['uniform2f'](bQ,bJ,bK);let bR=e['getUniformLocation'](b['Shader']['currentProgram'],'uDirection');bR&&e['uniform2f'](bR,bM['x'],bM['y']);let bS=e['getUniformLocation'](b['Shader']['currentProgram'],'uSigma');bS&&e['uniform1f'](bS,bN);let bT=e['getUniformLocation'](b['Shader']['currentProgram'],'uBlurType');bT&&e['uniform1i'](bT,bL),b['RenderWGL']['Util_RenderQuad'](bP),e['bindTexture'](e['TEXTURE_2D'],null);}b['Shader']['EndShader']();}function bz(bH,bI,bJ,bK){b['Shader']['BeginShader'](bH);{b['Shader']['SetMatrix'](new c['Matrix4'](),undefined),b['Shader']['SetCurrentTexture']('u_Texture',e['TEXTURE_2D'],bI),b['Shader']['SetCurrentTexture']('u_subTexture',e['TEXTURE_2D'],bJ);let bL=e['getUniformLocation'](b['Shader']['currentProgram'],'uTexScale');bL&&e['uniform2f'](bL,e['canvas']['width'],e['canvas']['height']),b['RenderWGL']['Util_RenderQuad'](bK),e['bindTexture'](e['TEXTURE_2D'],null);}b['Shader']['EndShader']();}function bA(bH,bI,bJ,bK){b['Shader']['BeginShader'](bH);{b['Shader']['SetMatrix'](new c['Matrix4'](),undefined),b['Shader']['SetGLCameraData'](),b['Shader']['SetGLNoiseData']();let bL=b['Shader']['GetPositionTexture'](),bM=b['Shader']['GetNormalTexture']();b['Shader']['SetCurrentTexture']('u_PositionTexture',e['TEXTURE_2D'],bL['texture']),b['Shader']['SetCurrentTexture']('u_NormalTexture',e['TEXTURE_2D'],bM['texture']);let bN=b['Data']['GetBBox'](),bO=new c['Matrix4']()['copy'](b['Camera']['matMV']),bP=bO['getTranslate']()['length'](),bQ=e['getUniformLocation'](b['Shader']['currentProgram'],'uBias');bQ&&(bI>0x0?e['uniform1f'](bQ,Math['min'](bI,0x3e8)):e['uniform1f'](bQ,Math['min'](bN['radius']*0.0001,0x3e8)));let bR=e['getUniformLocation'](b['Shader']['currentProgram'],'uSigma');if(bR){if(bI>0x0){let bS=Math['min'](0x1388,bI);e['uniform1f'](bR,bS);}else e['uniform1f'](bR,Math['min'](bN['radius']*0x1,0x1388));}b['RenderWGL']['Util_RenderQuad'](bK),e['bindTexture'](e['TEXTURE_2D'],null);}b['Shader']['EndShader']();}function bB(){if(b['Data']['ObjectsBBox']===undefined)return;aM=[],aM[0x0]=[],aM[0x1]=[];let bH=0x0,bI=0x0;e['enable'](e['DEPTH_TEST']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']);const bJ=new c['Matrix4']()['copy'](b['Camera']['matMV']),bK=new c['Matrix4']()['copy'](b['Camera']['matMVP']);let bL=new c['Vector3'](b['Data']['ObjectsBBox']['min']['x'],b['Data']['ObjectsBBox']['min']['y'],b['Data']['ObjectsBBox']['min']['z']),bM=new c['Vector3'](b['Data']['ObjectsBBox']['max']['x'],b['Data']['ObjectsBBox']['max']['y'],b['Data']['ObjectsBBox']['min']['z']),bN=new c['Vector3']((bL['x']+bM['x'])/0x2,(bL['y']+bM['y'])/0x2,(bL['z']+bM['z'])/0x2),bO=new c['Vector3']()['copy'](bN)['sub'](bL)['length']();bO*=aF;let bP=0x0,bQ=0x0,bR=new c['Vector3'](bL['x']-bO*aE,bL['y']-bO*aE,bL['z']),bS=new c['Vector3'](bM['x']+bO*aE,bM['y']+bO*aE,bL['z']);{e['cullFace'](e['FRONT']),b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),b['Shader']['SetMatrix'](bK,bJ),b['Shader']['SetGLLight'](),b['Shader']['SetClipping'](undefined);if(aG===undefined)b['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let bV=aG['glColor']();b['Shader']['SetGLColor'](bV['r'],bV['g'],bV['b'],bV['a']);}let bT=[bR['x'],bR['y'],bR['z']-bP,bS['x'],bR['y'],bR['z']-bP,bR['x'],bS['y'],bR['z']-bP,bS['x'],bS['y'],bR['z']-bP],bU=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],bU),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bT),e['STATIC_DRAW']),e['bindBuffer'](e['ARRAY_BUFFER'],bU),e['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,e['FLOAT'],![],0x0,0x0),e['drawArrays'](e['TRIANGLE_STRIP'],0x0,0x4),e['deleteBuffer'](bU),b['Shader']['EndShader'](),e['cullFace'](e['FRONT_AND_BACK']);}{let bW=aH;if(!aI){let c6=new c['Matrix4']()['copy'](b['Camera']['projectionMatrix']),c7=b['Camera']['world2ScreenWithMatrix'](c6,new c['Vector3']()['copy'](bN)),c8=b['Camera']['screen2WorldWithMatrix'](c6,new c['Vector3']()['copy'](c7)),c9=b['Camera']['screen2WorldWithMatrix'](c6,new c['Vector3'](c7['x']+aJ,c7['y'],c7['z'])),ca=new c['Vector3']()['copy'](c9)['sub'](c8)['length'](),cb=Math['floor'](ca)-Math['floor'](ca)%aH;bW=Math['max'](bW,cb);}b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),b['Shader']['SetMatrix'](bK,bJ),b['Shader']['SetClipping'](undefined);if(aG===undefined)b['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let cc=aK['glColor']();b['Shader']['SetGLColor'](cc['r'],cc['g'],cc['b'],cc['a']);}let bX=e['createBuffer']();e['bindBuffer'](e['ARRAY_BUFFER'],bX),e['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,e['FLOAT'],![],0x0,0x0);let bY=0x7530,bZ=0x0,c0=[],c1=Math['floor'](Math['floor'](bR['x'])/bW);c1++;let c2=Math['floor'](Math['floor'](bS['x'])/bW),c3=c2-c1;for(let cd=c1;cd<=c2;cd++){c0[bZ+0x0]=cd*bW,c0[bZ+0x1]=bR['y'],c0[bZ+0x2]=bR['z']-bQ,bZ+=0x3,c0[bZ+0x0]=cd*bW,c0[bZ+0x1]=bS['y'],c0[bZ+0x2]=bS['z']-bQ,bZ+=0x3;{aM[0x0][bH+0x0]=new c['Vector3'](c0[bZ-0x6],c0[bZ-0x5],c0[bZ-0x4]),aM[0x0][bH+0x1]=new c['Vector3'](c0[bZ-0x3],c0[bZ-0x2],c0[bZ-0x1]);}bH+=0x2,bZ+0x6>bY&&(e['bindBuffer'](e['ARRAY_BUFFER'],bX),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(c0),e['STATIC_DRAW']),e['drawArrays'](e['LINES'],0x0,bZ/0x3),bZ=0x0);}bZ>0x0&&(e['bindBuffer'](e['ARRAY_BUFFER'],bX),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(c0),e['STATIC_DRAW']),e['drawArrays'](e['LINES'],0x0,bZ/0x3));bZ=0x0,c0=[];let c4=Math['floor'](Math['floor'](bR['y'])/bW);c4++;let c5=Math['floor'](Math['floor'](bS['y'])/bW);for(let ce=c4;ce<=c5;ce++){c0[bZ+0x0]=bR['x'],c0[bZ+0x1]=ce*bW,c0[bZ+0x2]=bR['z']-bQ,bZ+=0x3,c0[bZ+0x0]=bS['x'],c0[bZ+0x1]=ce*bW,c0[bZ+0x2]=bS['z']-bQ,bZ+=0x3;{aM[0x1][bI+0x0]=new c['Vector3'](c0[bZ-0x6],c0[bZ-0x5],c0[bZ-0x4]),aM[0x1][bI+0x1]=new c['Vector3'](c0[bZ-0x3],c0[bZ-0x2],c0[bZ-0x1]);}bI+=0x2,bZ+0x6>bY&&(e['bindBuffer'](e['ARRAY_BUFFER'],bX),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(c0),e['STATIC_DRAW']),e['drawArrays'](e['LINES'],0x0,bZ/0x3),bZ=0x0);}bZ>0x0&&(e['bindBuffer'](e['ARRAY_BUFFER'],bX),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(c0),e['STATIC_DRAW']),e['drawArrays'](e['LINES'],0x0,bZ/0x3)),e['deleteBuffer'](bX),b['Shader']['EndShader']();}}function bC(){if(!aD||!aL)return;let bH=new c['Matrix4']()['copy'](b['Camera']['matMVP']),bI=0xa,bJ=0x2;f['font']=bI+'pt\x20Arial',f['fillStyle']='rgba(0,\x200,\x200,\x201.0)';for(let bK=0x0;bK<0x2;bK++){for(let bL=0x0;bL<aM[bK]['length'];bL+=0x2){let bM,bN,bO,bP;bM=new c['Vector3']()['copy'](aM[bK][bL+0x0]),bN=new c['Vector3']()['copy'](aM[bK][bL+0x1]);if(b6(bN,aN))continue;bO=d['Util']['GetScreenPositionByMatrix'](bH,bM),bP=d['Util']['GetScreenPositionByMatrix'](bH,bN);let bQ=new c['Vector2']()['subVectors'](bP,bO);bQ['normalize']();let bR='';if(bK===0x0)bR+=aM[bK][bL+0x0]['x'];else{if(bK===0x1)bR+=aM[bK][bL+0x0]['y'];}const bS=b['Renderer']['Util']['GetTextMetricsByText'](f,bR,bI);let bT=bS['width']+bJ*0x2,bU=bS['height']+bJ*0x2,bV=new c['Vector2']()['addVectors'](bP,new c['Vector2']()['copy'](bQ)['multiplyScalar'](bT));f['fillText'](bR,bV['x'],bV['y']+(bS['ascent']*0x0+bS['ascent']+bJ*0x0));}}}function bD(){e['disable'](e['DEPTH_TEST']),e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']);if(!b['Clipping']['IsClipping']())return;let bH=b['Clipping']['Get']();if(!bH['visible'])return;const bI=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),b['Shader']['SetMatrix'](bI,undefined);for(let bJ=0x0;bJ<bH['planes']['length'];bJ++){let bK=bH['planes'][bJ]['style']['color']['glColor']();b['Shader']['SetGLColor'](bK['r'],bK['g'],bK['b'],bK['a']);if(bH['planes'][bJ]['vertex']['length']<0x3)continue;let bL=[bH['planes'][bJ]['vertex'][0x0]['x'],bH['planes'][bJ]['vertex'][0x0]['y'],bH['planes'][bJ]['vertex'][0x0]['z'],bH['planes'][bJ]['vertex'][0x1]['x'],bH['planes'][bJ]['vertex'][0x1]['y'],bH['planes'][bJ]['vertex'][0x1]['z'],bH['planes'][bJ]['vertex'][0x2]['x'],bH['planes'][bJ]['vertex'][0x2]['y'],bH['planes'][bJ]['vertex'][0x2]['z'],bH['planes'][bJ]['vertex'][0x3]['x'],bH['planes'][bJ]['vertex'][0x3]['y'],bH['planes'][bJ]['vertex'][0x3]['z']],bM=undefined;bH['planes'][bJ]['visible']['plane']&&(bM=e['createBuffer'](),e['bindBuffer'](e['ARRAY_BUFFER'],bM),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bL),e['STATIC_DRAW']),e['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,e['FLOAT'],![],0x0,0x0),e['drawArrays'](e['TRIANGLE_STRIP'],0x0,0x4));if(bH['planes'][bJ]['style']['lineTickness']>0x0&&bH['planes'][bJ]['visible']['line']){if(bH['planes'][bJ]['style']['lineTickness']<0x1){let bN=e['createBuffer'](),bO=[0x0,0x1,0x3,0x2];bK=bH['planes'][bJ]['style']['lineColor']['glColor'](),b['Shader']['SetGLColor'](bK['r'],bK['g'],bK['b'],bK['a']),e['bindBuffer'](e['ELEMENT_ARRAY_BUFFER'],bN),e['bufferData'](e['ELEMENT_ARRAY_BUFFER'],new Uint16Array(bO),e['STATIC_DRAW']),e['drawElements'](e['LINE_LOOP'],bO['length'],e['UNSIGNED_SHORT'],0x0),e['deleteBuffer'](bN);}else{let bP=[0x0,0x1,0x3,0x2,0x0],bQ=[];for(let bT=0x0;bT<bP['length'];bT++){let bU=b['Camera']['world2ScreenWithMatrix'](bI,bH['planes'][bJ]['vertex'][bP[bT]]);bQ[bT]=bU;}let bR=[];for(let bV=0x0;bV<bP['length']-0x1;bV++){let bW=b['MeshProcess']['GetLine'](bQ[bV],bQ[bV+0x1],bH['planes'][bJ]['style']['lineTickness']);for(let bX=0x0;bX<bW['vertices']['length'];bX++){let bY=b['Camera']['screen2WorldWithMatrix'](bI,bW['vertices'][bX]);bR['push'](bY['x']),bR['push'](bY['y']),bR['push'](bY['z']);}}bK=bH['planes'][bJ]['style']['lineColor']['glColor'](),b['Shader']['SetGLColor'](bK['r'],bK['g'],bK['b'],bK['a']);let bS=b['gl']['createBuffer']();b['gl']['bindBuffer'](b['gl']['ARRAY_BUFFER'],bS),b['gl']['bufferData'](b['gl']['ARRAY_BUFFER'],new Float32Array(bR),b['gl']['STATIC_DRAW']),b['gl']['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,b['gl']['FLOAT'],![],0x0,0x0),b['gl']['drawArrays'](b['gl']['TRIANGLES'],0x0,bR['length']/0x3),e['deleteBuffer'](bS);}}if(bM!==undefined)e['deleteBuffer'](bM);}b['Shader']['EndShader']();}function bE(){e['enable'](e['DEPTH_TEST']),e['enable'](e['BLEND']),b['Handle']['Render']();}function bF(){if(!b['Configuration']['Render']['CoordinateAxis']['Visible']||!b['MultiView'][b['CameraIndex']]['ViewEntityInfo']['ShowCoordinateAxis'])return;const bH=new c['Matrix4']()['copy'](b['Camera']['cameraMatrix']);bH['setPosition'](new c['Vector3']());let bI=new c['Vector2'](0.05,0.05);bI['x']=b['Camera']['clientWidth']*bI['x'],bI['y']=b['Camera']['clientHeight']-b['Camera']['clientWidth']*bI['y'];b['Configuration']['Render']['CoordinateAxis']['Position']!==undefined&&(bI=new c['Vector2'](b['Configuration']['Render']['CoordinateAxis']['Position']['Horizontal'],b['Configuration']['Render']['CoordinateAxis']['Position']['Vertical']),bI['x']=b['Camera']['clientWidth']*bI['x'],bI['y']=b['Camera']['clientHeight']*bI['y']);const bJ=b['Camera']['clientWidth']*(b['Configuration']['Render']['CoordinateAxis']['Length']===undefined?0.035:b['Configuration']['Render']['CoordinateAxis']['Length']);let bK=new c['Vector3'](bI['x'],bI['y'],0x0),bL=new c['Vector3'](0x1,0x0,0x0);bL=bL['applyMatrix4'](bH),bL['y']*=-0x1;let bM=new c['Vector3'](0x0,0x1,0x0);bM=bM['applyMatrix4'](bH),bM['y']*=-0x1;let bN=new c['Vector3'](0x0,0x0,0x1);bN=bN['applyMatrix4'](bH),bN['y']*=-0x1;let bO,bP,bQ;bO=new c['Vector3']()['copy'](bK);let bR=bJ,bS=bJ/0x8,bT=bJ*1.2,bU=bJ/0x10;b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PHONGUTIL']),b['gl']['enable'](b['gl']['DEPTH_TEST']),b['Shader']['SetGLDefaultLight'](),b['Shader']['SetClipping'](undefined),b['Shader']['SetMatrix'](b['Camera']['screenProjectionMatrix'],new c['Matrix4']());{let bX=new c['Color'](0xff,0x0,0x0,0xff),bY=new c['Vector3']()['addVectors'](bO,new c['Vector3']()['copy'](bL)['multiplyScalar'](bR)),bZ=new c['Vector3']()['addVectors'](bO,new c['Vector3']()['copy'](bL)['multiplyScalar'](bT)),c0=bX['glColor']();b['Shader']['SetGLColor'](c0['r'],c0['g'],c0['b'],c0['a']),d['Util']['DrawCylinder3D'](bO,bY,bU),d['Util']['DrawCone3D'](bY,bZ,bS);let c1=new c['Vector3']()['addVectors'](bO,new c['Vector3']()['copy'](bL)['multiplyScalar'](bT+0xa));if(b['useNorthDisplay']===![])b['Renderer']['Util']['DrawText2D'](f,'X',c1,bX);}{let c2=new c['Color'](0x0,0xff,0x0,0xff),c3=new c['Vector3']()['addVectors'](bO,new c['Vector3']()['copy'](bM)['multiplyScalar'](bR)),c4=new c['Vector3']()['addVectors'](bO,new c['Vector3']()['copy'](bM)['multiplyScalar'](bT)),c5=c2['glColor']();b['Shader']['SetGLColor'](c5['r'],c5['g'],c5['b'],c5['a']),d['Util']['DrawCylinder3D'](bO,c3,bU),d['Util']['DrawCone3D'](c3,c4,bS);let c6=new c['Vector3']()['addVectors'](bO,new c['Vector3']()['copy'](bM)['multiplyScalar'](bT+0xa));if(b['useNorthDisplay']===![])b['Renderer']['Util']['DrawText2D'](f,'Y',c6,c2);else b['Renderer']['Util']['DrawText2D'](f,'N',c6,c2);}{let c7=new c['Color'](0x64,0x64,0xff,0xff),c8=new c['Vector3']()['addVectors'](bO,new c['Vector3']()['copy'](bN)['multiplyScalar'](bR)),c9=new c['Vector3']()['addVectors'](bO,new c['Vector3']()['copy'](bN)['multiplyScalar'](bT)),ca=c7['glColor']();b['Shader']['SetGLColor'](ca['r'],ca['g'],ca['b'],ca['a']),d['Util']['DrawCylinder3D'](bO,c8,bU),d['Util']['DrawCone3D'](c8,c9,bS);let cb=new c['Vector3']()['addVectors'](bO,new c['Vector3']()['copy'](bN)['multiplyScalar'](bT+0x8));if(b['useNorthDisplay']===![])d['Util']['DrawText2D'](f,'Z',cb,c7);}let bV=new c['Color'](0x7f,0x7f,0x7f,0xff),bW=bV['glColor']();b['Shader']['SetGLColor'](bW['r'],bW['g'],bW['b'],bW['a']),d['Util']['DrawSphere3D'](bO,bU*2.5),b['Shader']['EndShader']();};this['SetData']=function(){let bH=b['Data']['ObjectsUpdateLength'],bI=b['Data']['Objects']['length'];for(let bK=bH;bK<bI;++bK){b['Renderer']['SetDataByObject'](b['Data']['Objects'][bK]);}b['Renderer']['Render'](),b['Data']['ObjectsUpdateLength']=b['Data']['Objects']['length'];let bJ=bI-bH;if(bJ>0x0)for(let bL=0x0;bL<b['MultiView']['length'];bL++){if(!b['MultiView'][bL]['Visible']())continue;for(let bM=bH;bM<bI;++bM){b['MultiView'][bL]['ObjectRenderEnable'][bM]=!![];}}},this['SetDataByObject']=function(bH){let bI=bH['tag'][0x0],bJ=bI['color'],bK=![];bH['attribs']['a_index']['buffer']===null&&bH['attribs']['a_index']['array']['length']>0x0&&(bH['attribs']['a_index']['buffer']=e['createBuffer'](),e['bindBuffer'](e['ELEMENT_ARRAY_BUFFER'],bH['attribs']['a_index']['buffer']),e['bufferData'](e['ELEMENT_ARRAY_BUFFER'],new Uint16Array(bH['attribs']['a_index']['array']),e['STATIC_DRAW']),bK=!![]);bH['attribs']['a_position']['buffer']===null&&bH['attribs']['a_position']['array']['length']>0x0&&(bH['attribs']['a_position']['buffer']=e['createBuffer'](),e['bindBuffer'](e['ARRAY_BUFFER'],bH['attribs']['a_position']['buffer']),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bH['attribs']['a_position']['array']),e['STATIC_DRAW']),bK=!![]);bH['attribs']['a_normal']['buffer']===null&&bH['attribs']['a_normal']['array']['length']>0x0&&(bH['attribs']['a_normal']['buffer']=e['createBuffer'](),e['bindBuffer'](e['ARRAY_BUFFER'],bH['attribs']['a_normal']['buffer']),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bH['attribs']['a_normal']['array']),e['STATIC_DRAW']),bK=!![]);if(b['UV_DEBUG'])bH['attribs']['a_uv']['buffer']===null&&bH['attribs']['a_uv']['array']['length']>0x0&&(bH['attribs']['a_uv']['buffer']=e['createBuffer'](),e['bindBuffer'](e['ARRAY_BUFFER'],bH['attribs']['a_uv']['buffer']),e['bufferData'](e['ARRAY_BUFFER'],new Float32Array(bH['attribs']['a_uv']['array']),e['STATIC_DRAW']),bK=!![]);bH['attribs']['a_color']['buffer']===null&&bH['attribs']['a_color']['array']['length']>0x0&&(bH['attribs']['a_color']['buffer']=e['createBuffer'](),e['bindBuffer'](e['ARRAY_BUFFER'],bH['attribs']['a_color']['buffer']),e['bufferData'](e['ARRAY_BUFFER'],new Uint8Array(bH['attribs']['a_color']['array']),e['STATIC_DRAW']),bK=!![]);if(aX){bH['attribs']['a_tInd']['buffer']===null&&bH['attribs']['a_tInd']['array']['length']>0x0&&(bH['attribs']['a_tInd']['buffer']=e['createBuffer'](),e['bindBuffer'](e['ARRAY_BUFFER'],bH['attribs']['a_tInd']['buffer']),e['bufferData'](e['ARRAY_BUFFER'],new Uint32Array(bH['attribs']['a_tInd']['array']),e['STATIC_DRAW']),bK=!![]);let bL=b['ColorMap']['GetColorMapTexture']();bL!=undefined&&(b['ColorMap']['SetCurrentColorMapInfo'](bH['id_file']),b['ColorMap']['SetColorMapArray_Obj'](bH));}if(bH['attribs']['a_matrixIndex']!==undefined){if(bH['attribs']['a_matrixIndex']['buffer']===null&&bH['attribs']['a_position']['array']['length']>0x0&&(bH['attribs']['a_matrixIndex']['array']['length']>0x0||b['DemoType']===0x2)){bH['attribs']['a_matrixIndex']['buffer']=e['createBuffer'](),e['bindBuffer'](e['ARRAY_BUFFER'],bH['attribs']['a_matrixIndex']['buffer']);if(b['DemoType']===0x2){bH['attribs']['a_matrixIndex']['array']=new Uint16Array(bH['attribs']['a_position']['array']['length']);let bM=new c['Matrix4']();for(let bN=0x0;bN<bH['tag']['length'];bN++){let bO=b['Data']['ShapeAction']['GetAction'](bH['id_file'],bH['tag'][bN]['origin_id']);bO===undefined&&(bO=b['Data']['ActionItem']());let bP=-0x1;b['Shader']['HasObjectMatrix'](bH['tag'][bN]['bodyId'])&&(bP=b['Shader']['GetObjectMatrixIndex'](bH['tag'][bN]['bodyId']));if(bP<0x0){bP=b['Shader']['AddUpdateMatrixDataByIndex'](bH['uuid']),b['Shader']['SetObjectMatrixIndex'](bH['tag'][bN]['bodyId'],bP);if(bO['instance']['equals'](bM)===![])b['Shader']['ChangeUpdateMatrixData'](bH['uuid'],bP,bO['instance']);}bP===0x0&&b['Shader']['ChangeUpdateMatrixData'](bH['uuid'],bP,bM);let bQ=bH['tag'][bN]['m_triIdx']+bH['tag'][bN]['m_nTris'];for(let bR=bH['tag'][bN]['m_triIdx'];bR<bQ;bR++){let bS=bH['attribs']['a_index']['array'][bR];bH['attribs']['a_matrixIndex']['array'][bS*0x3+0x0]=bP;}bO['transformIdx']=bP,b['Data']['ShapeAction']['SetAction'](bH['id_file'],bH['tag'][bN]['origin_id'],bO);}}e['bufferData'](e['ARRAY_BUFFER'],new Uint16Array(bH['attribs']['a_matrixIndex']['array']),e['STATIC_DRAW']),bK=!![];}}bK&&(bH['flag']['updateProcess']=!![]);},this['ReleaseDataByCache']=function(bH){if(bH['flag']['cache'])return;b['RenderWGL']['ReleaseDataByObject'](bH);return;bH['attribs']['a_index']['buffer']!==null&&(e['deleteBuffer'](bH['attribs']['a_index']['buffer']),bH['attribs']['a_index']['buffer']=null,bH['attribs']['a_index']['array']=[]);bH['attribs']['a_position']['buffer']!==null&&(e['deleteBuffer'](bH['attribs']['a_position']['buffer']),bH['attribs']['a_position']['buffer']=null,bH['attribs']['a_position']['array']=[]);bH['attribs']['a_normal']['buffer']!==null&&(e['deleteBuffer'](bH['attribs']['a_normal']['buffer']),bH['attribs']['a_normal']['buffer']=null,bH['attribs']['a_normal']['array']=[]);if(b['UV_DEBUG'])bH['attribs']['a_uv']['buffer']!==null&&(e['deleteBuffer'](bH['attribs']['a_uv']['buffe']),bH['attribs']['a_uv']['buffer']=null,bH['attribs']['a_uv']['array']=[]);bH['attribs']['a_color']['buffer']!==null&&(e['deleteBuffer'](bH['attribs']['a_color']['buffer']),bH['attribs']['a_color']['buffer']=null,bH['attribs']['a_color']['array']=[]),bH['attribs']['a_matrixIndex']!==undefined&&(bH['attribs']['a_matrixIndex']['buffer']===null&&(e['deleteBuffer'](bH['attribs']['a_matrixIndex']['buffer']),bH['attribs']['a_matrixIndex']['buffer']=null,bH['attribs']['a_matrixIndex']['array']=[])),bH['attribs']['sub']['a_wireframe']['buffer']!==null&&(e['deleteBuffer'](bH['attribs']['sub']['a_wireframe']['buffer']),bH['attribs']['sub']['a_wireframe']['buffer']=null);},this['Render']=function(){d['RenderEvent']=!![];},this['Renderer']=function(){d['RenderEvent']&&(b5(),d['RenderEvent']=![]);},this['InitRenderProcess']=function(){b1();},this['RemoveGLBuffer']=function(bH){d['RenderEvent']=![];let bI=b['Data']['ObjectsUpdateLength'];for(let bJ=0x0;bJ<bI;bJ++){let bK=b['Data']['Objects'][bJ],bL=b['RenderWGL']['GetPipeline'](bK['uuid']);bL!==undefined&&bL['query']!==undefined&&e['deleteQuery'](bL['query']);if(!bK['flag']['cache'])continue;b['RenderWGL']['RemoveGLBuffer'](bK);if(!bH||bK['attribs']['a_index']['array']['length']<=0x0)continue;d['SetDataByObject'](bK);}},this['PickingCallback']=function(bH,bI,bJ,bK,bL){if(b['useFramebuffer']){if(bK!==undefined){let bM=bq(bH,bI);if(bM!==undefined)return bK(bJ,bM),!![];}if(bL!==undefined){let bN=bs(bH,bI);if(bN!==undefined)return bL(bJ,bN[0x0],bN[0x1]),!![];}}else{if(bK!==undefined){let bO=renderPickObject(bH,bI);if(bO!==undefined)return bK(bJ,bO),!![];}}return![];},this['ObjectIDCallback']=function(bH,bI,bJ,bK,bL){if(b['useFramebuffer']){if(bK!==undefined){let bM=bq(bH,bI,c['Enum']['FB_RENDER_TYPES']['COLOROBJECT']);if(bM!==undefined)return bK(bJ,bM),!![];}}else{if(bK!==undefined){let bN=renderPickObject(bH,bI);if(bN!==undefined)return bK(bJ,bN),!![];}}return![];},this['Picking']=function(bH,bI){if(b['useFramebuffer'])return bq(bH,bI);else return renderPickObject(bH,bI);},this['PickingByCustomObject']=function(bH,bI){if(b['useFramebuffer'])return bs(bH,bI);else return undefined;},this['PickingPreselectData']=function(bH,bI){return bt(bH,bI);},this['PickPositionObject']=function(bH,bI){return bu(bH,bI);},this['Resize']=function(){aZ(e['canvas']),aZ(f['canvas']),b['gl']['viewport'](0x0,0x0,b['Camera']['clientWidth'],b['Camera']['clientHeight']);},this['GetSizeWidth']=function(){return b['Camera']['clientWidth'];},this['GetSizeHeight']=function(){return b['Camera']['clientHeight'];},this['MainFBClear']=function(bH){if(bH===undefined||bH===!![])b['MeshBlock']['Crash']();d['mainFramebufferClear']=!![];for(let bI=0x0;bI<b['MultiView']['length'];bI++){if(!b['MultiView'][bI]['Visible']())continue;if(!b['MultiView'][bI]['ViewEntityInfo']['isFramebufferClear'])continue;b['MultiView'][bI]['BeginUpdateFramebuffer']();}},this['GetDrawInfo']=function(){return g;},this['SetXrayMode']=function(bH){bH?d['SetRenderMode'](c['Enum']['RENDER_MODES']['Xray']):d['SetRenderMode'](c['Enum']['RENDER_MODES']['Smooth']);},this['GetXrayMode']=function(){return l;},this['SetSelectionXrayMode']=function(bH){d['SetSelectionXrayMode'](bH);},this['GetFlatMode']=function(){return E;},this['GetXrayModeColor']=function(){return m;},this['GetPlasticMode']=function(){return n;},this['GetPlasticModeColor']=function(){return o;},this['SetRenderMode']=function(bH){D=bH,b['Tree']['SetEnableEffectModeObject'](undefined,!![]);let bI=E,bJ=V;switch(bH){case c['Enum']['RENDER_MODES']['Smooth']:{E=![],l=![],F=![],G=![],n=![],V=![],W=![];}break;case c['Enum']['RENDER_MODES']['Flat']:{E=!![],l=![],F=![],G=![],n=![],V=![],W=![];}break;case c['Enum']['RENDER_MODES']['Xray']:{E=![],l=!![],F=![],G=![],n=![],V=![],W=![];}break;case c['Enum']['RENDER_MODES']['WireFrame']:{E=![],l=![],F=![],G=![],n=![],V=![],W=!![],b['Data']['UpdateObjectsFlagProcess']();}break;case c['Enum']['RENDER_MODES']['HiddenLine']:{E=![],l=![],F=!![],G=![],n=![],V=![],W=![];}break;case c['Enum']['RENDER_MODES']['HiddenLineDashed']:{E=![],l=![],F=!![],G=!![],n=![],V=![],W=![];}break;case c['Enum']['RENDER_MODES']['Plastic']:{E=![],l=![],F=![],G=![],n=!![],V=![],W=![];}break;case c['Enum']['RENDER_MODES']['GrayScale']:{E=![],l=![],F=![],G=![],n=![],V=!![],W=![];}break;default:{E=![],l=![],F=![],G=![],n=![],V=![],W=![];}break;}(bI!==E||bJ!==V)&&b['Shader']['UpdateShader'](),b['MeshBlock']['Reset'](),b['Renderer']['Render']();},this['GetRenderMode']=function(){return D;},this['SetSelectionXrayMode']=function(bH){if(bH===undefined)return;b['Tree']['SetEnableEffectModeObject'](undefined,![]),b['Tree']['SetEnableEffectModeObject'](bH,!![]);},this['SetHiddenLineMode']=function(bH){bH?d['SetRenderMode'](c['Enum']['RENDER_MODES']['HiddenLine']):d['SetRenderMode'](c['Enum']['RENDER_MODES']['Smooth']);},this['SetGraySacleMode']=function(bH){bH?d['SetRenderMode'](c['Enum']['RENDER_MODES']['GrayScale']):d['SetRenderMode'](c['Enum']['RENDER_MODES']['Smooth']);},this['GetGraySacleMode']=function(){return V;},this['SetWireframeMode']=function(bH){bH?d['SetRenderMode'](c['Enum']['RENDER_MODES']['WireFrame']):d['SetRenderMode'](c['Enum']['RENDER_MODES']['Smooth']);},this['GetWireframeMode']=function(){return W;},this['SetEnvironmentMode']=function(bH,bI){if(Y===bH)return;Y=bH,b['Shader']['UpdateShader'](),(bI===undefined||bI)&&(b['MeshBlock']['Reset'](),b['Renderer']['Render']());},this['GetEnvironmentMode']=function(){return Y;},this['UseSkyTexture']=function(){if(Y)return!![];if(X)return!![];return![];},this['SetViewUnderControlMode']=function(bH){aC=bH;},this['GetViewUnderControlMode']=function(bH){return aC;},this['SetHDR']=function(bH){if(b['Shader']['UseHDR']===bH)return;b['Shader']['UseHDR']=bH,b['Shader']['UpdateShader'](),b['MeshBlock']['Reset'](),b['Renderer']['Render']();},this['GetHDR']=function(){return b['Shader']['UseHDR'];},this['SetShadowMode']=function(bH){if(N===bH)return;N=bH,b['Shader']['UpdateShader'](),b['MeshBlock']['Reset'](),b['Renderer']['Render']();},this['GetShadowMode']=function(){return N;},this['SetCCShadowMode']=function(bH){if(Q===bH)return;Q=bH,b['Shader']['UpdateShader'](),b['MeshBlock']['Reset'](),b['Renderer']['Render']();},this['GetCCShadowMode']=function(){return Q;},this['GetLogDepthMode']=function(){return aV;},this['SetLogDepthMode']=function(bH){if(aV===bH)return;aV=bH;},this['SetShadowRatio']=function(bH){O=bH;},this['GetShadowRatio']=function(){return O;},this['SetSSAOEffect']=function(bH,bI){bI!==undefined&&(K=bI);if(J===bH)return;J=bH;if(J&&bI===undefined){}b['Renderer']['Render']();},this['SetSSSEffect']=function(bH){if(I===bH)return;I=bH,b['Renderer']['Render']();},this['GetSSAOEffect']=function(){return J;},this['SetUseEdgeEffect']=function(bH){p=bH,b['Renderer']['Render']();},this['GetUseEdgeEffect']=function(){return p;},this['SetUseCustomEdgeEffect']=function(bH){q=bH,b['Renderer']['Render']();},this['GetUseCustomEdgeEffect']=function(){return q;},this['SetGroupEdgeEffect']=function(bH){if(r!==bH){let bI=b['Group']['GroupList']();if(bI!==undefined){for(let bJ=0x0;bJ<bI['length'];bJ++){let bK=b['Group']['Get'](bI[bJ]);for(let bL=0x0;bL<bK['length'];bL++){let bM=b['Data']['ModelFileManager']['GetFileKeyByNodeID'](bK[bL]),bN=b['Data']['GetOriginNodeID'](bM,bK[bL]),bO=b['Data']['ShapeAction']['GetAction'](bM,bN);bH?bO['groupIdx']=bJ:bO['groupIdx']=-0x1;}}b['Data']['UpdateObjectsFlagProcess']();}}r=bH;},this['SetUseSelectModelEdgeEffect']=function(bH){T=bH,b['Renderer']['Render']();},this['SetUseModelObjectCustomEdgeEffect']=function(bH){x=bH,b['Renderer']['Render']();},this['GetUseModelObjectCustomEdgeEffect']=function(){return x;},this['SetModelObjectCustomEdgeColor']=function(bH){y['copy'](bH);},this['SetAvatarEdgeEffect']=function(bH,bI){z=bH;if(bH&&bI!==undefined)A=bI;b['Renderer']['Render']();},this['GetAvatarEdgeEffect']=function(){return z;},this['GetAvatarEdgeTypeEffect']=function(){return A;},this['SetGroundPlane']=function(bH){if(aD===bH)return;aD=bH,b['MeshBlock']['Reset'](),b['Renderer']['Render']();},this['GetGroundPlane']=function(){return aD;},this['SetEnableSkyBox']=function(bH){X=bH,b['Shader']['UpdateShader'](),b['ViewRefresh']();},this['SetEnableFog']=function(bH){Z=bH,b['Shader']['UpdateShader'](),b['ViewRefresh']();},this['GetEnableFog']=function(){return Z;},this['SetFogNearFar']=function(bH,bI){bH!==undefined&&(a1=bH);bI!==undefined&&(a2=bI);if(a1>a2)a1=a2;if(a2<a2)a2=a1;},this['GetFogNearFar']=function(){return[a1,a2];},this['SetFogCenter']=function(bH){a0=bH;},this['GetFogCenter']=function(){return a0;},this['SetFogColor']=function(bH){a3=bH;},this['GetFogColor']=function(){return a3;},this['SetRepeatRender']=function(bH){a5=bH;},this['GetRepeatRender']=function(bH){a5=bH;},this['SetEnableWeatherRain']=function(bH){if(bH)a8=!![],af=![];else a8&&(a8=![],af=![]);},this['GetEnableWeatherRain']=function(){return a8;},this['SetWeatherRainDrawCount']=function(bH){a9=bH;},this['GetWeatherRainDrawCount']=function(){return a9;},this['SetWeatherRainDrawArea']=function(bH){aa=bH;},this['GetWeatherRainOpion']=function(){return{'angle':ab,'length':ac,'speed':ad,'color':new c['Color']()['copy'](ae)};},this['SetWeatherRainOpion']=function(bH){ab=bH['angle'],ac=bH['length'],ad=bH['speed'],ae['copy'](bH['color']);},this['SetEnableWeatherSnow']=function(bH){if(bH)a8=![],af=!![];else af&&(a8=![],af=![]);},this['GetEnableWeatherSnow']=function(){return a8;},this['SetWeatherSnowDrawCount']=function(bH){ag=bH;},this['GetWeatherSnowDrawCount']=function(){return ag;},this['SetWeatherSnowDrawArea']=function(bH){ah=bH;},this['GetWeatherSnowOpion']=function(){return{'angle':ai,'size':aj,'speed':ak,'color':new c['Color']()['copy'](al)};},this['SetWeatherSnowOpion']=function(bH){ai=bH['angle'],aj=bH['size'],ak=bH['speed'],al['copy'](bH['color']);},this['SetEnableWeatherCloud']=function(bH){bH?am=!![]:am=![];},this['GetEnableWeatherCloud']=function(){return am;},this['SetWeatherCloudDrawCount']=function(bH){an=bH;},this['GetWeatherCloudDrawCount']=function(){return an;},this['SetWeatherCloudDrawArea']=function(bH){CloudEffectDrawArea=bH;},this['GetWeatherCloudOpion']=function(){return{'angle':ap,'size':aq,'speed':ar,'color':new c['Color']()['copy'](as)};},this['SetWeatherCloudOpion']=function(bH){ap=bH['angle'],aq=bH['size'],ar=bH['speed'],as['copy'](bH['color']);},this['SetEnableWeatherMist']=function(bH){bH?at=!![]:at=![];},this['GetEnableWeatherMist']=function(){return at;},this['SetWeatherMistDrawCount']=function(bH){au=bH;},this['GetWeatherMistDrawCount']=function(){return au;},this['SetWeatherMistDrawArea']=function(bH){MistEffectDrawArea=bH;},this['GetWeatherMistOpion']=function(){return{'angle':aw,'size':ax,'speed':ay,'color':new c['Color']()['copy'](az)};},this['SetWeatherMistOpion']=function(bH){aw=bH['angle'],ax=bH['size'],ay=bH['speed'],az['copy'](bH['color']);},this['IsLock']=function(){return k>0x0?!![]:![];},this['Lock']=function(){k++;},this['Unlock']=function(bH){bH===undefined?k--:k=bH;if(k<0x0)k=0x0;},this['ClearProcess']=function(bH){if(bH===undefined){d['occlusionProcessCount']=0x0;let bI=b['Data']['ObjectsUpdateLength'];for(let bJ=bI-0x1;bJ>=0x0;bJ--){let bK=b['Data']['Objects'][bJ];if(!bK['flag']['cache'])continue;bK['flag']['cache']=![],b['Renderer']['ReleaseDataByCache'](bK);}}else for(let bL=0x0;bL<bH['length'];bL++){let bM=b['Data']['ModelFileManager']['GetFileAreaData'](bH[bL]['Key'],bH[bL]['Url']);if(bM!==undefined)for(let bN=0x0;bN<bM['length'];bN++){let bO=bM[bN];if(b['IsUseRenderCache']()){if(bO['flag']['cache']){b['CurrentRenderMeshBlockCacheNum']--;if(b['CurrentRenderMeshBlockCacheNum']<0x0)b['CurrentRenderMeshBlockCacheNum']=0x0;}}bO['flag']['cache']=![],b['Renderer']['ReleaseDataByCache'](bO),b['RenderWGL']['DeletePipeline'](bO['uuid']);}}},this['UpdateCache']=function(){if(!b['IsUseRenderCache']())return;let bH=b['Data']['ObjectsUpdateLength'],bI=b['Configuration']['Render']['Cache']['LimitCount']*0x1,bJ=0x0;for(let bK=0x0;bK<bH;bK++){if(b['Data']['Objects'][bK]['flag']['cache']===![])continue;let bL=b['Data']['Objects'][bK]['id_file'],bM=b['Data']['Objects'][bK]['link'],bN=undefined,bO=b['Data']['ModelFileManager']['GetFileInfo'](bL);if(bO===undefined)continue;if(!bO['IsFileHeader'])bN=!![];else{let bP=b['Data']['ModelFileManager']['GetFileAreaData'](bL,bM);bP!==undefined&&(bN=bP['cache']);}bN!==undefined&&!bN&&(b['Data']['Objects'][bK]['flag']['cache']=![],b['Renderer']['ReleaseDataByCache'](b['Data']['Objects'][bK]));}},this['SetBackColor']=function(bH,bI,bJ){i=bH,j=bI;b['Configuration']['Render']['Background']!==undefined&&(b['Configuration']['Render']['Background']['OneColor']=bH,b['Configuration']['Render']['Background']['TwoColor']=bI);if(bJ===undefined||bJ===!![])d['Render']();},this['GetBackColor']=function(){let bH={'bg1Color':new c['Color']()['copy'](i),'bg2Color':new c['Color']()['copy'](j)};return bH;},this['SetEdgeEffectColor']=function(bH){s=bH,d['Render']();},this['SetOcclusionCulling']=function(bH){if(b['useWebGL2']===![])return;d['enableOcclusion']=bH,b['Data']['UpdateObjectsFlagProcess'](),b['MeshBlock']['Reset'](),b['Renderer']['Render']();};function bG(bH,bI,bJ){b['Shader']['BeginFramebuffer'](bH),b['Shader']['BindTargetTexture']();let bK=b['Shader']['GetItemFramebuffer'](bH),bL=new Uint8Array(bK['width']*bK['height']*0x4);e['readPixels'](0x0,0x0,bK['width'],bK['height'],e['RGBA'],e['UNSIGNED_BYTE'],bL);let bM=document['createElement']('canvasBuffer');bM['width']=bI,bM['height']=bJ;let bN=bM['getContext']('2d'),bO=bN['createImageData'](bI,bJ);bO['data']['set'](bL),bN['putImageData'](bO,0x0,0x0);let bP=new Image();return bP['src']=bM['toDataURL'](),bP;}this['SaveImageFromBuffer']=function(bH){let bI=new c['Color'](0xff,0xff,0xff,0xff);b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']),e['clearColor'](0x0,0x0,0x0,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),bw(c['Enum']['SHADER_TYPES']['FXAA'],bH,bI,0x0,!![]),b['Shader']['BindTargetTexture']();let bJ=b['Shader']['GetItemFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']),bK=new Uint8Array(bJ['width']*bJ['height']*0x4);e['readPixels'](0x0,0x0,bJ['width'],bJ['height'],e['RGBA'],e['UNSIGNED_BYTE'],bK),b['Shader']['EndFramebuffer'](),b['Util']['SaveImageData'](bK,bJ['width'],bJ['height']);},this['GetImageDataFromBuffer']=function(bH){let bI=new c['Color'](0xff,0xff,0xff,0xff);e['enable'](e['BLEND']),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),b['Shader']['BeginFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']),e['clearColor'](0x1,0x1,0x1,0x1),e['clear'](e['COLOR_BUFFER_BIT']|e['DEPTH_BUFFER_BIT']),bw(c['Enum']['SHADER_TYPES']['TEXTURE2D'],bH,bI,0x0,!![]),b['Shader']['BindTargetTexture']();let bJ=b['Shader']['GetItemFramebuffer'](c['Enum']['FB_RENDER_TYPES']['CUSTOM']),bK=new Uint8Array(bJ['width']*bJ['height']*0x4);return e['readPixels'](0x0,0x0,bJ['width'],bJ['height'],e['RGBA'],e['UNSIGNED_BYTE'],bK),b['Shader']['EndFramebuffer'](),e['blendFunc'](e['SRC_ALPHA'],e['ONE_MINUS_SRC_ALPHA']),e['disable'](e['BLEND']),{'data':bK,'width':bJ['width'],'height':bJ['height']};},this['UseViewDistanceEffect']=function(bH,bI){aA=bH,aB=bI;},this['SetRenderOrbit']=function(bH){aP=bH;},this['GetRenderOrbit']=function(){return aO;},this['SetVisibleOrbitControl']=function(bH){aO=bH;},this['SetOrbitOutColor']=function(bH){aR=bH,d['Render']();},this['SetOrbitInColor']=function(bH){aS=bH,d['Render']();},this['SetOrbitThickness']=function(bH){aT=bH,d['Render']();},this['SetEnableOrbitDot']=function(bH){aU=bH,d['Render']();},this['SetOrbitMousePos']=function(bH){aQ=bH;},this['GetOrbitMousePos']=function(){return aQ;},this['GetEnableColorMap']=function(){return aX;};};export default Renderer;