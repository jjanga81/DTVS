import a from'./lib/shdcore/shdcore.js';class AssemblyLoader{constructor(b,c){let d=this,e=undefined;this['GetModule']=function(){return e;},this['onRuntimeInitialized']=undefined;let f=[];this['FileDataItem']=function(){let k={'Key':'','KeySubType':0x0,'onload':undefined,'onerror':undefined,'Url':''};return k;},this['Init']=async function(){let k=b['Configuration']['Default']['Path']+'lib/shdcore/shdcore.wasm';if(b['Configuration']['Default']['WebAssembly']!==undefined&&b['Configuration']['Default']['WebAssembly']['Path']!==undefined)k=b['Configuration']['Default']['WebAssembly']['Path'];const l=await fetch(k),m=await l['arrayBuffer']();let n={};n['onRuntimeInitialized']=function(){},n['instantiateWasm']=function(o,p){o['env']['Loader_cbDownloadCompleted']=g,o['wasi_snapshot_preview1']['Loader_cbDownloadCompleted']=g,o['env']['Loader_cbDownloadFailed']=h,o['wasi_snapshot_preview1']['Loader_cbDownloadFailed']=h;var q=WebAssembly['instantiate'](n['wasmBinary'],o)['then'](function(r){p(r['instance']);});},n['wasmBinary']=m,e=await a(n),b['ShdCore']=e;if(d['onRuntimeInitialized']!==undefined)d['onRuntimeInitialized']();},this['Release']=function(){f['splice'](0x0,f['length']);};function g(k,l,m){let n=e['UTF8ToString'](m),o=f['findIndex'](u=>{if(u['Url']['localeCompare'](n)===0x0)return!![];return![];}),p=undefined,q;const r=e['_GetDecompressedSize'](k,l);if(r>0x0){const u=e['_malloc'](r);e['_Decompress'](k,l,u,r),p=u,q=r;}else p=k,q=l;var s=new Uint8Array(q);s['set'](new Uint8Array(e['wasmMemory']['buffer'],p,q),0x0);return;const t=new Uint8Array(e['wasmMemory']['buffer'],p,q);{let v=c['Main']['GetModule']();const w=v['_malloc'](q),x=v['HEAPU8']['subarray'](w,w+q);x['set'](t,0x0);let y=f[o]['Key'];const z=new TextEncoder('utf8')['encode'](y),A=v['_malloc'](z['length']),B=v['HEAPU8']['subarray'](A,A+z['length']);B['set'](z),r>0x0&&e['_free'](p),new Promise((C,D)=>{v['_Data_ImportFile'](B['byteOffset'],x['byteOffset'],q),C();})['then'](()=>{v['_free'](w),v['_free'](A),j(o,!![],![],!![]);if(f['length']>0x0)i(f[0x0]['Url']);})['catch'](()=>{v['_free'](w),v['_free'](A),j(o,![],!![],!![]);if(f['length']>0x0)i(f[0x0]['Url']);});}};function h(k,l){let m=e['UTF8ToString'](k),n=f['findIndex'](o=>{if(o['Url']['localeCompare'](m)===0x0)return!![];return![];});n>=0x0&&j(n,![],!![],!![]);if(f['length']>0x0)i(f[0x0]['Url']);};function i(k){const l=new TextEncoder('utf8')['encode'](k),m=e['_malloc'](l['length']),n=e['HEAPU8']['subarray'](m,m+l['length']);n['set'](l),e['_Download'](n['byteOffset']),e['_free'](m);};function j(k,l,m,n){if(k<0x0)return;let o=f[k];if(n)f['splice'](k,0x1);if(l){if(o['onload'])o['onload']();}if(m){if(o['onerror'])o['onerror']();}};this['AddDownloadFileByURL']=function(k){let l=d['FileDataItem']();l['Url']=k,d['AddDownloadFile'](l);},this['AddDownloadFile']=function(k){f['push'](k),f['length']===0x1&&i(k['Url']);},this['wasm_GetDecompressedSize']=function(k,l){let m=c['Main']['GetModule']();const n=new Uint8Array(m['wasmMemory']['buffer'],k,l),o=e['_malloc'](l),p=e['HEAPU8']['subarray'](o,o+l);p['set'](n,0x0);const q=e['_GetDecompressedSize'](p['byteOffset'],l);return e['_free'](o),q;},this['wasm_Decompress']=function(k,l,m,n){let o=c['Main']['GetModule']();const p=new Uint8Array(o['wasmMemory']['buffer'],k,l),q=new Uint8Array(o['wasmMemory']['buffer'],m,n),r=e['_malloc'](l),s=e['HEAPU8']['subarray'](r,r+l);s['set'](p,0x0);const t=e['_Decompress'](s['byteOffset'],l,q,n);return e['_free'](r),t;};}}export default AssemblyLoader;