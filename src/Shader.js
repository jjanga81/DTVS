import a from'./ShaderGLSL.js';import b from'./ShaderTexture.js';class Shader{constructor(c,d){const e=['VERTEX_SHADER','FRAGMENT_SHADER'],f=()=>{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i['test'](navigator['userAgent']);};let g=this;this['DefaultTexture']=undefined;let h=new Map();this['currentProgram']=undefined,this['currentShaderType']=undefined;let i=[],j=new Map();this['currentMaterial']=undefined;let k=new Map(),l=[];this['currentFramebufferType']=undefined;let m=![],n=![],o=undefined;this['positionAttributeLocation']=undefined,this['normalAttributeLocation']=undefined,this['colorAttributeLocation']=undefined,this['uvAttributeLocation']=undefined,this['updateMatrixAttributeLocation']=undefined,this['subBipedIdxAttributeLocation']=undefined,this['subBipedWeightAttributeLocation']=undefined,this['tindAttributeLocation']=undefined,this['EnableUpdateShader']=!![];let p=0x2,q=0x4,r=![],s=[null,null,null,null,null],t=null,u=null,v=null,w=![],x=![],y=0x1,z='',A=[],B=[],C=![];this['UseHDR']=![];let D=![],E=new Map(),F=undefined,G=new Map(),H=0x0,I=0x0,J,K=-0x1,L='',M=undefined,N=0x80,O=undefined,P=[],Q=undefined,R=![],S=undefined,T=![],U=undefined,V=![],W=undefined,X=![],Y=undefined,Z=undefined,a0=undefined,a1=null,a2=null,a3=new d['Color'](0xff,0xff,0xff,0xff),a4=new d['Color'](0x50,0x50,0x50,0xff);this['ViewLightAsRotate']=![];let a5=new d['Vector3'](0x0,0x0,0x1),a6=undefined,a7=new d['Vector3'](0x0,0x0,0x1),a8=new d['Color'](0xff,0xff,0xea,0xff),a9=0x0,aa=[];this['setBackground']=au=>{y=au;};function ab(au,av,aw){if(aw['sizeLock'])return;let ax=aw['multiplier']||0x1;const ay=au*ax|0x0,az=av*ax|0x0;if(aw['width']!==ay||aw['height']!==az){aw['msaa']?aw['targetBuffer']!==null&&(c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],aw['targetBuffer']),c['gl']['renderbufferStorageMultisample'](c['gl']['RENDERBUFFER'],q,c['gl']['RGBA8'],ay,az)):aw['targetBuffer']!==null&&(c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],aw['targetBuffer']),c['gl']['renderbufferStorage'](c['gl']['RENDERBUFFER'],c['gl']['RGBA8'],ay,az));for(let aA=0x0;aA<aw['targetTexture']['length'];aA++){c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],aw['targetTexture'][aA]);if(aw['texStorageType'][aA]===c['gl']['RGBA'])c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA'],ay,az,0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],null);else{if(aw['texStorageType'][aA]===c['gl']['RGBA8'])c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA8'],ay,az,0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],null);else{if(aw['texStorageType'][aA]===c['gl']['RGBA16F'])c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA16F'],ay,az,0x0,c['gl']['RGBA'],c['gl']['FLOAT'],null);else{if(aw['texStorageType'][aA]===c['gl']['RGBA32F'])c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA32F'],ay,az,0x0,c['gl']['RGBA'],c['gl']['FLOAT'],null);else aw['texStorageType'][aA]===c['gl']['SRGB8_ALPHA8']&&c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['SRGB8_ALPHA8'],ay,az,0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],null);}}}}return aw['msaa']?aw['targetDepth']!==null&&(c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],aw['targetDepth']),c['gl']['renderbufferStorageMultisample'](c['gl']['RENDERBUFFER'],q,c['gl']['DEPTH24_STENCIL8'],ay,az)):(aw['targetDepth']!==null&&(c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],aw['targetDepth']),c['gl']['renderbufferStorage'](c['gl']['RENDERBUFFER'],c['gl']['DEPTH_COMPONENT16'],ay,az)),aw['targetDepthTexture']!==null&&(c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],aw['targetDepthTexture']),c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['DEPTH_COMPONENT16'],ay,az,0x0,c['gl']['DEPTH_COMPONENT'],c['gl']['UNSIGNED_SHORT'],null))),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null),c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],null),aw['width']=ay,aw['height']=az,!![];}return![];}function ac(au,av){av=av||0x1;const aw=au['clientWidth']*av|0x0,ax=au['clientHeight']*av|0x0;if(aw>0x0&&ax>0x0){let ay=function(az,aA,aB){if(az===undefined)return;if(az['sizeLock'])return;ab(aw,ax,az);};return k['forEach'](ay),!![];}return![];}function ad(au){au['msaa']?au['targetBuffer']!==null&&c['gl']['deleteRenderbuffer'](au['targetBuffer']):au['targetBuffer']!==null&&c['gl']['deleteRenderbuffer'](au['targetBuffer']);for(let av=0x0;av<au['targetTexture']['length'];av++){c['gl']['deleteTexture'](au['targetTexture'][av]);}au['msaa']?au['targetDepth']!==null&&c['gl']['deleteRenderbuffer'](au['targetDepth']):(au['targetDepth']!==null&&c['gl']['deleteRenderbuffer'](au['targetDepth']),au['targetDepthTexture']!==null&&c['gl']['deleteTexture'](au['targetDepthTexture'])),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null),c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],null);}function ae(){let au=new d['Vector3'](0xc8,-0xc8,-0x1f4);a5['copy'](au)['normalize'](),a7['copy'](a5),a6=c['Data']['LightItem'](),a6['Color']['set'](0xff,0xff,0xea,0xff),a9=0x0;if(c['DemoType']===0x6)a9=0x4,a6['Color']['set'](0x0,0x0,0x0,0xff);else{let aw=c['Data']['LightItem']();aw['Color']['set'](0x0,0x0,0x0,0xff),aw['Power']=0x0;let ax=c['Data']['LightItem']();ax['Color']['set'](0x0,0x0,0x0,0xff),ax['Power']=0x0;let ay=c['Data']['LightItem']();ay['Color']['set'](0x0,0x0,0x0,0xff),ay['Power']=0x0;let az=c['Data']['LightItem']();az['Color']['set'](0x0,0x0,0x0,0xff),az['Power']=0x0;}c['DemoType']===0x7&&(a6['Color']['set'](0x140,0x140,0x140,0xff),au=new d['Vector3'](-0x64,-0x1f4,-0x1f4),a5['copy'](au)['normalize'](),a3['set'](0x80,0x80,0x80,0xff));g['DefaultTexture']=new b(c);if(c['DemoType']===0x2)D=!![];if(c['DemoType']===0x3)C=!![];g['ReleaseCanvas']();let av=c['MultiCamera']['length'];H=c['gl']['getParameter'](c['gl']['MAX_VERTEX_UNIFORM_VECTORS']);if(m){let aA=c['gl']['getExtension']('WEBGL_depth_texture');if(aA===undefined)m=![];console['log'](aA);}if(c['useWebGL2']){n&&(o=c['gl']['getExtension']('WEBGL_multi_draw'),!o&&(console['log']('WEBGL_multi_draw\x20not\x20available!'),n=![]));let aB=c['gl']['getExtension']('EXT_color_buffer_float');aB===null&&console['log']('FLOAT\x20color\x20buffer\x20not\x20available!');}B=[c['gl']['TEXTURE_CUBE_MAP_POSITIVE_X'],c['gl']['TEXTURE_CUBE_MAP_NEGATIVE_X'],c['gl']['TEXTURE_CUBE_MAP_POSITIVE_Y'],c['gl']['TEXTURE_CUBE_MAP_NEGATIVE_Y'],c['gl']['TEXTURE_CUBE_MAP_POSITIVE_Z'],c['gl']['TEXTURE_CUBE_MAP_NEGATIVE_Z']];for(let aC=0x0;aC<av;aC++){let aD=g['AddCameraFrameBuffer']();}k=l[0x0],c['gl']['viewport'](0x0,0x0,c['gl']['canvas']['width'],c['gl']['canvas']['height']);}this['AddCameraFrameBuffer']=function(){let au=k;k=new Map();let av=k;return k=au,l['push'](av),av;};function af(au){if(au!==undefined){if(k['has'](au))return;}function av(az,aA,aB,aC,aD,aE){let aF=aB*aD,aG=aC*aD;aF=Math['max'](aF,0x10),aG=Math['max'](aG,0x10);const aH=az['createTexture']();az['bindTexture'](az['TEXTURE_2D'],aH);aA===d['Enum']['FB_RENDER_TYPES']['PICK']||aA===d['Enum']['FB_RENDER_TYPES']['DEPTH']||aA===d['Enum']['FB_RENDER_TYPES']['NORMAL']||aA===d['Enum']['FB_RENDER_TYPES']['POSITION']||aA===d['Enum']['FB_RENDER_TYPES']['PRESELECT']?(az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MIN_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MAG_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_S'],az['CLAMP_TO_EDGE']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_T'],az['CLAMP_TO_EDGE'])):(az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MIN_FILTER'],az['LINEAR']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MAG_FILTER'],az['LINEAR']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_S'],az['CLAMP_TO_EDGE']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_T'],az['CLAMP_TO_EDGE']));az['pixelStorei'](az['UNPACK_PREMULTIPLY_ALPHA_WEBGL'],![]),az['texImage2D'](az['TEXTURE_2D'],0x0,az['RGBA'],aF,aG,0x0,az['RGBA'],az['UNSIGNED_BYTE'],null);const aI=az['createRenderbuffer']();az['bindRenderbuffer'](az['RENDERBUFFER'],aI),az['renderbufferStorage'](az['RENDERBUFFER'],az['DEPTH_COMPONENT16'],aF,aG);const aJ=az['createFramebuffer']();az['bindFramebuffer'](az['FRAMEBUFFER'],aJ);let aK=null;m?(aK=az['createTexture'](),az['bindTexture'](az['TEXTURE_2D'],aK),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MIN_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MAG_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_S'],az['CLAMP_TO_EDGE']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_T'],az['CLAMP_TO_EDGE']),az['texImage2D'](az['TEXTURE_2D'],0x0,az['DEPTH_COMPONENT'],aF,aG,0x0,az['DEPTH_COMPONENT'],az['UNSIGNED_SHORT'],null),az['framebufferTexture2D'](az['FRAMEBUFFER'],az['COLOR_ATTACHMENT0'],az['TEXTURE_2D'],aH,0x0),az['framebufferTexture2D'](az['FRAMEBUFFER'],az['DEPTH_ATTACHMENT'],az['TEXTURE_2D'],aK,0x0)):(az['framebufferTexture2D'](az['FRAMEBUFFER'],az['COLOR_ATTACHMENT0'],az['TEXTURE_2D'],aH,0x0),az['framebufferRenderbuffer'](az['FRAMEBUFFER'],az['DEPTH_ATTACHMENT'],az['RENDERBUFFER'],aI));if(c['DEBUG']){let aM=az['checkFramebufferStatus'](az['FRAMEBUFFER']);aM!==0x8cd5&&console['log']('[VIZCore]\x20Buffer\x20Create\x20Failed.');}az['bindFramebuffer'](az['FRAMEBUFFER'],null);let aL=c['Data']['FrameBufferDataItem']();aL['itemType']=aA,aL['framebufferID']=aJ,aL['targetTexture']['push'](aH),aL['targetDepth']=aI,aL['targetDepthTexture']=aK,aL['width']=aF,aL['height']=aG,aL['multiplier']=aD,aL['sizeLock']=aE,aL['texStorageType']=[az['RGBA']],k['set'](aA,aL);}function aw(az,aA,aB,aC,aD){const aE=az['createFramebuffer']();az['bindFramebuffer'](az['FRAMEBUFFER'],aE);let aF=aB*aD,aG=aC*aD;aF=Math['max'](aF,0x10),aG=Math['max'](aG,0x10);let aH=q,aI=az['createRenderbuffer']();az['bindRenderbuffer'](az['RENDERBUFFER'],aI),az['renderbufferStorageMultisample'](az['RENDERBUFFER'],aH,az['RGBA8'],aF,aG),az['bindRenderbuffer'](az['RENDERBUFFER'],null);let aJ=az['createRenderbuffer'](),aK=null;az['bindRenderbuffer'](az['RENDERBUFFER'],aJ),az['renderbufferStorageMultisample'](az['RENDERBUFFER'],aH,az['DEPTH24_STENCIL8'],aF,aG),az['framebufferRenderbuffer'](az['FRAMEBUFFER'],az['COLOR_ATTACHMENT0'],az['RENDERBUFFER'],aI),az['framebufferRenderbuffer'](az['FRAMEBUFFER'],az['DEPTH_ATTACHMENT'],az['RENDERBUFFER'],aJ);if(c['DEBUG']){let aM=az['checkFramebufferStatus'](az['FRAMEBUFFER']);aM!==0x8cd5&&console['log']('[VIZCore]\x20Buffer\x20Create\x20Failed.');}az['bindFramebuffer'](az['FRAMEBUFFER'],null);let aL=c['Data']['FrameBufferDataItem']();aL['itemType']=aA,aL['framebufferID']=aE,aL['targetBuffer']=aI,aL['targetDepth']=aJ,aL['targetDepthTexture']=aK,aL['width']=aF,aL['height']=aG,aL['multiplier']=aD,aL['sizeLock']=![],aL['texStorageType']=[az['RGBA8']],aL['msaa']=!![],k['set'](aA,aL);}function ax(az,aA,aB,aC,aD,aE,aF,aG){let aH=0x0;const aI=az['createFramebuffer']();az['bindFramebuffer'](az['FRAMEBUFFER'],aI);let aJ=aB*aD,aK=aC*aD;aJ=Math['max'](aJ,0x10),aK=Math['max'](aK,0x10);if(aG===undefined){aG=[];for(let aQ=0x0;aQ<aE;aQ++){aG[aQ]=az['RGBA'];}}let aL=[];for(let aR=0x0;aR<aE;aR++){const aS=az['createTexture']();az['bindTexture'](az['TEXTURE_2D'],aS);if(aG[aR]===az['RGBA'])az['texImage2D'](az['TEXTURE_2D'],0x0,az['RGBA'],aJ,aK,0x0,az['RGBA'],az['UNSIGNED_BYTE'],null);else{if(aG[aR]===az['RGBA8'])az['texImage2D'](az['TEXTURE_2D'],0x0,az['RGBA8'],aJ,aK,0x0,az['RGBA'],az['UNSIGNED_BYTE'],null);else{if(aG[aR]===az['RGBA16F'])az['texImage2D'](az['TEXTURE_2D'],0x0,az['RGBA16F'],aJ,aK,0x0,az['RGBA'],az['FLOAT'],null);else{if(aG[aR]===az['RGBA32F'])az['texImage2D'](az['TEXTURE_2D'],0x0,az['RGBA32F'],aB,aC,0x0,az['RGBA'],az['FLOAT'],null);else aG[aR]===az['SRGB8_A']&&az['texImage2D'](az['TEXTURE_2D'],0x0,az['SRGB8_ALPHA8'],aB,aC,0x0,az['RGBA'],az['UNSIGNED_BYTE'],null);}}}if(aA===d['Enum']['FB_RENDER_TYPES']['PICK']||aA===d['Enum']['FB_RENDER_TYPES']['DEPTH']||aA===d['Enum']['FB_RENDER_TYPES']['NORMAL']||aA===d['Enum']['FB_RENDER_TYPES']['POSITION']||aA===d['Enum']['FB_RENDER_TYPES']['PREPROCESSING']||aA===d['Enum']['FB_RENDER_TYPES']['PRESELECT'])az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MIN_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MAG_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_S'],az['CLAMP_TO_EDGE']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_T'],az['CLAMP_TO_EDGE']);else aA===d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW']||aA===d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW2']||aA===d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW3']||aA===d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW4']||aA===d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW5']?(az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MIN_FILTER'],az['LINEAR']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MAG_FILTER'],az['LINEAR']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_S'],az['CLAMP_TO_EDGE']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_T'],az['CLAMP_TO_EDGE'])):(az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MIN_FILTER'],az['LINEAR']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MAG_FILTER'],az['LINEAR']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_S'],az['CLAMP_TO_EDGE']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_T'],az['CLAMP_TO_EDGE']));aL['push'](aS);}let aM=![],aN=null,aO=null;if(aM){aO=az['createTexture'](),az['bindTexture'](az['TEXTURE_2D'],aO),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MIN_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MAG_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_S'],az['CLAMP_TO_EDGE']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_T'],az['CLAMP_TO_EDGE']),az['texImage2D'](az['TEXTURE_2D'],0x0,az['DEPTH_COMPONENT16'],aJ,aK,0x0,az['DEPTH_COMPONENT'],az['UNSIGNED_SHORT'],null);let aT=[];for(let aU=0x0;aU<aE;aU++){aT[aU]=az['COLOR_ATTACHMENT0']+aU,az['framebufferTexture2D'](az['FRAMEBUFFER'],aT[aU],az['TEXTURE_2D'],aL[aU],0x0);}az['drawBuffers'](aT),az['framebufferTexture2D'](az['FRAMEBUFFER'],az['DEPTH_ATTACHMENT'],az['TEXTURE_2D'],aO,0x0);}else{aN=az['createRenderbuffer'](),az['bindRenderbuffer'](az['RENDERBUFFER'],aN),az['renderbufferStorage'](az['RENDERBUFFER'],az['DEPTH_COMPONENT32F'],aJ,aK);let aV=[];for(let aW=0x0;aW<aE;aW++){aV[aW]=az['COLOR_ATTACHMENT0']+aW,az['framebufferTexture2D'](az['FRAMEBUFFER'],aV[aW],az['TEXTURE_2D'],aL[aW],0x0);}az['drawBuffers'](aV),az['framebufferRenderbuffer'](az['FRAMEBUFFER'],az['DEPTH_ATTACHMENT'],az['RENDERBUFFER'],aN);}if(c['DEBUG']){let aX=az['checkFramebufferStatus'](az['FRAMEBUFFER']);aX!==0x8cd5&&console['log']('[VIZCore]\x20Buffer\x20Create\x20Failed.');}az['bindFramebuffer'](az['FRAMEBUFFER'],null);let aP=c['Data']['FrameBufferDataItem']();aP['itemType']=aA,aP['framebufferID']=aI,aP['targetTexture']=aL,aP['targetDepth']=aN,aP['targetDepthTexture']=aO,aP['width']=aJ,aP['height']=aK,aP['multiplier']=aD,aP['sizeLock']=aF,aP['texStorageType']=aG,k['set'](aA,aP);}function ay(az,aA,aB,aC,aD,aE,aF,aG){const aH=az['createFramebuffer']();az['bindFramebuffer'](az['FRAMEBUFFER'],aH);let aI=aB*aD,aJ=aC*aD;if(aG===undefined){aG=[];for(let aO=0x0;aO<aE;aO++){aG[aO]=az['RGBA'];}}let aK=[];for(let aP=0x0;aP<aE;aP++){const aQ=az['createTexture']();az['bindTexture'](az['TEXTURE_2D'],aQ),az['texImage2D'](az['TEXTURE_2D'],0x0,az['RGBA'],aI,aJ,0x0,az['RGBA'],az['UNSIGNED_BYTE'],null),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MIN_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MAG_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_S'],az['CLAMP_TO_EDGE']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_T'],az['CLAMP_TO_EDGE']),aK['push'](aQ),az['bindTexture'](az['TEXTURE_2D'],null);}const aL=az['createRenderbuffer']();az['bindRenderbuffer'](az['RENDERBUFFER'],aL),az['renderbufferStorage'](az['RENDERBUFFER'],az['DEPTH_COMPONENT16'],aI,aJ);let aM=null;if(m){aM=az['createTexture'](),az['bindTexture'](az['TEXTURE_2D'],aM),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MIN_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_MAG_FILTER'],az['NEAREST']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_S'],az['CLAMP_TO_EDGE']),az['texParameteri'](az['TEXTURE_2D'],az['TEXTURE_WRAP_T'],az['CLAMP_TO_EDGE']),az['texImage2D'](az['TEXTURE_2D'],0x0,az['DEPTH_COMPONENT'],aI,aJ,0x0,az['DEPTH_COMPONENT'],az['UNSIGNED_SHORT'],null);let aR=[];for(let aS=0x0;aS<aE;aS++){aR[aS]=az['COLOR_ATTACHMENT0']+aS,az['framebufferTexture2D'](az['FRAMEBUFFER'],aR[aS],az['TEXTURE_2D'],aK[aS],0x0);}az['drawBuffers'](aR),az['framebufferTexture2D'](az['FRAMEBUFFER'],az['DEPTH_ATTACHMENT'],az['TEXTURE_2D'],aM,0x0);}else{let aT=[];for(let aU=0x0;aU<aE;aU++){aT[aU]=az['COLOR_ATTACHMENT0']+aU,az['framebufferTexture2D'](az['FRAMEBUFFER'],aT[aU],az['TEXTURE_2D'],aK[aU],0x0);}az['drawBuffers'](aT),az['framebufferRenderbuffer'](az['FRAMEBUFFER'],az['DEPTH_ATTACHMENT'],az['RENDERBUFFER'],aL);}if(c['DEBUG']){let aV=az['checkFramebufferStatus'](az['FRAMEBUFFER']);aV!==0x8cd5&&console['log']('[VIZCore]\x20Buffer\x20Create\x20Failed.');}az['bindFramebuffer'](az['FRAMEBUFFER'],null);let aN=c['Data']['FrameBufferDataItem']();aN['itemType']=aA,aN['framebufferID']=aH,aN['targetTexture']=aK,aN['targetDepth']=aL,aN['targetDepthTexture']=aM,aN['width']=aI,aN['height']=aJ,aN['multiplier']=aD,aN['sizeLock']=aF,aN['texStorageType']=aG,k['set'](aA,aN);}(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['UI'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['UI'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],p,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['SELECTED'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['SELECTED'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['AFTEREFFECT'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['AFTEREFFECT'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['MODELAFTER'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['MODELAFTER'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['PICK'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['PICK'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['PRESELECT'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['PRESELECT'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['COLOROBJECT'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['COLOROBJECT'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['COLORCUSTOMOBJECT'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['COLORCUSTOMOBJECT'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['COLOROBJECTGROUP'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['COLOROBJECTGROUP'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['CUSTOM_EDGE'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['CUSTOM_EDGE'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['AVATAROBJECT'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['AVATAROBJECT'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['CUSTOMAFTEREFFECT'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['CUSTOMAFTEREFFECT'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['CUSTOM1024'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['CUSTOM1024'],0x400,0x400,0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['CANVASGL'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['CANVASGL'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);if(c['useWebGL2']){(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['DEPTH'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['DEPTH'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['PREPROCESSING'])&&ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSING'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,0x4,![],[c['gl']['RGBA8'],c['gl']['RGBA32F'],c['gl']['RGBA32F'],c['gl']['RGBA8']]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['PREPROCESSING_DISABLE_DEPTH'])&&ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSING_DISABLE_DEPTH'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,0x4,![],[c['gl']['RGBA8'],c['gl']['RGBA16F'],c['gl']['RGBA16F'],c['gl']['RGBA8']]);if(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW']){if(f())ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW'],0x400,0x400,0x1,0x1,!![],[c['gl']['RGBA16F']]);else ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW'],0x800,0x800,0x1,0x1,!![],[c['gl']['RGBA16F']]);}if(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW2']){if(f())ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW2'],0x200,0x200,0x1,0x1,!![],[c['gl']['RGBA16F']]);else ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW2'],0x400,0x400,0x1,0x1,!![],[c['gl']['RGBA16F']]);}if(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW3']){if(f())ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW3'],0x200,0x200,0x1,0x1,!![],[c['gl']['RGBA16F']]);else ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW3'],0x400,0x400,0x1,0x1,!![],[c['gl']['RGBA16F']]);}if(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW4']){if(f())ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW4'],0x200,0x200,0x1,0x1,!![],[c['gl']['RGBA16F']]);else ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW4'],0x200,0x200,0x1,0x1,!![],[c['gl']['RGBA16F']]);}if(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW5']){if(f())ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW5'],0x200,0x200,0x1,0x1,!![],[c['gl']['RGBA16F']]);else ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW5'],0x200,0x200,0x1,0x1,!![],[c['gl']['RGBA16F']]);}(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['SSS'])&&ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['SSS'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,0x1,![],[c['gl']['RGBA16F']]),(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['SSAO'])&&ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['SSAO'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,0x1,![],[c['gl']['RGBA16F']]),(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['CUSTOM'])&&ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['CUSTOM'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,0x1,![]),(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['CUSTOM2'])&&ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['CUSTOM2'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,0x1,![]),(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'])&&ax(c['gl'],d['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],p,0x1,![]),r?(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['MAIN'])&&aw(c['gl'],d['Enum']['FB_RENDER_TYPES']['MAIN'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1):(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['MAIN'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['MAIN'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],p,![]);}else(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['MAIN'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['MAIN'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],p,![]),(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['DEPTH'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['DEPTH'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]),(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['NORMAL'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['NORMAL'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]),(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['POSITION'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['POSITION'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]),(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['CUSTOM'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['CUSTOM'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]),(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['CUSTOM2'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['CUSTOM2'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]),(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],p,![]);(au===undefined||au===d['Enum']['FB_RENDER_TYPES']['END'])&&av(c['gl'],d['Enum']['FB_RENDER_TYPES']['END'],c['Camera']['clientWidth'],c['Camera']['clientHeight'],0x1,![]);};this['RemoveCameraFrmaeBuffer']=function(au){let av=function(aw,ax,ay){if(aw===undefined)return;ad(aw),c['gl']['deleteFramebuffer'](aw['framebufferID']);};l[au]['forEach'](av),l['splice'](au,0x1);},this['InitCanvas']=function(){ae();},this['ReleaseCanvas']=function(){for(let au=l['length']-0x1;au>=0x0;au--){g['RemoveCameraFrmaeBuffer'](au);}a1!==null&&c['gl']['deleteTexture'](a1);a1=null;a2!==null&&c['gl']['deleteTexture'](a2);a2=null;Q!==undefined&&(c['gl']['deleteTexture'](Q),Q=undefined);S!==undefined&&(c['gl']['deleteTexture'](S),S=undefined,R=![]);U!==undefined&&(c['gl']['deleteTexture'](U),U=undefined,T=![]);W!==undefined&&(c['gl']['deleteTexture'](W),W=undefined,V=![]);Y!==undefined&&(c['gl']['deleteTexture'](Y),Y=undefined,X=![]);Z!==undefined&&(c['gl']['deleteTexture'](Z),Z=undefined);a0!==undefined&&(c['gl']['deleteTexture'](a0),a0=undefined);M!==undefined&&c['gl']['deleteTexture'](M);for(let av=0x0;av<s['length'];av++){if(s[av]===null)continue;c['gl']['deleteTexture'](s[av]),s[av]=null;}t!==null&&(c['gl']['deleteTexture'](t),t=null),u!==null&&(c['gl']['deleteTexture'](u),u=null),v!==null&&(c['gl']['deleteTexture'](v),v=null),w=![],x=![],ag();},this['IsWebGLEXTDEPTH']=function(){return m;},this['ClearProcess']=function(){let au=function(av,aw,ax){c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],av['framebufferID']),c['gl']['clearColor'](0x0,0x0,0x0,0x0),c['gl']['clear'](c['gl']['COLOR_BUFFER_BIT']|c['gl']['DEPTH_BUFFER_BIT']),c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],null);};for(let av=0x0;av<l['length'];av++){l[av]['forEach'](au);}},this['SetSkyCubeTextureType']=function(au,av){{for(let aw=0x0;aw<s['length'];aw++){c['gl']['deleteTexture'](s[aw]),s[aw]=null;}u!==null&&(c['gl']['deleteTexture'](u),u=null),v!==null&&(c['gl']['deleteTexture'](v),v=null),w=![],x=![];}y=au,au>=0x0&&(z='',A=[]),au===-0xa&&(z=av[0x0]),au===-0x14&&(A=av);},ae(),this['CreateShaderData']=function(){g['CreateBRDF']();c['Renderer']['UseSkyTexture']()&&(v===null&&w===![]&&(w=!![],aq()));if(a1===null){a1=c['gl']['createTexture'](),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],a1);let au=new Uint8Array(0x2*0x2*0x4);for(let av=0x0;av<au['length'];av++)au[av]=0x0;c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA'],0x2,0x2,0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],au),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null);}if(a2===null){a2=c['gl']['createTexture'](),c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],a2),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']);let aw=new Uint8Array(0x2*0x2*0x4);for(let ax=0x0;ax<aw['length'];ax++)aw[ax]=0xff;for(let ay=0x0;ay<0x6;ay++){c['gl']['texImage2D'](B[ay],0x0,c['gl']['RGBA'],0x2,0x2,0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],aw);}c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],null);}if(!R){R=!![];let az=new Image();az['src']=g['DefaultTexture']['AlphaDot'],az['onload']=function(){S=c['gl']['createTexture'](),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],S),c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA'],c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],az),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null);},c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null);}if(!T){T=!![];let aA=new Image();aA['src']=g['DefaultTexture']['AlphaCloud'],aA['onload']=function(){U=c['gl']['createTexture'](),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],U),c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA'],c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],aA),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null);},c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null);}if(!V){V=!![];let aB=new Image();aB['src']=g['DefaultTexture']['AlphaMist'],aB['onload']=function(){W=c['gl']['createTexture'](),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],W),c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA'],c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],aB),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null);},c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null);}if(!X){X=!![];let aC=new Image();aC['src']=g['DefaultTexture']['AlphaRain'],aC['onload']=function(){Y=c['gl']['createTexture'](),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],Y),c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA'],c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],aC),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null);},c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null);}Z===undefined&&as();};function ag(){h['forEach'](function(au){c['gl']['deleteProgram'](au);}),h['clear']();}this['deletesTypeShader']=function(au){let av=h['get'](au);if(av!==undefined)c['gl']['deleteProgram'](av);h['delete'](au);};function ah(au){function av(aC,aD,aE,aF){const aG=aC['createShader'](aE);aC['shaderSource'](aG,aD),aC['compileShader'](aG);const aH=aC['getShaderParameter'](aG,aC['COMPILE_STATUS']);if(!aH){console['log']('shaderType\x20:\x20'+au);const aI=aC['getShaderInfoLog'](aG);return console['log']('***\x20Error\x20compiling\x20shader\x20\x27'+aG+'\x27:'+aI),aC['deleteShader'](aG),null;}return aG;}function aw(aC,aD,aE,aF,aG){const aH=[];for(let aI=0x0;aI<aD['length'];++aI){aH['push'](av(aC,aD[aI],aC[e[aI]],aG));}return ax(aC,aH,aE,aF,aG);}function ax(aC,aD,aE,aF,aG){const aH=c['gl']['createProgram']();aD['forEach'](function(aJ){c['gl']['attachShader'](aH,aJ);});aE&&aE['forEach'](function(aJ,aK){c['gl']['bindAttribLocation'](aH,aF?aF[aK]:aK,aJ);});c['gl']['linkProgram'](aH);let aI=!![];aI=c['gl']['getProgramParameter'](aH,c['gl']['LINK_STATUS']);if(!aI){const aJ=c['gl']['getProgramInfoLog'](aH);return c['gl']['deleteProgram'](aH),null;}return aH;}function ay(aC,aD,aE){let aF=[];for(let aG=0x0;aG<aC['length'];++aG){aF[aG]=aC[aG];}if(aD!==undefined)for(let aH=0x0;aH<aC['length'];++aH){let aI='';for(let aJ=0x0;aJ<aD['length'];++aJ){aI+='#define\x20'+aD[aJ]+'\x20\x0a';}aF[aH]=aI+aF[aH];}if(aE!==undefined&&aE>0x0){let aK='#version\x20'+aE+'\x20es\x0a';for(let aL=0x0;aL<aC['length'];++aL){aF[aL]=aK+aF[aL];}}return aF;}let az=[],aA=0x0;{c['useWebGL2']&&(aA=0x12c);if(c['Clipping']!==null)c['Clipping']['IsClipping']()&&az['push']('CLIPPLANE_BOX');C&&az['push']('SHADING_TRIPLANAR');g['UseHDR']&&(az['push']('SHADING_HDR'),c['DemoType']===0x6&&az['push']('SHADING_FURSYS_HDR'));{let aC=H-0x80;aC=Math['floor'](aC/0x4);let aD=aC%0x4;aC=aC-aD,I=aC,az['push']('MATRIXDATASCOUNT\x20'+I),D===!![]&&H-0x80>0x0&&(I>0x0&&az['push']('UPDATEMATRIXMANAGER'));}if(c['Renderer']!==null){c['Renderer']['GetEnvironmentMode']()&&az['push']('SHADING_ENVIRONMENT');if(c['Renderer']['GetCCShadowMode']()&&c['Renderer']['GetShadowMode']())az['push']('CC_SHADING_SHADOW');else c['Renderer']['GetShadowMode']()&&az['push']('SHADING_SHADOW');c['Renderer']['GetLogDepthMode']()&&c['Camera']['perspectiveView']&&az['push']('LOG_DEPTH'),c['Renderer']['GetEnableFog']()&&az['push']('SHADING_FOG'),c['Renderer']['GetFlatMode']()&&az['push']('SHADING_FLAT');}c['DemoType']===0x7&&az['push']('SHADING_UV_ANIMATION');}let aB=new a(c);(au===undefined||au===d['Enum']['SHADER_TYPES']['PHONG'])&&h['set'](d['Enum']['SHADER_TYPES']['PHONG'],aw(c['gl'],ay([aB['ShadingLanguage']['Basic']['vertex'],aB['ShadingLanguage']['Basic']['fragment']],az)));(au===undefined||au===d['Enum']['SHADER_TYPES']['PHONGUTIL'])&&h['set'](d['Enum']['SHADER_TYPES']['PHONGUTIL'],aw(c['gl'],[aB['ShadingLanguage']['BasicUtil']['vertex'],aB['ShadingLanguage']['BasicUtil']['fragment']]));(au===undefined||au===d['Enum']['SHADER_TYPES']['BASIC2DCOLOR'])&&h['set'](d['Enum']['SHADER_TYPES']['BASIC2DCOLOR'],aw(c['gl'],[aB['ShadingLanguage']['Basic2DColor']['vertex'],aB['ShadingLanguage']['Basic2DColor']['fragment']]));(au===undefined||au===d['Enum']['SHADER_TYPES']['FXAA'])&&h['set'](d['Enum']['SHADER_TYPES']['FXAA'],aw(c['gl'],[aB['ShadingLanguage']['FXAA']['vertex'],aB['ShadingLanguage']['FXAA']['fragment']]));(au===undefined||au===d['Enum']['SHADER_TYPES']['EDGE'])&&h['set'](d['Enum']['SHADER_TYPES']['EDGE'],aw(c['gl'],ay([aB['ShadingLanguage']['Edge']['vertex'],aB['ShadingLanguage']['Edge']['fragment']],az)));(au===undefined||au===d['Enum']['SHADER_TYPES']['BACKGROUND'])&&h['set'](d['Enum']['SHADER_TYPES']['BACKGROUND'],aw(c['gl'],[aB['ShadingLanguage']['Background']['vertex'],aB['ShadingLanguage']['Background']['fragment']]));(au===undefined||au===d['Enum']['SHADER_TYPES']['SKYBOX'])&&h['set'](d['Enum']['SHADER_TYPES']['SKYBOX'],aw(c['gl'],ay([aB['ShadingLanguage']['SkyBox']['vertex'],aB['ShadingLanguage']['SkyBox']['fragment']],az)));(au===undefined||au===d['Enum']['SHADER_TYPES']['PREFILTEREDENVIRONMENT'])&&h['set'](d['Enum']['SHADER_TYPES']['PREFILTEREDENVIRONMENT'],aw(c['gl'],[aB['ShadingLanguage']['PreFilteredEnvironment']['vertex'],aB['ShadingLanguage']['PreFilteredEnvironment']['fragment']]));(au===undefined||au===d['Enum']['SHADER_TYPES']['PERLINNOISE'])&&h['set'](d['Enum']['SHADER_TYPES']['PERLINNOISE'],aw(c['gl'],[aB['ShadingLanguage']['PerlinNoise']['vertex'],aB['ShadingLanguage']['PerlinNoise']['fragment']]));if(c['useWebGL2']){if(au===undefined||au===d['Enum']['SHADER_TYPES']['PBR']){if(c['DemoType']===0x6)h['set'](d['Enum']['SHADER_TYPES']['PBR'],aw(c['gl'],ay([aB['ShadingLanguage']['PBR_v2']['vertex'],aB['ShadingLanguage']['PBR_v2']['fragment']],az,aA)));else c['DemoType']===0x7?h['set'](d['Enum']['SHADER_TYPES']['PBR'],aw(c['gl'],ay([aB['ShadingLanguage']['PBR_v2']['vertex'],aB['ShadingLanguage']['PBR_v2']['fragment']],az,aA))):h['set'](d['Enum']['SHADER_TYPES']['PBR'],aw(c['gl'],ay([aB['ShadingLanguage']['PBR_v3']['vertex'],aB['ShadingLanguage']['PBR_v3']['fragment']],az,aA)));}(au===undefined||au===d['Enum']['SHADER_TYPES']['PICKING'])&&h['set'](d['Enum']['SHADER_TYPES']['PICKING'],aw(c['gl'],ay([aB['ShadingLanguage']['Picking']['vertex'],aB['ShadingLanguage']['Picking']['fragment']],az,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['BASIC2D'])&&h['set'](d['Enum']['SHADER_TYPES']['BASIC2D'],aw(c['gl'],ay([aB['ShadingLanguage']['Basic2D_v2']['vertex'],aB['ShadingLanguage']['Basic2D_v2']['fragment']],az,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['BASIC2DUTIL'])&&h['set'](d['Enum']['SHADER_TYPES']['BASIC2DUTIL'],aw(c['gl'],[aB['ShadingLanguage']['Basic2D']['vertex'],aB['ShadingLanguage']['Basic2D']['fragment']])),(au===undefined||au===d['Enum']['SHADER_TYPES']['BASIC3D'])&&h['set'](d['Enum']['SHADER_TYPES']['BASIC3D'],aw(c['gl'],ay([aB['ShadingLanguage']['Basic3D_v2']['vertex'],aB['ShadingLanguage']['Basic3D_v2']['fragment']],az,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['VCOLOR'])&&h['set'](d['Enum']['SHADER_TYPES']['VCOLOR'],aw(c['gl'],ay([aB['ShadingLanguage']['PBR_v4']['vertex'],aB['ShadingLanguage']['PBR_v4']['fragment']],az,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['VPICK'])&&h['set'](d['Enum']['SHADER_TYPES']['VPICK'],aw(c['gl'],ay([aB['ShadingLanguage']['Picking_v2']['vertex'],aB['ShadingLanguage']['Picking_v2']['fragment']],az,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['ANIMATIONPBR'])&&h['set'](d['Enum']['SHADER_TYPES']['ANIMATIONPBR'],aw(c['gl'],ay([aB['ShadingLanguage']['AnimationPBR']['vertex'],aB['ShadingLanguage']['AnimationPBR']['fragment']],az,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['ANIMATIONBASIC2D'])&&h['set'](d['Enum']['SHADER_TYPES']['ANIMATIONBASIC2D'],aw(c['gl'],ay([aB['ShadingLanguage']['AnimationBasic2D']['vertex'],aB['ShadingLanguage']['AnimationBasic2D']['fragment']],az,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['TEXTURE2D'])&&h['set'](d['Enum']['SHADER_TYPES']['TEXTURE2D'],aw(c['gl'],ay([aB['ShadingLanguage']['Texture2D']['vertex'],aB['ShadingLanguage']['Texture2D']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['TEXTURE2DCOLOR'])&&h['set'](d['Enum']['SHADER_TYPES']['TEXTURE2DCOLOR'],aw(c['gl'],ay([aB['ShadingLanguage']['Texture2DColor']['vertex'],aB['ShadingLanguage']['Texture2DColor']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['SSAO'])&&h['set'](d['Enum']['SHADER_TYPES']['SSAO'],aw(c['gl'],ay([aB['ShadingLanguage']['SSAO_v4']['vertex'],aB['ShadingLanguage']['SSAO_v4']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['TEXTURE2D_SSAO'])&&h['set'](d['Enum']['SHADER_TYPES']['TEXTURE2D_SSAO'],aw(c['gl'],ay([aB['ShadingLanguage']['Texture2D_SSAO_v2']['vertex'],aB['ShadingLanguage']['Texture2D_SSAO_v2']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['BLUR'])&&h['set'](d['Enum']['SHADER_TYPES']['BLUR'],aw(c['gl'],[aB['ShadingLanguage']['Blur']['vertex'],aB['ShadingLanguage']['Blur']['fragment']])),(au===undefined||au===d['Enum']['SHADER_TYPES']['BRDF'])&&h['set'](d['Enum']['SHADER_TYPES']['BRDF'],aw(c['gl'],ay([aB['ShadingLanguage']['BRDF']['vertex'],aB['ShadingLanguage']['BRDF']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['IRRADIANCEENVIRONMENT'])&&h['set'](d['Enum']['SHADER_TYPES']['IRRADIANCEENVIRONMENT'],aw(c['gl'],ay([aB['ShadingLanguage']['IrradianceEnvironment']['vertex'],aB['ShadingLanguage']['IrradianceEnvironment']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['EQUIRECTANGULARSKYBOX'])&&h['set'](d['Enum']['SHADER_TYPES']['EQUIRECTANGULARSKYBOX'],aw(c['gl'],ay([aB['ShadingLanguage']['EquirectangularSkyBox']['vertex'],aB['ShadingLanguage']['EquirectangularSkyBox']['fragment']],undefined,aA))),(au===undefined||au==d['Enum']['SHADER_TYPES']['OCEAN'])&&h['set'](d['Enum']['SHADER_TYPES']['OCEAN'],aw(c['gl'],ay([aB['ShadingLanguage']['Ocean']['vertex'],aB['ShadingLanguage']['Ocean']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['VOLUMETRIC'])&&h['set'](d['Enum']['SHADER_TYPES']['VOLUMETRIC'],aw(c['gl'],ay([aB['ShadingLanguage']['Volumetric']['vertex'],aB['ShadingLanguage']['Volumetric']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['HORIZONCLOUDS'])&&h['set'](d['Enum']['SHADER_TYPES']['HORIZONCLOUDS'],aw(c['gl'],ay([aB['ShadingLanguage']['HorizonClouds']['vertex'],aB['ShadingLanguage']['HorizonClouds']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['WORLDY3D'])&&h['set'](d['Enum']['SHADER_TYPES']['WORLDY3D'],aw(c['gl'],ay([aB['ShadingLanguage']['Worldy3D']['vertex'],aB['ShadingLanguage']['Worldy3D']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['BMFONT'])&&h['set'](d['Enum']['SHADER_TYPES']['BMFONT'],aw(c['gl'],ay([aB['ShadingLanguage']['BMFont']['vertex'],aB['ShadingLanguage']['BMFont']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['SSS'])&&h['set'](d['Enum']['SHADER_TYPES']['SSS'],aw(c['gl'],ay([aB['ShadingLanguage']['SSS']['vertex'],aB['ShadingLanguage']['SSS']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['RT'])&&h['set'](d['Enum']['SHADER_TYPES']['RT'],aw(c['gl'],ay([aB['ShadingLanguage']['RayTest']['vertex'],aB['ShadingLanguage']['RayTest']['fragment']],undefined,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['ORBIT'])&&h['set'](d['Enum']['SHADER_TYPES']['ORBIT'],aw(c['gl'],ay([aB['ShadingLanguage']['Orbit']['vertex'],aB['ShadingLanguage']['Orbit']['fragment']],undefined,aA)));}else(au===undefined||au===d['Enum']['SHADER_TYPES']['PBR'])&&h['set'](d['Enum']['SHADER_TYPES']['PBR'],aw(c['gl'],ay([aB['ShadingLanguage']['PBR']['vertex'],aB['ShadingLanguage']['PBR']['fragment']],az))),(au===undefined||au===d['Enum']['SHADER_TYPES']['ANIMATIONPBR'])&&h['set'](d['Enum']['SHADER_TYPES']['ANIMATIONPBR'],aw(c['gl'],ay([aB['ShadingLanguage']['AnimationPBR']['vertex'],aB['ShadingLanguage']['AnimationPBR']['fragment']],az))),(au===undefined||au===d['Enum']['SHADER_TYPES']['ANIMATIONBASIC2D'])&&h['set'](d['Enum']['SHADER_TYPES']['ANIMATIONBASIC2D'],aw(c['gl'],ay([aB['ShadingLanguage']['AnimationBasic2D']['vertex'],aB['ShadingLanguage']['AnimationBasic2D']['fragment']],az))),(au===undefined||au===d['Enum']['SHADER_TYPES']['TEXTURE2D'])&&h['set'](d['Enum']['SHADER_TYPES']['TEXTURE2D'],aw(c['gl'],[aB['ShadingLanguage']['Texture2D']['vertex'],aB['ShadingLanguage']['Texture2D']['fragment']])),(au===undefined||au===d['Enum']['SHADER_TYPES']['PICKING'])&&h['set'](d['Enum']['SHADER_TYPES']['PICKING'],aw(c['gl'],ay([aB['ShadingLanguage']['Picking']['vertex'],aB['ShadingLanguage']['Picking']['fragment']],az))),(au===undefined||au===d['Enum']['SHADER_TYPES']['BASIC2D'])&&h['set'](d['Enum']['SHADER_TYPES']['BASIC2D'],aw(c['gl'],[aB['ShadingLanguage']['Basic2D']['vertex'],aB['ShadingLanguage']['Basic2D']['fragment']])),(au===undefined||au===d['Enum']['SHADER_TYPES']['BASIC2DUTIL'])&&h['set'](d['Enum']['SHADER_TYPES']['BASIC2DUTIL'],aw(c['gl'],[aB['ShadingLanguage']['Basic2D']['vertex'],aB['ShadingLanguage']['Basic2D']['fragment']])),(au===undefined||au===d['Enum']['SHADER_TYPES']['BASIC3D'])&&h['set'](d['Enum']['SHADER_TYPES']['BASIC3D'],aw(c['gl'],[aB['ShadingLanguage']['Basic3D']['vertex'],aB['ShadingLanguage']['Basic3D']['fragment']])),(au===undefined||au===d['Enum']['SHADER_TYPES']['SSAO'])&&h['set'](d['Enum']['SHADER_TYPES']['SSAO'],aw(c['gl'],[aB['ShadingLanguage']['SSAO_v3']['vertex'],aB['ShadingLanguage']['SSAO_v3']['fragment']])),(au===undefined||au===d['Enum']['SHADER_TYPES']['TEXTURE2D_SSAO'])&&h['set'](d['Enum']['SHADER_TYPES']['TEXTURE2D_SSAO'],aw(c['gl'],[aB['ShadingLanguage']['Texture2D_SSAO']['vertex'],aB['ShadingLanguage']['Texture2D_SSAO']['fragment']])),(au===undefined||au===d['Enum']['SHADER_TYPES']['TEXTURE2DCOLOR'])&&h['set'](d['Enum']['SHADER_TYPES']['TEXTURE2DCOLOR'],aw(c['gl'],[aB['ShadingLanguage']['Texture2DColor']['vertex'],aB['ShadingLanguage']['Texture2DColor']['fragment']]));c['useWebGL2']?((au===undefined||au===d['Enum']['SHADER_TYPES']['PREPROCESSING'])&&h['set'](d['Enum']['SHADER_TYPES']['PREPROCESSING'],aw(c['gl'],ay([aB['ShadingLanguage']['Preprocessing_v2']['vertex'],aB['ShadingLanguage']['Preprocessing_v2']['fragment']],az,aA))),(au===undefined||au===d['Enum']['SHADER_TYPES']['PREPROCESSINGSHADOW'])&&h['set'](d['Enum']['SHADER_TYPES']['PREPROCESSINGSHADOW'],aw(c['gl'],ay([aB['ShadingLanguage']['PreprocessingShadow']['vertex'],aB['ShadingLanguage']['PreprocessingShadow']['fragment']],az,aA)))):((au===undefined||au===d['Enum']['SHADER_TYPES']['DEPTH'])&&h['set'](d['Enum']['SHADER_TYPES']['DEPTH'],aw(c['gl'],ay([aB['ShadingLanguage']['Depth']['vertex'],aB['ShadingLanguage']['Depth']['fragment']],az))),(au===undefined||au===d['Enum']['SHADER_TYPES']['NORMAL'])&&h['set'](d['Enum']['SHADER_TYPES']['NORMAL'],aw(c['gl'],[aB['ShadingLanguage']['Normal']['vertex'],aB['ShadingLanguage']['Normal']['fragment']])),(au===undefined||au===d['Enum']['SHADER_TYPES']['POSITION'])&&h['set'](d['Enum']['SHADER_TYPES']['POSITION'],aw(c['gl'],[aB['ShadingLanguage']['Position']['vertex'],aB['ShadingLanguage']['Position']['fragment']])));}this['UpdateShader']=function(){if(!g['EnableUpdateShader'])return;ag();},this['DrawInitShaderUniformData']=function(){if(g['currentShaderType']===d['Enum']['SHADER_TYPES']['PBR']||g['currentShaderType']===d['Enum']['SHADER_TYPES']['VCOLOR']){if(c['Renderer']['GetShadowMode']()){let au=j['get']('u_ShadowRatio');if(au!==null){let av=c['Renderer']['GetShadowRatio']();c['gl']['uniform1f'](au,Math['max'](0x1-av,0x0));}}}},this['DrawInitShaderTextureData']=function(){if(g['currentProgram']===undefined)return;if(g['currentShaderType']===d['Enum']['SHADER_TYPES']['PBR']||g['currentShaderType']===d['Enum']['SHADER_TYPES']['VCOLOR']){g['SetGLBRDFData']();if(c['Renderer']['GetShadowMode']()){if(c['Camera']['matShadowMV']!==undefined&&c['Camera']['matShadowProjection']!==undefined){let aw=new d['Matrix4']()['copy'](c['Camera']['matShadowMV']);const ax=new d['Matrix4']()['multiplyMatrices'](c['Camera']['matShadowProjection'],aw);c['Shader']['SetCustomMatrix']('u_MVPShadowMatrix',ax),c['Shader']['SetCustomMatrix']('u_ProjectionShadowMatrix',c['Camera']['matShadowProjection']);let ay=c['Shader']['GetPositionTexture'](0xa);c['Shader']['SetCurrentTexture']('uShadowPositionTexture',c['gl']['TEXTURE_2D'],ay['texture']);let az=j['get']('uBias');az&&c['gl']['uniform1f'](az,-0.001);}}if(c['Renderer']['GetCCShadowMode']()&&c['Renderer']['GetShadowMode']()){if(c['Camera']['matShadowMV1']){let aB=new d['Matrix4']()['copy'](c['Camera']['viewMatrix']);c['Shader']['SetCustomMatrix']('u_Vmatrix',aB);let aC=c['Camera']['far']*1.5;const aD=[0x4e20,0xc350,0x30d40,0xf4240];let aE=j['get']('cascadePlaneDistances[0]');aE&&c['gl']['uniform1fv'](aE,new Float32Array(aD));let aF=new d['Matrix4']()['copy'](c['Camera']['matShadowMV1']);const aG=new d['Matrix4']()['multiplyMatrices'](c['Camera']['matShadowProjection1'],aF);c['Shader']['SetCustomMatrix']('u_MVPShadowMatrix1',aG),c['Shader']['SetCustomMatrix']('u_ProjectionShadowMatrix1',c['Camera']['matShadowProjection1']);let aH=c['Shader']['GetPositionTexture'](0xa);c['Shader']['SetCurrentTexture']('uShadowPositionTexture1',c['gl']['TEXTURE_2D'],aH['texture']),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null);}if(c['Camera']['matShadowMV2']!==undefined){let aI=new d['Matrix4']()['copy'](c['Camera']['matShadowMV2']);const aJ=new d['Matrix4']()['multiplyMatrices'](c['Camera']['matShadowProjection2'],aI);c['Shader']['SetCustomMatrix']('u_MVPShadowMatrix2',aJ),c['Shader']['SetCustomMatrix']('u_ProjectionShadowMatrix2',c['Camera']['matShadowProjection2']);let aK=c['Shader']['GetPositionTexture'](0xb);c['Shader']['SetCurrentTexture']('uShadowPositionTexture2',c['gl']['TEXTURE_2D'],aK['texture']);}if(c['Camera']['matShadowMV3']!==undefined){let aL=new d['Matrix4']()['copy'](c['Camera']['matShadowMV3']);const aM=new d['Matrix4']()['multiplyMatrices'](c['Camera']['matShadowProjection3'],aL);c['Shader']['SetCustomMatrix']('u_MVPShadowMatrix3',aM),c['Shader']['SetCustomMatrix']('u_ProjectionShadowMatrix3',c['Camera']['matShadowProjection3']);let aN=c['Shader']['GetPositionTexture'](0xc);c['Shader']['SetCurrentTexture']('uShadowPositionTexture3',c['gl']['TEXTURE_2D'],aN['texture']);}if(c['Camera']['matShadowMV4']!==undefined){let aO=new d['Matrix4']()['copy'](c['Camera']['matShadowMV4']);const aP=new d['Matrix4']()['multiplyMatrices'](c['Camera']['matShadowProjection4'],aO);c['Shader']['SetCustomMatrix']('u_MVPShadowMatrix4',aP),c['Shader']['SetCustomMatrix']('u_ProjectionShadowMatrix4',c['Camera']['matShadowProjection4']);let aQ=c['Shader']['GetPositionTexture'](0xd);c['Shader']['SetCurrentTexture']('uShadowPositionTexture4',c['gl']['TEXTURE_2D'],aQ['texture']);}if(c['Camera']['matShadowMV5']!==undefined){let aR=new d['Matrix4']()['copy'](c['Camera']['matShadowMV5']);const aS=new d['Matrix4']()['multiplyMatrices'](c['Camera']['matShadowProjection5'],aR);c['Shader']['SetCustomMatrix']('u_MVPShadowMatrix5',aS),c['Shader']['SetCustomMatrix']('u_ProjectionShadowMatrix5',c['Camera']['matShadowProjection5']);let aT=c['Shader']['GetPositionTexture'](0xe);c['Shader']['SetCurrentTexture']('uShadowPositionTexture5',c['gl']['TEXTURE_2D'],aT['texture']);}let aA=j['get']('uBias');aA&&c['gl']['uniform1f'](aA,-0.001);}}else{if(g['currentShaderType']===d['Enum']['SHADER_TYPES']['VOLUMETRIC'])Z!==undefined&&g['SetGLPerlinNoise']();else g['currentShaderType']===d['Enum']['SHADER_TYPES']['HORIZONCLOUDS']&&(Z!==undefined&&g['SetGLPerlinNoise']());}let au=j['get']('ubUsePrevDpeth');if(au!==undefined)c['gl']['uniform1i'](au,0x0);let av=j['get']('ubUseGraySacle');if(av!==undefined)c['gl']['uniform1i'](av,c['Renderer']['GetGraySacleMode']());};function ai(au){if(c['Renderer']['UseSkyTexture']()){if(au===d['Enum']['SHADER_TYPES']['PBR']||au===d['Enum']['SHADER_TYPES']['SKYBOX']||au===d['Enum']['SHADER_TYPES']['ANIMATIONPBR']||au===d['Enum']['SHADER_TYPES']['VCOLOR']){if(v===null&&x===![])return![];}if(au===d['Enum']['SHADER_TYPES']['PREFILTEREDENVIRONMENT']||au===d['Enum']['SHADER_TYPES']['EQUIRECTANGULARSKYBOX']){if(v===null)return![];}}return!![];}this['BeginShader']=function(au){let av=h['get'](au);if(av===undefined){ah(au),av=h['get'](au);if(av===undefined)return![];}if(ai(au)===![])return![];g['currentShaderType']=au,g['currentProgram']=av,c['gl']['useProgram'](g['currentProgram']);const aw=c['gl']['getProgramParameter'](av,c['gl']['ACTIVE_UNIFORMS']);for(let ax=0x0;ax<aw;++ax){const ay=c['gl']['getActiveUniform'](av,ax);let az=c['gl']['getUniformLocation'](c['Shader']['currentProgram'],ay['name']);j['set'](ay['name'],az);}{g['positionAttributeLocation']=c['gl']['getAttribLocation'](g['currentProgram'],'a_position');if(g['positionAttributeLocation']>=0x0)c['gl']['enableVertexAttribArray'](g['positionAttributeLocation']);g['normalAttributeLocation']=c['gl']['getAttribLocation'](g['currentProgram'],'a_normal');if(g['normalAttributeLocation']>=0x0)c['gl']['enableVertexAttribArray'](g['normalAttributeLocation']);g['colorAttributeLocation']=c['gl']['getAttribLocation'](g['currentProgram'],'a_color');if(g['colorAttributeLocation']>=0x0)c['gl']['enableVertexAttribArray'](g['colorAttributeLocation']);g['tindAttributeLocation']=c['gl']['getAttribLocation'](g['currentProgram'],'a_tInd');if(g['tindAttributeLocation']>=0x0)c['gl']['enableVertexAttribArray'](g['tindAttributeLocation']);g['uvAttributeLocation']=c['gl']['getAttribLocation'](g['currentProgram'],'a_uv');if(g['uvAttributeLocation']>=0x0)c['gl']['enableVertexAttribArray'](g['uvAttributeLocation']);g['updateMatrixAttributeLocation']=c['gl']['getAttribLocation'](g['currentProgram'],'a_matrixIdx');if(g['updateMatrixAttributeLocation']>=0x0){c['gl']['disableVertexAttribArray'](g['updateMatrixAttributeLocation']);let aA=j['get']('ubUseMatrixDatas');c['gl']['uniform1i'](aA,![]);}g['subBipedIdxAttributeLocation']=c['gl']['getAttribLocation'](g['currentProgram'],'a_bipedIdx'),g['subBipedIdxAttributeLocation']>=0x0&&c['gl']['enableVertexAttribArray'](g['subBipedIdxAttributeLocation']),g['subBipedWeightAttributeLocation']=c['gl']['getAttribLocation'](g['currentProgram'],'a_bipedWeight'),g['subBipedWeightAttributeLocation']>=0x0&&c['gl']['enableVertexAttribArray'](g['subBipedWeightAttributeLocation']);}return g['DrawInitShaderUniformData'](),!![];},this['DisableAttribute']=function(au){c['gl']['disableVertexAttribArray'](au);},this['EndShader']=function(){g['currentProgram']=undefined,g['currentShaderType']=undefined,g['currentMaterial']=-0x1;if(g['positionAttributeLocation']>=0x0)c['gl']['disableVertexAttribArray'](g['positionAttributeLocation']);if(g['normalAttributeLocation']>=0x0)c['gl']['disableVertexAttribArray'](g['normalAttributeLocation']);if(g['colorAttributeLocation']>=0x0)c['gl']['disableVertexAttribArray'](g['colorAttributeLocation']);if(g['tindAttributeLocation']>=0x0)c['gl']['disableVertexAttribArray'](g['tindAttributeLocation']);if(g['uvAttributeLocation']>=0x0)c['gl']['disableVertexAttribArray'](g['uvAttributeLocation']);if(g['updateMatrixAttributeLocation']>=0x0)c['gl']['disableVertexAttribArray'](g['updateMatrixAttributeLocation']);if(g['subBipedIdxAttributeLocation']>=0x0)c['gl']['disableVertexAttribArray'](g['subBipedIdxAttributeLocation']);if(g['subBipedIdxAttributeLocation']>=0x0)c['gl']['disableVertexAttribArray'](g['subBipedIdxAttributeLocation']);g['subBipedWeightAttributeLocation']>=0x0&&c['gl']['disableVertexAttribArray'](g['subBipedWeightAttributeLocation']),g['positionAttributeLocation']=-0x1,g['normalAttributeLocation']=-0x1,g['colorAttributeLocation']=-0x1,g['uvAttributeLocation']=-0x1,g['tindAttributeLocation']=-0x1,g['subBipedIdxAttributeLocation']=-0x1,g['subBipedWeightAttributeLocation']=-0x1,c['gl']['bindBuffer'](c['gl']['ARRAY_BUFFER'],null),c['gl']['bindBuffer'](c['gl']['ELEMENT_ARRAY_BUFFER'],null),i=[],g['updateMatrixAttributeLocation']=-0x1,J=undefined,K=-0x1,c['gl']['activeTexture'](c['gl']['TEXTURE0']),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],null),j['clear']();},this['SetMatrix']=function(au,av){if(g['currentProgram']===undefined)return;c['gl']['uniformMatrix4fv'](j['get']('u_MVPmatrix'),![],au['elements']);if(av!==undefined){let aw=j['get']('u_MVmatrix');aw!==undefined&&c['gl']['uniformMatrix4fv'](aw,![],av['elements']);let ax=j['get']('u_NormalPmatrix');if(ax!==undefined){let az=new d['Matrix4']()['copy'](av);az['setPosition'](new d['Vector3']()),c['gl']['uniformMatrix4fv'](ax,![],az['elements']);}let ay=j['get']('u_IMVmatrix');if(ay!==undefined){let aA=new d['Matrix4']()['copy'](av);aA=new d['Matrix4']()['getInverse'](aA),aA['transpose'](),c['gl']['uniformMatrix4fv'](ay,![],aA['elements']);}if(c['Renderer']['GetEnableFog']()){let aB=j['get']('u_fogColor');if(aB!==undefined){let aC=c['Renderer']['GetFogColor'](),aD=aC['glColor']();c['gl']['uniform4f'](aB,aD['r'],aD['g'],aD['b'],aD['a']);let aE=j['get']('u_fogNear'),aF=j['get']('u_fogFar'),aG=c['Renderer']['GetFogNearFar']();c['gl']['uniform1f'](aE,aG[0x0]),c['gl']['uniform1f'](aF,aG[0x1]);if(c['DemoType']===0x7){let aH=j['get']('u_fogCenter'),aI=new d['Vector3'](0x8bd,0x18f1c,-0x320);aI=av['multiplyVector'](aI),c['gl']['uniform3f'](aH,aI['x'],aI['y'],aI['z']);}else{let aJ=j['get']('u_fogCenter'),aK=undefined,aL=c['Renderer']['GetFogCenter']();aL===undefined?aK=new d['Vector3']()['copy'](c['Data']['GetBBox']()['center']):aK=new d['Vector3']()['copy'](aL),aK=av['multiplyVector'](aK),c['gl']['uniform3f'](aJ,aK['x'],aK['y'],aK['z']);}}}}},this['SetMVPMatrix']=function(au,av,aw){if(g['currentProgram']===undefined)return;let ax=j['get']('u_Pmatrix');c['gl']['uniformMatrix4fv'](ax,![],aw['elements']);let ay=j['get']('u_Vmatrix');c['gl']['uniformMatrix4fv'](ay,![],av['elements']);let az=j['get']('u_IVmatrix');c['gl']['uniformMatrix4fv'](az,![],new d['Matrix4']()['getInverse'](av)['elements']);let aA=j['get']('u_Mmatrix');c['gl']['uniformMatrix4fv'](aA,![],au['elements']);let aB=j['get']('u_Imatrix');if(aB!==undefined){let aC=new d['Matrix4']()['copy'](au);aC['multiply'](av),aC=new d['Matrix4']()['getInverse'](aC),c['gl']['uniformMatrix4fv'](aB,!![],aC['elements']);}},this['SetCustomMatrix']=function(au,av){if(g['currentProgram']===undefined)return;if(av===undefined)return;let aw=j['get'](au);aw!==undefined&&c['gl']['uniformMatrix4fv'](aw,![],av['elements']);},this['SetGLColor']=function(au,av,aw,ax){if(g['currentProgram']===undefined)return;let ay=j['get']('u_color');c['gl']['uniform4f'](ay,au,av,aw,ax);},this['SetGLAlpha']=function(au){let av=j['get']('u_alpha');c['gl']['uniform1f'](av,au);},this['SetGLSelectMode']=function(au){let av=j['get']('u_select');c['gl']['uniform1f'](av,au);},this['SetGLIsolate']=function(au){let av=j['get']('u_isolate');c['gl']['uniform1f'](av,au);},this['SetClipping']=function(au){if(g['currentProgram']===undefined)return;if(au===undefined){for(let aB=0x1;aB<=0x6;++aB){let aC=j['get']('vIS'+aB+'Plane');if(aC===null)break;c['gl']['uniform4f'](aC,0x0,0x0,0x0,0x1);}return;}let av=c['Clipping']['Get']();if(av===undefined)return;let aw=0x6;switch(av['itemType']){case d['Enum']['CLIPPING_MODES']['X']:aw=0x1;break;case d['Enum']['CLIPPING_MODES']['Y']:aw=0x1;break;case d['Enum']['CLIPPING_MODES']['Z']:aw=0x1;break;}let ax=new d['Matrix4']()['copy'](au);ax['setPosition'](new d['Vector3']());let ay=0x0,az,aA;for(let aD=0x1;aD<=0x6;++aD){let aE=j['get']('vIS'+aD+'Plane');if(aE===null)break;if(av['planes']['length']===0x0)break;let aF,aG;ay<av['planes']['length']?(aF=new d['Vector3']()['copy'](av['planes'][ay]['normal']),aF['applyMatrix4'](ax),aG=new d['Vector3']()['copy'](av['planes'][ay]['center']),aG['applyMatrix4'](au),ay++):(aF=az,aG=aA);let aH=new d['Plane']()['setFromNormalAndCoplanarPoint'](aF,aG);c['gl']['uniform4f'](aE,aH['normal']['x'],aH['normal']['y'],aH['normal']['z'],aH['constant']*1.0001),az=aF,aA=aG;}},this['SetGLMaterial']=function(au){if(g['currentProgram']===undefined)return;if(g['currentMaterial']>=0x0&&g['currentMaterial']===au)return;au!==g['currentMaterial']&&(i=[]);g['currentMaterial']=au;let av=c['Material']['GetMaterial'](au);g['DrawInitShaderTextureData']();if(av===undefined){let aP=j['get']('fRoughness');if(aP!==null)c['gl']['uniform1f'](aP,0.5);let aQ=j['get']('fMetallic');if(aQ!==null)c['gl']['uniform1f'](aQ,0.1);let aR=j['get']('uTiling');if(aR!==undefined)c['gl']['uniform2f'](aR,0x0,0x0);let aS=j['get']('uOffset');if(aS!==undefined)c['gl']['uniform2f'](aS,0x0,0x0);if(!![]){let aU=j['get']('useTexture');c['gl']['uniform1i'](aU,0x0),g['SetCurrentTexture']('u_Texture',c['gl']['TEXTURE_2D'],a1);let aV=j['get']('useTextureNormal');c['gl']['uniform1i'](aV,0x0),g['SetCurrentTexture']('u_texNormal',c['gl']['TEXTURE_2D'],a1);let aW=j['get']('useTextureAlpha');c['gl']['uniform1i'](aW,0x0),g['SetCurrentTexture']('u_texAlpha',c['gl']['TEXTURE_2D'],a1);let aX=j['get']('useTextureBump');c['gl']['uniform1i'](aX,0x0),g['SetCurrentTexture']('u_texBump',c['gl']['TEXTURE_2D'],a1);let aY=j['get']('useTextureRoughness');c['gl']['uniform1i'](aY,0x0),g['SetCurrentTexture']('u_texRoughness',c['gl']['TEXTURE_2D'],a1);let aZ=j['get']('useTextureMetalness');c['gl']['uniform1i'](aZ,0x0),g['SetCurrentTexture']('u_texMetalness',c['gl']['TEXTURE_2D'],a1);let b0=j['get']('useTextureSpecluar');c['gl']['uniform1i'](b0,0x0),g['SetCurrentTexture']('u_texSpecluar',c['gl']['TEXTURE_2D'],a1);let b1=j['get']('useTextureAO');c['gl']['uniform1i'](b1,0x0),g['SetCurrentTexture']('u_texAO',c['gl']['TEXTURE_2D'],a1);}if(c['Renderer']['GetEnvironmentMode']()){let b2=j['get']('u_texIrradianceMap');if(b2!==undefined){if(t!==null)c['Shader']['SetCurrentTexture']('u_texIrradianceMap',c['gl']['TEXTURE_CUBE_MAP'],t);else c['Shader']['SetCurrentTexture']('u_texIrradianceMap',c['gl']['TEXTURE_CUBE_MAP'],a2);}let b3=j['get']('u_texPrefilterMap');if(b3!==undefined){if(u!==null)c['Shader']['SetCurrentTexture']('u_texPrefilterMap',c['gl']['TEXTURE_CUBE_MAP'],u);else c['Shader']['SetCurrentTexture']('u_texPrefilterMap',c['gl']['TEXTURE_CUBE_MAP'],a2);}if(![]){if(htexCubemapLod0!==null&&htexCubemapLod1!==null){fRoughnessLod=matDefaultRoughness;if(lod<0x1)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',c['gl']['TEXTURE_CUBE_MAP'],s[0x1]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',c['gl']['TEXTURE_CUBE_MAP'],s[0x0]),fRoughnessLod=lod;else{if(lod<0x2)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',c['gl']['TEXTURE_CUBE_MAP'],s[0x2]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',c['gl']['TEXTURE_CUBE_MAP'],s[0x1]),fRoughnessLod=lod-0x1;else{if(lod<0x3)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',c['gl']['TEXTURE_CUBE_MAP'],s[0x3]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',c['gl']['TEXTURE_CUBE_MAP'],s[0x2]),fRoughnessLod=lod-0x2;else lod<0x4?(c['Shader']['SetCurrentTexture']('utexCubeMapLod0',c['gl']['TEXTURE_CUBE_MAP'],s[0x4]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',c['gl']['TEXTURE_CUBE_MAP'],s[0x3]),fRoughnessLod=lod-0x3):(c['Shader']['SetCurrentTexture']('utexCubeMapLod0',c['gl']['TEXTURE_CUBE_MAP'],s[0x4]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',c['gl']['TEXTURE_CUBE_MAP'],s[0x4]),fRoughnessLod=lod-0x4);}}}}}let aT=c['Material']['GetDefaultUniform'](g['currentShaderType']);if(aT!==undefined)for(const [b4,b5]of Object['entries'](aT)){let b6=String(b4);if(b6['localeCompare']('u_TimeSpeed')===0x0){let b8=j['get']('fTimer');b8!==undefined&&c['gl']['uniform1f'](b8,c['RenderProcessTime']%0x989680/0x3e8);continue;};let b7=j['get'](b6);if(b7===null)continue;if(b5['dataType']['localeCompare']('integer')===0x0)c['gl']['uniform1i'](b7,b5['value']);else{if(b5['dataType']['localeCompare']('float')===0x0)c['gl']['uniform1f'](b7,b5['value']);else b5['dataType']['localeCompare']('vec3')===0x0&&c['gl']['uniform3f'](b7,b5['value']['x'],b5['value']['y'],b5['value']['z']);}}g['uvAttributeLocation']>=0x0&&c['gl']['disableVertexAttribArray'](g['uvAttributeLocation']);return;}let aw=![],ax=![],ay=![],az=![],aA=![],aB=![],aC=![],aD=![],aE=av['color']['glColor']();g['SetGLColor'](aE);let aF=j['get']('uTiling'),aG=j['get']('uOffset'),aH=j['get']('useTexture'),aI=j['get']('useTextureNormal'),aJ=j['get']('useTextureAlpha'),aK=j['get']('useTextureBump'),aL=j['get']('useTextureRoughness'),aM=j['get']('useTextureMetalness'),aN=j['get']('useTextureSpecluar'),aO=j['get']('useTextureAO');c['Material']['UpdateMaterialTexture'](av);for(let b9=0x0;b9<av['textureData']['length'];b9++){let ba=av['textureData'][b9];if(ba['width']<=0x0&&ba['hegith']<=0x0)continue;if(ba['src']===undefined)continue;if(ba['texture']===null)continue;switch(ba['itemType']){case d['Enum']['TEXTURE_TYPES']['DIFFUSE']:{c['gl']['uniform1i'](aH,0x1),g['SetCurrentTexture']('u_Texture',c['gl']['TEXTURE_2D'],ba['texture']);if(aF!==undefined)c['gl']['uniform2f'](aF,ba['tiling']['x'],ba['tiling']['y']);if(aG!==undefined)c['gl']['uniform2f'](aG,ba['offset']['x'],ba['offset']['y']);aw=!![];}break;case d['Enum']['TEXTURE_TYPES']['NORMAL']:{c['gl']['uniform1i'](aI,0x1),g['SetCurrentTexture']('u_texNormal',c['gl']['TEXTURE_2D'],ba['texture']);if(aF!==undefined)c['gl']['uniform2f'](aF,ba['tiling']['x'],ba['tiling']['y']);if(aG!==undefined)c['gl']['uniform2f'](aG,ba['offset']['x'],ba['offset']['y']);ax=!![];}break;case d['Enum']['TEXTURE_TYPES']['OPACITY']:{c['gl']['uniform1i'](aJ,0x1),g['SetCurrentTexture']('u_texAlpha',c['gl']['TEXTURE_2D'],ba['texture']);if(aF!==undefined)c['gl']['uniform2f'](aF,ba['tiling']['x'],ba['tiling']['y']);if(aG!==undefined)c['gl']['uniform2f'](aG,ba['offset']['x'],ba['offset']['y']);ay=!![];}case d['Enum']['TEXTURE_TYPES']['BUMP']:{c['gl']['uniform1i'](aK,0x1),g['SetCurrentTexture']('u_texBump',c['gl']['TEXTURE_2D'],ba['texture']);if(aF!==undefined)c['gl']['uniform2f'](aF,ba['tiling']['x'],ba['tiling']['y']);if(aG!==undefined)c['gl']['uniform2f'](aG,ba['offset']['x'],ba['offset']['y']);az=!![];}break;case d['Enum']['TEXTURE_TYPES']['ROUGHNESS']:{c['gl']['uniform1i'](aL,0x1),g['SetCurrentTexture']('u_texRoughness',c['gl']['TEXTURE_2D'],ba['texture']);if(aF!==undefined)c['gl']['uniform2f'](aF,ba['tiling']['x'],ba['tiling']['y']);if(aG!==undefined)c['gl']['uniform2f'](aG,ba['offset']['x'],ba['offset']['y']);aA=!![];}break;case d['Enum']['TEXTURE_TYPES']['METALNESS']:{c['gl']['uniform1i'](aM,0x1),g['SetCurrentTexture']('u_texMetalness',c['gl']['TEXTURE_2D'],ba['texture']);if(aF!==undefined)c['gl']['uniform2f'](aF,ba['tiling']['x'],ba['tiling']['y']);if(aG!==undefined)c['gl']['uniform2f'](aG,ba['offset']['x'],ba['offset']['y']);aB=!![];}break;case d['Enum']['TEXTURE_TYPES']['SPECLUAR']:{c['gl']['uniform1i'](aN,0x1),g['SetCurrentTexture']('u_texSpecluar',c['gl']['TEXTURE_2D'],ba['texture']);if(aF!==undefined)c['gl']['uniform2f'](aF,ba['tiling']['x'],ba['tiling']['y']);if(aG!==undefined)c['gl']['uniform2f'](aG,ba['offset']['x'],ba['offset']['y']);aC=!![];}break;case d['Enum']['TEXTURE_TYPES']['AMBIENT']:{c['gl']['uniform1i'](aO,0x1),g['SetCurrentTexture']('u_texAO',c['gl']['TEXTURE_2D'],ba['texture']);if(aF!==undefined)c['gl']['uniform2f'](aF,ba['tiling']['x'],ba['tiling']['y']);if(aG!==undefined)c['gl']['uniform2f'](aG,ba['offset']['x'],ba['offset']['y']);aD=!![];}break;}}!aw&&(c['gl']['uniform1i'](aH,0x0),g['SetCurrentTexture']('u_Texture',c['gl']['TEXTURE_2D'],a1));!ax&&(c['gl']['uniform1i'](aI,0x0),g['SetCurrentTexture']('u_texNormal',c['gl']['TEXTURE_2D'],a1));!ay&&(c['gl']['uniform1i'](aJ,0x0),g['SetCurrentTexture']('u_texAlpha',c['gl']['TEXTURE_2D'],a1));!az&&(c['gl']['uniform1i'](aK,0x0),g['SetCurrentTexture']('u_texBump',c['gl']['TEXTURE_2D'],a1));!aA&&(c['gl']['uniform1i'](aL,0x0),g['SetCurrentTexture']('u_texRoughness',c['gl']['TEXTURE_2D'],a1));!aB&&(c['gl']['uniform1i'](aM,0x0),g['SetCurrentTexture']('u_texMetalness',c['gl']['TEXTURE_2D'],a1));!aC&&(c['gl']['uniform1i'](aN,0x0),g['SetCurrentTexture']('u_texSpecluar',c['gl']['TEXTURE_2D'],a1));!aD&&(c['gl']['uniform1i'](aO,0x0),g['SetCurrentTexture']('u_texAO',c['gl']['TEXTURE_2D'],a1));g['uvAttributeLocation']>=0x0&&c['gl']['enableVertexAttribArray'](g['uvAttributeLocation']);!aw&&!ax&&!az&&!aA&&!aB&&!aC&&!aD&&!ay&&(g['uvAttributeLocation']>=0x0&&c['gl']['disableVertexAttribArray'](g['uvAttributeLocation']));if(c['Renderer']['GetEnvironmentMode']()){let bb=j['get']('u_texIrradianceMap');if(bb!==undefined){if(t!==null)c['Shader']['SetCurrentTexture']('u_texIrradianceMap',c['gl']['TEXTURE_CUBE_MAP'],t);else c['Shader']['SetCurrentTexture']('u_texIrradianceMap',c['gl']['TEXTURE_CUBE_MAP'],a2);}let bc=j['get']('u_texPrefilterMap');if(bc!==undefined){if(u!==null)c['Shader']['SetCurrentTexture']('u_texPrefilterMap',c['gl']['TEXTURE_CUBE_MAP'],u);else c['Shader']['SetCurrentTexture']('u_texPrefilterMap',c['gl']['TEXTURE_CUBE_MAP'],a2);}if(![]){if(htexCubemapLod0!==null&&htexCubemapLod1!==null){fRoughnessLod=av['roughness'];if(lod<0x1)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',c['gl']['TEXTURE_CUBE_MAP'],s[0x1]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',c['gl']['TEXTURE_CUBE_MAP'],s[0x0]),fRoughnessLod=lod;else{if(lod<0x2)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',c['gl']['TEXTURE_CUBE_MAP'],s[0x2]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',c['gl']['TEXTURE_CUBE_MAP'],s[0x1]),fRoughnessLod=lod-0x1;else{if(lod<0x3)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',c['gl']['TEXTURE_CUBE_MAP'],s[0x3]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',c['gl']['TEXTURE_CUBE_MAP'],s[0x2]),fRoughnessLod=lod-0x2;else lod<0x4?(c['Shader']['SetCurrentTexture']('utexCubeMapLod0',c['gl']['TEXTURE_CUBE_MAP'],s[0x4]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',c['gl']['TEXTURE_CUBE_MAP'],s[0x3]),fRoughnessLod=lod-0x3):(c['Shader']['SetCurrentTexture']('utexCubeMapLod0',c['gl']['TEXTURE_CUBE_MAP'],s[0x4]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',c['gl']['TEXTURE_CUBE_MAP'],s[0x4]),fRoughnessLod=lod-0x4);}}}}}if(av['tag']!==undefined)for(const [bd,be]of Object['entries'](av['tag'])){let bf=String(bd);if(bf['localeCompare']('u_TimeSpeed')===0x0){let bh=j['get']('fTimer');bh!==undefined&&c['gl']['uniform1f'](bh,c['RenderProcessTime']%0x989680*be['value']);continue;};let bg=j['get'](bf);if(bg===undefined)continue;if(be['dataType']['localeCompare']('integer')===0x0)c['gl']['uniform1i'](bg,be['value']);else{if(be['dataType']['localeCompare']('float')===0x0)c['gl']['uniform1f'](bg,be['value']);else be['dataType']['localeCompare']('vec3')===0x0&&c['gl']['uniform3f'](bg,be['value']['x'],be['value']['y'],be['value']['z']);}}},this['SetCurrentTexture']=function(au,av,aw){if(g['currentProgram']===undefined)return;let ax=j['get'](au);if(ax===null)return;let ay=![],az=i['length'];for(let aA=0x0;aA<i['length'];aA++){if(i[aA]===au){az=aA,ay=!![];break;}}if(ay)return;c['gl']['activeTexture'](c['gl']['TEXTURE0']+az),c['gl']['bindTexture'](av,aw),c['gl']['uniform1i'](ax,az),!ay&&i['push'](au),c['Renderer']['GetEnableColorMap']()?c['gl']['activeTexture'](c['gl']['TEXTURE0']+az+0x1):c['gl']['activeTexture'](c['gl']['TEXTURE0']);},this['SetCurrentTextureByFB']=function(au,av){let aw=g['GetItemFramebuffer'](av);if(aw===undefined)return;g['SetCurrentTexture'](au,c['gl']['TEXTURE_2D'],aw['targetTexture'][0x0]);},this['SetGLSkyBox']=function(){if(v!==null)g['SetCurrentTexture']('utexCubeMap',c['gl']['TEXTURE_CUBE_MAP'],v);else g['SetCurrentTexture']('utexCubeMap',c['gl']['TEXTURE_CUBE_MAP'],a2);},this['SetGLCameraData']=function(){if(g['currentProgram']===undefined)return;let au=j['get']('ubPerspectiveView');if(au!==undefined)c['gl']['uniform1f'](au,c['Camera']['perspectiveView']===!![]?0x1:0x0);let av=j['get']('uNear');if(av!==undefined)c['gl']['uniform1f'](av,c['Camera']['near']);let aw=j['get']('uFar');if(aw!==undefined)c['gl']['uniform1f'](aw,c['Camera']['far']);if(c['Camera']['perspectiveView']){const ax=new d['Matrix4']()['copy'](c['Camera']['projectionMatrixSrc']),ay=new d['Matrix4']()['copy'](c['Camera']['projectionMatrix']),az=new d['Matrix4']()['getInverse'](ay);let aA=j['get']('u_ProjectionMatrixSrc');aA!==undefined&&c['gl']['uniformMatrix4fv'](aA,![],ax['elements']);let aB=j['get']('u_ProjectionMatrix');aB!==undefined&&c['gl']['uniformMatrix4fv'](aB,![],ay['elements']);let aC=j['get']('u_ProjectionInverseMatrix');aC!==undefined&&c['gl']['uniformMatrix4fv'](aC,![],az['elements']);}else{let aD=j['get']('u_ProjectionMatrix');aD!==undefined&&c['gl']['uniformMatrix4fv'](aD,![],c['Camera']['projectionMatrix']['elements']);let aE=j['get']('u_ProjectionInverseMatrix');if(aE!==undefined){let aF=new d['Matrix4']()['copy'](c['Camera']['projectionMatrix']),aG=new d['Matrix4']()['getInverse'](aF);c['gl']['uniformMatrix4fv'](aE,![],aG['elements']);}}},this['SetResolutionData']=function(){if(g['currentProgram']===undefined)return;let au=j['get']('u_Resolution');if(au!==undefined){let av=c['Renderer']['GetSizeWidth'](),aw=c['Renderer']['GetSizeHeight']();c['gl']['uniform2f'](au,av,aw);}},this['SetGLNoiseData']=function(){if(g['currentProgram']===undefined)return;if(!c['useWebGL2'])return;if(M===undefined){M=c['gl']['createTexture'](),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],M);let aw=new Float32Array(N*N*0x4);for(let ay=0x0;ay<N;++ay){for(let az=0x0;az<N;++az){let aA=ay*N*0x4+az*0x4;aw[aA+0x0]=Math['random'](),aw[aA+0x1]=Math['random'](),aw[aA+0x2]=0x0,aw[aA+0x3]=0x1;}}c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA16F'],N,N,0x0,c['gl']['RGBA'],c['gl']['FLOAT'],aw),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['NEAREST']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']);let ax=0x80;O=new Float32Array(ax*0x3);for(let aB=0x0;aB<ax;++aB){let aC=Math['random']()*0x2-0x1,aD=Math['random']()*0x2-0x1,aE=Math['random'](),aF=Math['random'](),aG=new d['Vector3'](aC,aD,aE);aG['normalize'](),aG=aG['multiplyScalar'](aF);let aH=aB/ax;aH=0.1+aH*aH*(0x1-0.1),aG=aG['multiplyScalar'](aH),O[aB*0x3+0x0]=aG['x'],O[aB*0x3+0x1]=aG['y'],O[aB*0x3+0x2]=aG['z'];}}g['SetCurrentTexture']('u_NoiseTexture',c['gl']['TEXTURE_2D'],M);let au=j['get']('uNoiseTexScale');au&&c['gl']['uniform2f'](au,c['gl']['canvas']['width']/N,c['gl']['canvas']['height']/N);let av=j['get']('uSamples[0]');av&&c['gl']['uniform3fv'](av,O);},this['SetGLBRDFData']=function(){if(g['currentProgram']===undefined)return;if(!c['useWebGL2'])return;let au=j['get']('u_texbrdfLUT');if(au===null)return;g['SetCurrentTexture']('u_texbrdfLUT',c['gl']['TEXTURE_2D'],Q);},this['GetGLBRDFData']=function(){return Q;},this['CreateBRDF']=function(){if(!c['useWebGL2'])return;if(Q===undefined){let au=c['Shader']['currentShaderType'],av=0x200,aw=0x200;Q=c['gl']['createTexture'](),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],Q),c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RG16F'],av,aw,0x0,c['gl']['RG'],c['gl']['FLOAT'],null),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_S'],c['gl']['CLAMP_TO_EDGE']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_T'],c['gl']['CLAMP_TO_EDGE']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['LINEAR']);const ax=c['gl']['createRenderbuffer']();c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],ax),c['gl']['renderbufferStorage'](c['gl']['RENDERBUFFER'],c['gl']['DEPTH_COMPONENT32F'],av,aw);const ay=c['gl']['createFramebuffer']();c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],ay),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],Q),c['gl']['framebufferTexture2D'](c['gl']['FRAMEBUFFER'],c['gl']['COLOR_ATTACHMENT0'],c['gl']['TEXTURE_2D'],Q,0x0),c['gl']['framebufferRenderbuffer'](c['gl']['FRAMEBUFFER'],c['gl']['DEPTH_ATTACHMENT'],c['gl']['RENDERBUFFER'],ax);let az=c['gl']['checkFramebufferStatus'](c['gl']['FRAMEBUFFER']);c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],ay),c['gl']['viewport'](0x0,0x0,av,aw),c['gl']['clearColor'](0x0,0x0,0x0,0x0),c['gl']['clear'](c['gl']['COLOR_BUFFER_BIT']|c['gl']['DEPTH_BUFFER_BIT']),c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['BRDF']);const aA=new d['Matrix4']();c['Shader']['SetMatrix'](aA,undefined),c['RenderWGL']['Util_RenderQuad'](![]),c['Shader']['EndShader']();if(![]){let aB=new Uint8Array(av*aw*0x4);c['gl']['readPixels'](0x0,0x0,av,aw,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],aB),c['Util']['SaveImageData'](aB,av,aw);}c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],null),c['gl']['deleteFramebuffer'](ay);if(g['currentFramebufferType']!==undefined){let aC=k['get'](g['currentFramebufferType']);aC!==undefined&&c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],aC['framebufferID']);}c['gl']['viewport'](0x0,0x0,c['Camera']['clientWidth'],c['Camera']['clientHeight']);if(au!==undefined)g['BeginShader'](au);return;}},this['SetGLAlphaDot']=function(){if(g['currentProgram']===undefined)return![];if(S===undefined)return![];return g['SetCurrentTexture']('u_Texture',c['gl']['TEXTURE_2D'],S),!![];},this['SetGLAlphaCloud']=function(){if(g['currentProgram']===undefined)return![];if(U===undefined)return![];return g['SetCurrentTexture']('u_Texture',c['gl']['TEXTURE_2D'],U),!![];},this['SetGLAlphaRain']=function(){if(g['currentProgram']===undefined)return![];if(Y===undefined)return![];return g['SetCurrentTexture']('u_Texture',c['gl']['TEXTURE_2D'],Y),!![];},this['SetGLAlphaMist']=function(){if(g['currentProgram']===undefined)return![];if(W===undefined)return![];return g['SetCurrentTexture']('u_Texture',c['gl']['TEXTURE_2D'],W),!![];},this['SetGLPerlinNoise']=function(){if(g['currentProgram']===undefined)return![];if(Z===undefined)return![];return g['SetCurrentTexture']('u_PerlinTexture',c['gl']['TEXTURE_2D'],Z),!![];},this['SetGLPerlinNoiseDebug']=function(){if(g['currentProgram']===undefined)return![];if(Z===undefined)return![];return g['SetCurrentTexture']('u_Texture',c['gl']['TEXTURE_2D'],Z),!![];},this['SetGLCloudDetail']=function(){if(g['currentProgram']===undefined)return![];a0===undefined&&at();if(a0===undefined)return![];return g['SetCurrentTexture']('u_DetailTexture',c['gl']['TEXTURE_3D'],a0),!![];},this['SetPointSize']=function(au){if(g['currentProgram']===undefined)return;let av=j['get']('u_PointSize');if(av!==undefined)c['gl']['uniform1f'](av,au);},this['SetLineThickness']=function(au){if(g['currentProgram']===undefined)return;let av=j['get']('u_Tickness');if(av!==undefined)c['gl']['uniform1f'](av,au);},this['GetExtMultiDraw']=function(){return o;},this['GetItemFramebuffer']=function(au){let av=k['get'](au);return av;};function aj(au,av){let aw=k['get'](au);if(aw===undefined)return![];if(av)c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],aw['targetTexture'][0x0]);else c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],aw['targetDepthTexture']);return!![];};this['SetFramebufferIndex']=function(au){k=l[au];},this['BeginFramebuffer']=function(au){let av=k['get'](au);if(av===undefined){af(au),av=k['get'](au);if(av===undefined)return;}g['currentFramebufferType']=au,c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],av['framebufferID']),c['gl']['viewport'](0x0,0x0,av['width'],av['height']);},this['EndFramebuffer']=function(){g['currentFramebufferType']=undefined,c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],null),c['gl']['viewport'](0x0,0x0,c['Camera']['clientWidth'],c['Camera']['clientHeight']);},this['BindTargetTexture']=function(){if(g['currentFramebufferType']===undefined)return![];return c['Shader']['BindTargetTextureByType'](g['currentFramebufferType']);},this['BindTargetTextureByType']=function(au){return aj(au,!![]);},this['BindTargetDepthByType']=function(au){return aj(au,![]);},this['GetFrameBufferTexture']=function(au){let av=c['Data']['TextureDataItem'](),aw=k['get'](au);if(aw===undefined)return undefined;return av['texture']=aw['targetTexture'][0x0],av['width']=aw['width'],av['height']=aw['height'],av;},this['GetColorIDTexture']=function(au){let av=c['Data']['TextureDataItem']();if(c['useWebGL2']){let aw=undefined;if(au===undefined||au===0x0)aw=k['get'](d['Enum']['FB_RENDER_TYPES']['COLOROBJECT']);else{if(au===0x1)aw=k['get'](d['Enum']['FB_RENDER_TYPES']['COLORCUSTOMOBJECT']);else{if(au===0x2)aw=k['get'](d['Enum']['FB_RENDER_TYPES']['AVATAROBJECT']);else{if(au===-0x1)aw=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSING']);else{if(au===0x3)aw=k['get'](d['Enum']['FB_RENDER_TYPES']['CUSTOM_EDGE']);else{if(au===0x4)aw=k['get'](d['Enum']['FB_RENDER_TYPES']['COLOROBJECTGROUP']);else{if(au===0xa)aw=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW']);else au===0xb&&(aw=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSING_DISABLE_DEPTH']));}}}}}}if(aw===undefined)return undefined;av['texture']=aw['targetTexture'][0x0],av['width']=aw['width'],av['height']=aw['height'];}else{let ax=undefined;if(au===undefined||au===0x0)ax=k['get'](d['Enum']['FB_RENDER_TYPES']['COLOROBJECT']);else{if(au===0x1)ax=k['get'](d['Enum']['FB_RENDER_TYPES']['COLORCUSTOMOBJECT']);else au===0x2&&(ax=k['get'](d['Enum']['FB_RENDER_TYPES']['AVATAROBJECT']));}if(ax===undefined)return undefined;av['texture']=ax['targetTexture'][0x0],av['width']=ax['width'],av['height']=ax['height'];}return av;},this['GetPositionTexture']=function(au){let av=c['Data']['TextureDataItem']();if(c['useWebGL2']){let aw=undefined;if(au===undefined||au===0x0){aw=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSING']);if(aw===undefined)return undefined;}else{if(au===0xa){aw=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW']);if(aw===undefined)return undefined;}else{if(au===0xb){aw=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW2']);if(aw===undefined)return undefined;}else{if(au===0xc){aw=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW3']);if(aw===undefined)return undefined;}else{if(au===0xd){aw=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW4']);if(aw===undefined)return undefined;}else{if(au===0xe){aw=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW5']);if(aw===undefined)return undefined;}}}}}}if(au===0xa||au===0xb||au===0xc||au===0xd||au===0xe)av['texture']=aw['targetTexture'][0x0];else av['texture']=aw['targetTexture'][0x1];av['width']=aw['width'],av['height']=aw['height'];}else{let ax=k['get'](d['Enum']['FB_RENDER_TYPES']['POSITION']);if(ax===undefined)return undefined;av['texture']=ax['targetTexture'][0x0],av['width']=ax['width'],av['height']=ax['height'];}return av;},this['GetNormalTexture']=function(){let au=c['Data']['TextureDataItem']();if(c['useWebGL2']){let av=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSING']);if(av===undefined)return undefined;au['texture']=av['targetTexture'][0x2],au['width']=av['width'],au['height']=av['height'];}else{let aw=k['get'](d['Enum']['FB_RENDER_TYPES']['NORMAL']);if(aw===undefined)return undefined;au['texture']=aw['targetTexture'][0x0],au['width']=aw['width'],au['height']=aw['height'];}return au;},this['GetDepthTexture']=function(au){let av=c['Data']['TextureDataItem']();if(c['useWebGL2']){let aw=undefined;if(au===undefined||au===0x0){aw=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSING']);if(aw===undefined)return undefined;}else{if(au===0xa){aw=k['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW']);if(aw===undefined)return undefined;}}av['texture']=aw['targetTexture'][0x3],av['width']=aw['width'],av['height']=aw['height'];}else{let ax=k['get'](d['Enum']['FB_RENDER_TYPES']['DEPTH']);if(ax===undefined)return undefined;av['texture']=ax['targetTexture'][0x0],av['width']=ax['width'],av['height']=ax['height'];}return av;};function ak(){v!==null&&c['gl']['deleteTexture'](v);v=null;let au=0x0,av=0x0,aw=[new Image(),new Image(),new Image(),new Image(),new Image(),new Image()];for(let ay=0x0;ay<0x6;ay++){if(y<0x0&&A[ay]['localeCompare']('')!==0x0)aw[ay]['src']=A[ay];else aw[ay]['src']=g['DefaultTexture']['SkyBox'][ay];aw[ay]['onload']=function(){av++;if(av>=0x6)ax(),ar(),x=!![];else au+av>=0x6&&(x=!![]);},aw[ay]['onerror']=function(){au++,au+av>=0x6&&(x=!![]);};}let ax=function(){let az=c['gl']['createTexture']();c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],az),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']);for(let aA=0x0;aA<0x6;++aA){c['gl']['texImage2D'](B[aA],0x0,c['gl']['RGBA'],c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],aw[aA]);}v=az;};}function al(){if(!c['useWebGL2'])return;v!==null&&c['gl']['deleteTexture'](v);v=null;let au=0x0,av=0x0,aw=[new Image()];for(let ay=0x0;ay<0x1;ay++){if(y<0x0&&z['localeCompare']('')!==0x0)aw[ay]['src']=z;else aw[ay]['src']=g['DefaultTexture']['SkyBoxHDR'];aw[ay]['onload']=function(){av++,ax(0x0),ar(),x=!![];},aw[ay]['onerror']=function(){au++,x=!![];};}let ax=function(az){let aA=c['gl']['createTexture']();c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],aA),c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA'],aw[az]['width'],aw[az]['height'],0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],aw[az]),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['LINEAR']);let aB=c['gl']['createTexture']();v=aB,c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],aB);let aC=0x200,aD=0x200;for(let aE=0x0;aE<0x6;++aE){c['gl']['texImage2D'](B[aE],0x0,c['gl']['RGBA'],aC,aD,0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],null);}c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_S'],c['gl']['CLAMP_TO_EDGE']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_T'],c['gl']['CLAMP_TO_EDGE']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_R'],c['gl']['CLAMP_TO_EDGE']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['LINEAR_MIPMAP_LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['LINEAR']);for(let aF=0x0;aF<0x6;aF++){const aG=c['gl']['createRenderbuffer']();c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],aG),c['gl']['renderbufferStorage'](c['gl']['RENDERBUFFER'],c['gl']['DEPTH_COMPONENT16'],aC,aD);const aH=c['gl']['createFramebuffer']();c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],aH),c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],aB),c['gl']['framebufferTexture2D'](c['gl']['FRAMEBUFFER'],c['gl']['COLOR_ATTACHMENT0'],B[aF],aB,0x0),c['gl']['framebufferRenderbuffer'](c['gl']['FRAMEBUFFER'],c['gl']['DEPTH_ATTACHMENT'],c['gl']['RENDERBUFFER'],aG);let aI=c['gl']['checkFramebufferStatus'](c['gl']['FRAMEBUFFER']);c['gl']['viewport'](0x0,0x0,aC,aD),c['gl']['clearColor'](0x0,0x0,0x0,0x0),c['gl']['clear'](c['gl']['COLOR_BUFFER_BIT']|c['gl']['DEPTH_BUFFER_BIT']),c['gl']['enable'](c['gl']['DEPTH_TEST']);const aJ=c['Util']['DegToRad'](0x5a);let aK=new d['Matrix4'](),aL=new d['Matrix4']()['perspective'](aJ,0x1,0.01,0xa);aK['elements']=aL;{let aM=new d['Matrix4']();if(c['Camera']['useYUp'])switch(aF){case 0x0:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x1:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x2:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x3:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;case 0x4:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x5:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,-0x1,0x0));break;}else switch(aF){case 0x0:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0)),aM['rotate'](0x0,0x0,0x5a/0xb4*3.141592);break;case 0x1:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0)),aM['rotate'](0x0,0x0,-0x5a/0xb4*3.141592);break;case 0x2:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x3:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,0x1,0x0));break;case 0x4:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x5:aM['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;}let aN=new d['Matrix4']()['multiplyMatrices'](aK,aM);c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['EQUIRECTANGULARSKYBOX']),c['Shader']['SetMatrix'](aN,undefined),c['Shader']['SetCurrentTexture']('u_Texture8',c['gl']['TEXTURE_2D'],aA),c['RenderWGL']['Util_RenderCube'](),c['Shader']['EndShader']();}c['gl']['deleteRenderbuffer'](aG),c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],null),c['gl']['deleteFramebuffer'](aH);}c['gl']['deleteTexture'](aA),c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],aB),c['gl']['generateMipmap'](c['gl']['TEXTURE_CUBE_MAP']);};}function am(){let au=c['gl']['createTexture']();c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],au),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']);for(let av=0x0;av<0x6;++av){c['gl']['texImage2D'](B[av],0x0,c['gl']['RGBA'],c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],imgItem[av]);}v=au;}function an(au,av,aw,ax){let ay=new d['Vector3'](-0x1,-0x1,-0x1),az=new d['Vector3'](0x1,0x1,0x1),aA=[ay['x'],ay['y'],ay['z'],ay['x'],ay['y'],az['z'],ay['x'],az['y'],ay['z'],ay['x'],az['y'],az['z'],az['x'],ay['y'],ay['z'],az['x'],ay['y'],az['z'],az['x'],az['y'],ay['z'],az['x'],az['y'],az['z']],aB=[0x2,0x0,0x3,0x0,0x3,0x1,0x4,0x6,0x5,0x6,0x5,0x7,0x0,0x4,0x1,0x4,0x1,0x5,0x6,0x2,0x7,0x2,0x7,0x3,0x4,0x0,0x6,0x0,0x6,0x2,0x1,0x5,0x3,0x5,0x3,0x7],aC=aw,aD=ax;s[au]=c['gl']['createTexture']();let aE=s[au];c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],aE);for(let aF=0x0;aF<0x6;aF++){c['gl']['texImage2D'](B[aF],0x0,c['gl']['RGBA'],aC,aD,0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],null);}for(let aG=0x0;aG<0x6;aG++){const aH=c['gl']['createRenderbuffer']();c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],aH),c['gl']['renderbufferStorage'](c['gl']['RENDERBUFFER'],c['gl']['DEPTH_COMPONENT16'],aC,aD);const aI=c['gl']['createFramebuffer']();c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],aI),c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],aE),c['gl']['framebufferTexture2D'](c['gl']['FRAMEBUFFER'],c['gl']['COLOR_ATTACHMENT0'],B[aG],aE,0x0),c['gl']['framebufferRenderbuffer'](c['gl']['FRAMEBUFFER'],c['gl']['DEPTH_ATTACHMENT'],c['gl']['RENDERBUFFER'],aH);let aJ=c['gl']['checkFramebufferStatus'](c['gl']['FRAMEBUFFER']);c['gl']['viewport'](0x0,0x0,aC,aD),c['gl']['clearColor'](0x0,0x0,0x0,0x0),c['gl']['clear'](c['gl']['COLOR_BUFFER_BIT']|c['gl']['DEPTH_BUFFER_BIT']),c['gl']['enable'](c['gl']['DEPTH_TEST']);const aK=c['Util']['DegToRad'](0x5a);let aL=new d['Matrix4'](),aM=new d['Matrix4']()['perspective'](aK,0x1,0.01,0xa);aL['elements']=aM;{let aN=new d['Matrix4']();if(c['Camera']['useYUp'])switch(aG){case 0x0:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x1:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x2:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x3:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;case 0x4:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x5:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,-0x1,0x0));break;}else switch(aG){case 0x0:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0)),aN['rotate'](0x0,0x0,0x5a/0xb4*3.141592);break;case 0x1:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0)),aN['rotate'](0x0,0x0,-0x5a/0xb4*3.141592);break;case 0x2:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x3:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,0x1,0x0));break;case 0x4:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x5:aN['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;}let aO=new d['Matrix4']()['multiplyMatrices'](aL,aN);c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['PREFILTEREDENVIRONMENT']),c['Shader']['SetMatrix'](aO,undefined);let aP=j['get']('fRoughness');c['gl']['uniform1f'](aP,av),c['Shader']['SetCurrentTexture']('utexCubeMap',c['gl']['TEXTURE_CUBE_MAP'],v),c['RenderWGL']['Util_RenderCube'](),c['Shader']['EndShader']();}c['gl']['deleteRenderbuffer'](aH),c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],null),c['gl']['deleteFramebuffer'](aI);}c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],aE),c['gl']['generateMipmap'](c['gl']['TEXTURE_CUBE_MAP']),c['gl']['viewport'](0x0,0x0,c['Camera']['clientWidth'],c['Camera']['clientHeight']),c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],null);};function ao(au,av,aw,ax){let ay=aw,az=ax,aA=u;for(let aB=0x0;aB<0x6;aB++){const aC=c['gl']['createRenderbuffer']();c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],aC),c['gl']['renderbufferStorage'](c['gl']['RENDERBUFFER'],c['gl']['DEPTH_COMPONENT16'],ay,az);const aD=c['gl']['createFramebuffer']();c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],aD),c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],aA),c['gl']['framebufferTexture2D'](c['gl']['FRAMEBUFFER'],c['gl']['COLOR_ATTACHMENT0'],B[aB],aA,au),c['gl']['framebufferRenderbuffer'](c['gl']['FRAMEBUFFER'],c['gl']['DEPTH_ATTACHMENT'],c['gl']['RENDERBUFFER'],aC);let aE=c['gl']['checkFramebufferStatus'](c['gl']['FRAMEBUFFER']);c['gl']['viewport'](0x0,0x0,ay,az),c['gl']['clearColor'](0x1,0x0,0x0,0x1),c['gl']['clear'](c['gl']['COLOR_BUFFER_BIT']|c['gl']['DEPTH_BUFFER_BIT']),c['gl']['enable'](c['gl']['DEPTH_TEST']);const aF=c['Util']['DegToRad'](0x5a);let aG=new d['Matrix4'](),aH=new d['Matrix4']()['perspective'](aF,0x1,0.01,0xa);aG['elements']=aH;{let aI=new d['Matrix4']();if(c['Camera']['useYUp'])switch(aB){case 0x0:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x1:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x2:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x3:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;case 0x4:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x5:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,-0x1,0x0));break;}else switch(aB){case 0x0:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0)),aI['rotate'](0x0,0x0,0x5a/0xb4*3.141592);break;case 0x1:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0)),aI['rotate'](0x0,0x0,-0x5a/0xb4*3.141592);break;case 0x2:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x3:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,0x1,0x0));break;case 0x4:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x5:aI['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;}let aJ=new d['Matrix4']()['multiplyMatrices'](aG,aI);c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['PREFILTEREDENVIRONMENT']),c['Shader']['SetMatrix'](aJ,undefined);let aK=j['get']('fRoughness');c['gl']['uniform1f'](aK,av),c['Shader']['SetCurrentTexture']('utexCubeMap',c['gl']['TEXTURE_CUBE_MAP'],v),c['RenderWGL']['Util_RenderCube'](),c['Shader']['EndShader']();}c['gl']['deleteRenderbuffer'](aC),c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],null),c['gl']['deleteFramebuffer'](aD);}c['gl']['viewport'](0x0,0x0,c['Camera']['clientWidth'],c['Camera']['clientHeight']),c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],null);};function ap(au,av){if(!c['useWebGL2'])return;t!==null&&(c['gl']['deleteTexture'](t),t=null);let aw=new d['Vector3'](-0x1,-0x1,-0x1),ax=new d['Vector3'](0x1,0x1,0x1),ay=[aw['x'],aw['y'],aw['z'],aw['x'],aw['y'],ax['z'],aw['x'],ax['y'],aw['z'],aw['x'],ax['y'],ax['z'],ax['x'],aw['y'],aw['z'],ax['x'],aw['y'],ax['z'],ax['x'],ax['y'],aw['z'],ax['x'],ax['y'],ax['z']],az=[0x3,0x2,0x0,0x0,0x1,0x3,0x7,0x4,0x6,0x4,0x7,0x5,0x0,0x4,0x5,0x5,0x1,0x0,0x2,0x7,0x6,0x7,0x2,0x3,0x0,0x6,0x4,0x6,0x0,0x2,0x1,0x5,0x7,0x7,0x3,0x1],aA=au,aB=av;t=c['gl']['createTexture']();let aC=t;c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],aC),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_S'],c['gl']['CLAMP_TO_EDGE']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_T'],c['gl']['CLAMP_TO_EDGE']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_R'],c['gl']['CLAMP_TO_EDGE']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['LINEAR_MIPMAP_LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['LINEAR']),c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],aC);for(let aD=0x0;aD<0x6;aD++){c['gl']['texImage2D'](B[aD],0x0,c['gl']['RGBA'],aA,aB,0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],null);}for(let aE=0x0;aE<0x6;aE++){const aF=c['gl']['createRenderbuffer']();c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],aF),c['gl']['renderbufferStorage'](c['gl']['RENDERBUFFER'],c['gl']['DEPTH_COMPONENT16'],aA,aB);const aG=c['gl']['createFramebuffer']();c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],aG),c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],aC),c['gl']['framebufferTexture2D'](c['gl']['FRAMEBUFFER'],c['gl']['COLOR_ATTACHMENT0'],B[aE],aC,0x0),c['gl']['framebufferRenderbuffer'](c['gl']['FRAMEBUFFER'],c['gl']['DEPTH_ATTACHMENT'],c['gl']['RENDERBUFFER'],aF),c['gl']['viewport'](0x0,0x0,aA,aB),c['gl']['clearColor'](0x0,0x0,0x0,0x0),c['gl']['clear'](c['gl']['COLOR_BUFFER_BIT']|c['gl']['DEPTH_BUFFER_BIT']),c['gl']['enable'](c['gl']['DEPTH_TEST']);const aH=c['Util']['DegToRad'](0x5a);let aI=new d['Matrix4'](),aJ=new d['Matrix4']()['perspective'](aH,0x1,0.01,0xa);aI['elements']=aJ;{let aK=new d['Matrix4']();if(c['Camera']['useYUp'])switch(aE){case 0x0:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x1:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x2:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x3:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;case 0x4:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x5:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,-0x1,0x0));break;}else switch(aE){case 0x0:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0)),aK['rotate'](0x0,0x0,0x5a/0xb4*3.141592);break;case 0x1:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0)),aK['rotate'](0x0,0x0,-0x5a/0xb4*3.141592);break;case 0x2:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x3:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,0x1,0x0));break;case 0x4:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x5:aK['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;}let aL=new d['Matrix4']()['multiplyMatrices'](aI,aK);c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['IRRADIANCEENVIRONMENT']),c['Shader']['SetMatrix'](aL,undefined),c['Shader']['SetCurrentTexture']('utexCubeMap',c['gl']['TEXTURE_CUBE_MAP'],v),c['RenderWGL']['Util_RenderCube'](),c['Shader']['EndShader']();}c['gl']['deleteRenderbuffer'](aF),c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],null),c['gl']['deleteFramebuffer'](aG);}c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],aC),c['gl']['generateMipmap'](c['gl']['TEXTURE_CUBE_MAP']),c['gl']['viewport'](0x0,0x0,c['Camera']['clientWidth'],c['Camera']['clientHeight']),c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],null);};function aq(){if(y<0x0){if(y===-0x14)ak();else{if(y===-0xa)al();}}else{if(y===0x0)ak();else{if(y===0x1)al();}}};function ar(){let au=0x5,av=0x80,aw=0x80;u!==null&&(c['gl']['deleteTexture'](u),u=null);if(u===null){u=c['gl']['createTexture'](),c['gl']['bindTexture'](c['gl']['TEXTURE_CUBE_MAP'],u);for(let ax=0x0;ax<0x6;ax++){c['gl']['texImage2D'](B[ax],0x0,c['gl']['RGBA'],av,aw,0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],null);}c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_S'],c['gl']['CLAMP_TO_EDGE']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_T'],c['gl']['CLAMP_TO_EDGE']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_WRAP_R'],c['gl']['CLAMP_TO_EDGE']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['LINEAR_MIPMAP_LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_CUBE_MAP'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['LINEAR']),c['gl']['generateMipmap'](c['gl']['TEXTURE_CUBE_MAP']);}for(let ay=0x0;ay<au;ay++){let az=av,aA=aw,aB=ay/(au-0x1);if(!c['useWebGL2'])continue;az=az*Math['pow'](0.5,ay),aA=aA*Math['pow'](0.5,ay),ao(ay,aB,az,aA);}ap(0x20,0x20),c['ViewRefresh'](![]);};function as(){Z!==undefined&&c['gl']['deleteTexture'](Z);let au=0x100,av=0x100,aw=c['gl']['createTexture']();Z=aw,c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],aw),c['gl']['texImage2D'](c['gl']['TEXTURE_2D'],0x0,c['gl']['RGBA'],au,av,0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],null),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_2D'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']);{const ax=c['gl']['createFramebuffer']();c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],ax);const ay=c['gl']['createRenderbuffer']();c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],ay),c['gl']['renderbufferStorage'](c['gl']['RENDERBUFFER'],c['gl']['DEPTH_COMPONENT16'],au,av),c['gl']['bindTexture'](c['gl']['TEXTURE_2D'],aw),c['gl']['framebufferTexture2D'](c['gl']['FRAMEBUFFER'],c['gl']['COLOR_ATTACHMENT0'],c['gl']['TEXTURE_2D'],aw,0x0),c['gl']['framebufferRenderbuffer'](c['gl']['FRAMEBUFFER'],c['gl']['DEPTH_ATTACHMENT'],c['gl']['RENDERBUFFER'],ay),c['gl']['viewport'](0x0,0x0,au,av),c['gl']['clearColor'](0x0,0x0,0x0,0x0),c['gl']['clear'](c['gl']['COLOR_BUFFER_BIT']|c['gl']['DEPTH_BUFFER_BIT']),c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['PERLINNOISE']);let az=j['get']('u_Resolution');az!==undefined&&c['gl']['uniform2f'](az,au,av);let aA=j['get']('fTimer');aA!==undefined&&c['gl']['uniform1f'](aA,Math['random']()*0x2710);c['RenderWGL']['Util_RenderQuad'](),c['Shader']['EndShader'](),c['gl']['deleteRenderbuffer'](ay),c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],null),c['gl']['deleteFramebuffer'](ax);if(g['currentFramebufferType']!==undefined){let aB=k['get'](g['currentFramebufferType']);aB!==undefined&&c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],aB['framebufferID']);}c['gl']['viewport'](0x0,0x0,c['Camera']['clientWidth'],c['Camera']['clientHeight']);}};function at(){a0!==undefined&&c['gl']['deleteTexture'](a0);let au=0x100,av=0x100,aw=0x100,ax=c['gl']['createTexture']();a0=ax,c['gl']['bindTexture'](c['gl']['TEXTURE_3D'],ax);let ay=new Int8Array(au*av*aw*0x4);for(let az=0x0;az<au;az++){for(let aA=0x0;aA<av;aA++){for(let aB=0x0;aB<aw;aB++){let aC=aB*au*av+0x4+aA*au*0x4+az*0x4;ay[aC+0x0]=0x0,ay[aC+0x1]=0x0,ay[aC+0x2]=0x0,ay[aC+0x3]=0x1;}}}c['gl']['texImage3D'](c['gl']['TEXTURE_3D'],0x0,c['gl']['RGBA'],au,av,aw,0x0,c['gl']['RGBA'],c['gl']['UNSIGNED_BYTE'],ay),c['gl']['texParameteri'](c['gl']['TEXTURE_3D'],c['gl']['TEXTURE_MIN_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_3D'],c['gl']['TEXTURE_MAG_FILTER'],c['gl']['LINEAR']),c['gl']['texParameteri'](c['gl']['TEXTURE_3D'],c['gl']['TEXTURE_WRAP_S'],c['gl']['REPEAT']),c['gl']['texParameteri'](c['gl']['TEXTURE_3D'],c['gl']['TEXTURE_WRAP_T'],c['gl']['REPEAT']),c['gl']['generateMipmap'](c['gl']['TEXTURE_3D']);{const aD=c['gl']['createFramebuffer']();c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],aD);const aE=c['gl']['createRenderbuffer']();c['gl']['bindRenderbuffer'](c['gl']['RENDERBUFFER'],aE),c['gl']['renderbufferStorage'](c['gl']['RENDERBUFFER'],c['gl']['DEPTH_COMPONENT16'],au,av),c['gl']['bindTexture'](c['gl']['TEXTURE_3D'],ax),c['gl']['framebufferTexture2D'](c['gl']['FRAMEBUFFER'],c['gl']['COLOR_ATTACHMENT0'],c['gl']['TEXTURE_3D'],ax,0x0),c['gl']['framebufferRenderbuffer'](c['gl']['FRAMEBUFFER'],c['gl']['DEPTH_ATTACHMENT'],c['gl']['RENDERBUFFER'],aE),c['gl']['viewport'](0x0,0x0,au,av),c['gl']['clearColor'](0x0,0x0,0x0,0x0),c['gl']['clear'](c['gl']['COLOR_BUFFER_BIT']|c['gl']['DEPTH_BUFFER_BIT']),c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['WORLDY3D']);let aF=j['get']('uNoiseScale');aF!==undefined&&c['gl']['uniform1f'](aF,0x100);let aG=j['get']('uNoiseJitter');aG!==undefined&&c['gl']['uniform1f'](aG,0x1);let aH=j['get']('uManhattanDistance');aH!==undefined&&c['gl']['uniform1i'](aH,0x1);let aI=j['get']('uNoiseStrength');aI!==undefined&&c['gl']['uniform1f'](aI,0x1);c['RenderWGL']['Util_RenderCube'](),c['Shader']['EndShader'](),c['gl']['deleteRenderbuffer'](aE),c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],null),c['gl']['deleteFramebuffer'](aD);if(g['currentFramebufferType']!==undefined){let aJ=k['get'](g['currentFramebufferType']);aJ!==undefined&&c['gl']['bindFramebuffer'](c['gl']['FRAMEBUFFER'],aJ['framebufferID']);}c['gl']['viewport'](0x0,0x0,c['Camera']['clientWidth'],c['Camera']['clientHeight']);}};this['CopyFBColorBuffer']=function(au,av){if(!c['useWebGL2'])return;let aw=k['get'](au);if(aw===undefined)return;let ax=k['get'](av);if(ax===undefined)return;c['gl']['bindFramebuffer'](c['gl']['DRAW_FRAMEBUFFER'],aw['framebufferID']),c['gl']['bindFramebuffer'](c['gl']['READ_FRAMEBUFFER'],ax['framebufferID']),c['gl']['blitFramebuffer'](0x0,0x0,ax['width'],ax['height'],0x0,0x0,aw['width'],aw['height'],c['gl']['COLOR_BUFFER_BIT'],c['gl']['NEAREST']),c['gl']['bindFramebuffer'](c['gl']['READ_FRAMEBUFFER'],null),c['gl']['bindFramebuffer'](c['gl']['DRAW_FRAMEBUFFER'],null);},this['CopyFBDepthBuffer']=function(au,av){if(!c['useWebGL2'])return;let aw=k['get'](au);if(aw===undefined)return;let ax=k['get'](av);if(ax===undefined)return;c['gl']['bindFramebuffer'](c['gl']['DRAW_FRAMEBUFFER'],aw['framebufferID']),c['gl']['bindFramebuffer'](c['gl']['READ_FRAMEBUFFER'],ax['framebufferID']),c['gl']['blitFramebuffer'](0x0,0x0,ax['width'],ax['height'],0x0,0x0,aw['width'],aw['height'],c['gl']['DEPTH_BUFFER_BIT'],c['gl']['NEAREST']),c['gl']['bindFramebuffer'](c['gl']['READ_FRAMEBUFFER'],null),c['gl']['bindFramebuffer'](c['gl']['DRAW_FRAMEBUFFER'],null);},this['HasObjectMatrix']=function(au){return G['has'](au);},this['SetObjectMatrixIndex']=function(au,av){G['has'](au)&&G['set'](au,av);},this['GetObjectMatrixIndex']=function(au){if(G['has'](au))return G['get'](au);return 0x0;},this['GetUseUpdateMatrixManager']=function(){return D;},this['SetUseUpdateMatrixManager']=function(au){if(D===au)return;D=au,g['UpdateShader']();},this['AddUpdateMatrixData']=function(au,av){let aw=-0x1,ax=-0x1;return ax=g['addUpdateMatrixDataByIndex'](au),g['changeUpdateMatrixData'](au,ax,av),ax;},this['AddUpdateMatrixDataByIndex']=function(au){let av=new d['Matrix4'](),aw=[],ax=![];if(au!==undefined)E['has'](au)&&(aw=E['get'](au),ax=!![]);else F!==undefined&&(E['has'](F)&&(aw=E['get'](F),ax=!![]));if(ax)aw['push'](av);else{if(au===undefined){if(E['size']===0x0){let az=c['Data']['UUIDv4']();F=az,E['set'](az,aw);let aA=new d['Matrix4']();aw['push'](aA),aw['push'](av);}else aw=E['get'](F);}else{let aB=au;E['set'](aB,aw);let aC=new d['Matrix4']();aw['push'](aC),aw['push'](av);}}let ay=aw['length']-0x1;return ay;},this['GetUpdateMatrixDataByIndex']=function(au,av){if(E['has'](au)){let aw=E['get'](au);return aw[av];}else{if(F!==undefined){if(E['has'](F)){let ax=E['get'](F);return ax[av];}}}return 0x0;},this['GetUpdateMatrixData']=function(au){if(E['has'](au)){let av=E['get'](au);return av;}else{if(F!==undefined){if(E['has'](F)){let aw=E['get'](F);return aw;}}}return[];},this['ChangeUpdateMatrixData']=function(au,av,aw){if(E['has'](au)===![]){let ay=g['addUpdateMatrixDataByIndex'](au);return g['removeUpdateMatrixData'](au,ay),g['changeUpdateMatrixData'](au,av,aw);}let ax=E['get'](au);if(av>=ax['length'])return g['addUpdateMatrixData'](au,aw);try{ax[av]['copy'](aw);}catch(az){console['log']('changeUpdateMatrixData\x20error');}return av;},this['ClearUpdateMatrixData']=function(){E['clear']();},this['RemoveUpdateMatrixData']=function(au,av){if(E['has'](au)){let aw=E['get'](au);aw['splice'](av,0x1);}},this['GetUpdateMatrixGroup']=function(au){let av=Math['floor'](au/I);return av;},this['SetUpdateModelMatrixData']=function(au,av){if(g['currentProgram']===undefined)return;if(g['updateMatrixAttributeLocation']<0x0)return;if(!D)return;c['gl']['disableVertexAttribArray'](g['updateMatrixAttributeLocation']);let aw=j['get']('ubUseMatrixDatas');c['gl']['uniform1i'](aw,![]);if(av===-0x1)return;let ax=g['GetUpdateMatrixGroup'](av),ay=j['get']('vMatrixDatas[0]');c['gl']['uniform1i'](aw,!![]),c['gl']['enableVertexAttribArray'](g['updateMatrixAttributeLocation']);if(ay!==undefined){if(K!==ax||(L===undefined||L!==au)){let az=I*0x4;if(J===undefined)J=new Float32Array(az);K=ax;let aA=ax*I,aB=(ax+0x1)*I,aC=0x0,aD=g['GetUpdateMatrixData'](au),aE=aD['length'];for(let aF=aA;aF<aB;aF++){if(aF<aE)for(let aG=0x0;aG<0x10;aG++){J[aC]=aD[aF]['elements'][aG],aC++;}else break;}for(let aH=aC;aH<az;aH++){J[aH]=0x0;}L=au;}c['gl']['uniform4fv'](ay,J);}},this['SetUpdateCurrentMatrixData']=function(au){if(g['currentProgram']===undefined)return;let av=j['get']('ubUseMatrixDatas');if(av===null)return;c['gl']['uniform1i'](av,![]);if(au===undefined)return;let aw=j['get']('vMatrixDatas[0]');c['gl']['uniform1i'](av,!![]);if(aw!==undefined){let ax=I*0x4,ay=0x0,az=new Float32Array(ax),aA=au['length'];for(let aB=0x0;aB<aA;aB++){if(aB<aA)for(let aC=0x0;aC<0x10;aC++){az[ay]=au[aB]['elements'][aC],ay++;}else break;}for(let aD=ay;aD<ax;aD++){az[aD]=0x0;}c['gl']['uniform4fv'](aw,az);}},this['SetGLUVAnimation']=function(au,av,aw){if(g['currentProgram']===undefined)return;let ax=j['get']('useUVAnimation');if(ax!==undefined){c['gl']['uniform1f'](ax,au===!![]?0x1:0x0);if(av!==undefined){let ay=j['get']('u_UV_Direction');c['gl']['uniform2f'](ay,av['x'],av['y']);}if(aw!==undefined){let az=j['get']('u_UVTime');c['gl']['uniform1f'](az,c['RenderProcessTime']*aw);}}},this['SetGLLight']=function(au){if(g['currentProgram']===undefined)return;let av=new d['Vector3']()['copy'](a5),aw=c['Data']['GetBBox'](),ax=aw['radius'],ay=new d['Vector3']()['copy'](av)['multiplyScalar'](ax*-0x12c),az=new d['Vector3']()['copy'](c['Camera']['cameraPosition']);if(c['Camera']['perspectiveView']===![])az=new d['Vector3'](0x0,0x0,ax*0xa);if(au===undefined)au=![];if(au&&g['ViewLightAsRotate']===![]){let aI=new d['Matrix4']()['copy'](c['Camera']['matMV']),aJ=new d['Vector3']()['copy'](ay);aJ['applyMatrix4'](new d['Matrix4']()['copy'](aI)),ay=aJ;}aa=[];{let aK=[];c['Camera']['useYUp']?c['DemoType']===0x6?(aK[0x0]=new d['Vector3'](-0xf,0x19,0xf),aK[0x1]=new d['Vector3'](0xf,0x19,0xf),aK[0x2]=new d['Vector3'](0x0,-0x19,-0xf),aK[0x3]=new d['Vector3'](0x0,-0x37,0xf)):(aK[0x0]=new d['Vector3'](-0xf,0x19,0xf),aK[0x1]=new d['Vector3'](0xf,0x19,0xf),aK[0x2]=new d['Vector3'](-0xf,0x19,-0xf),aK[0x3]=new d['Vector3'](0xf,0x19,-0xf)):(aK[0x0]=new d['Vector3'](-0xf,0xf,0x19),aK[0x1]=new d['Vector3'](0xf,0xf,0x19),aK[0x2]=new d['Vector3'](-0xf,-0xf,0x19),aK[0x3]=new d['Vector3'](0xf,-0xf,0x19));let aL=new d['Matrix4']()['copy'](c['Camera']['matMV']);for(let aM=0x0;aM<a9;aM++){let aN=c['Data']['LightItem']();c['DemoType']===0x6&&(aN['LightKind']=d['Enum']['LightKind']['Point']);let aO=new d['Vector3']()['copy'](aK[aM])['normalize']()['multiplyScalar'](-0x1);if(aN['LightKind']===d['Enum']['LightKind']['Directional'])aN['Position']=new d['Vector3']()['copy'](aw['center'])['sub'](new d['Vector3']()['copy'](aO)['multiplyScalar'](ax*0x8)),c['DemoType']===0x6?aN['Power']=ax*ax/7.5/a9:aN['Power']=ax/a9,aN['Color']['set'](0xff,0xff,0xff,0xff);else{if(aN['LightKind']===d['Enum']['LightKind']['Point']){if(c['DemoType']===0x6){let aP=new d['Vector3']();aN['Position']=new d['Vector3']()['add'](new d['Vector3']()['copy'](aO)['multiplyScalar'](ax*0x4)),aP=new d['Vector3']()['copy'](aw['center']),aP['y']=aw['max']['y']*0.3,aP['add'](aN['Position']);let aQ=ax*ax/(a9*0x2d);aN['Position']=aP,aN['Power']=aQ,aN['Color']['set'](0xff,0xff,0xff,0xff);}}}if(au&&g['ViewLightAsRotate']===![]){let aR=new d['Vector3']()['copy'](aN['Position']);aR['applyMatrix4'](new d['Matrix4']()['copy'](aL)),aN['Position']=aR;}aa[aM]=aN;}for(let aS=aa['length'];aS<0x4;aS++){let aT=c['Data']['LightItem']();aT['Position']['set'](0x0,0x0,0x0),aT['Color']['set'](0x0,0x0,0x0,0x0),aT['Power']=0x0;}}let aA=j['get']('vDirectionalLightPos'),aB=j['get']('vDirectionalLightColor'),aC=j['get']('vLightPos[0]'),aD=j['get']('vEyePos'),aE=j['get']('vLightColor[0]'),aF=j['get']('vAmbientColor'),aG=j['get']('vSpecColor'),aH=j['get']('fShininess');if(g['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PBR'])||g['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['ANIMATIONPBR'])||g['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['VCOLOR'])){let aU=new d['Color']()['copy'](a3),aV=new d['Color'](0xff,0xff,0xff,0xff),aW=0.5,aX=aU['glColor'](),aY=aV['glColor']();c['gl']['uniform3f'](aF,aX['r'],aX['g'],aX['b']),c['gl']['uniform3f'](aG,aY['r'],aY['g'],aY['b']),c['gl']['uniform1f'](aH,aW);{let b4=a6['Color']['glColor']();c['gl']['uniform3f'](aB,b4['r']*a6['Power'],b4['g']*a6['Power'],b4['b']*a6['Power']),c['gl']['uniform3f'](aA,ay['x'],ay['y'],ay['z']);}let aZ=new Float32Array(0x4*0x3),b0=0x0;for(let b5=0x0;b5<aa['length'];b5++){let b6=aa[b5]['Color']['glColor']();aZ[b0]=b6['r']*aa[b5]['Power'],b0++,aZ[b0]=b6['g']*aa[b5]['Power'],b0++,aZ[b0]=b6['b']*aa[b5]['Power'],b0++;}c['gl']['uniform3fv'](aE,aZ);let b1=new Float32Array(0x4*0x3);b0=0x0;let b2=new d['Matrix4']()['copy'](c['Camera']['matMV']);for(let b7=0x0;b7<aa['length'];b7++){let b8=new d['Vector3']()['copy'](aa[b7]['Position']);b8['applyMatrix4'](new d['Matrix4']()['copy'](b2)),b1[b0]=b8['x'],b0++,b1[b0]=b8['y'],b0++,b1[b0]=b8['z'],b0++;}c['gl']['uniform3fv'](aC,b1);let b3=j['get']('uLightNum');c['gl']['uniform1i'](b3,aa['length']);}else{if(g['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PHONG'])||g['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PHONGUTIL'])){let b9=new d['Color']()['copy'](a4),ba=new d['Color'](0xff,0xff,0xea,0xff),bb=0.5,bc=a6['Color']['glColor'](),bd=b9['glColor'](),be=ba['glColor']();c['gl']['uniform3f'](aF,bd['r'],bd['g'],bd['b']),c['gl']['uniform3f'](aG,be['r'],be['g'],be['b']),c['gl']['uniform1f'](aH,bb),c['gl']['uniform3f'](aB,bc['r']*a6['Power'],bc['g']*a6['Power'],bc['b']*a6['Power']),c['gl']['uniform3f'](aA,ay['x'],ay['y'],ay['z']);}}c['gl']['uniform3f'](aD,az['x'],az['y'],az['z']);},this['SetGLDefaultLight']=function(){if(g['currentProgram']===undefined)return;let au=new d['Vector3']()['copy'](a7),av=c['Data']['GetBBox'](),aw=av['radius'],ax=new d['Vector3']()['copy'](au)['multiplyScalar'](aw*-0x12c),ay=new d['Vector3']()['copy'](c['Camera']['cameraPosition']);if(c['Camera']['perspectiveView']===![])ay=new d['Vector3'](0x0,0x0,aw*0xa);let az=j['get']('vDirectionalLightPos'),aA=j['get']('vDirectionalLightColor'),aB=j['get']('vLightPos[0]'),aC=j['get']('vEyePos'),aD=j['get']('vLightColor[0]'),aE=j['get']('vAmbientColor'),aF=j['get']('vSpecColor'),aG=j['get']('fShininess');if(g['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PBR'])||g['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['ANIMATIONPBR'])||g['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['VCOLOR'])){let aH=new d['Color'](0xb4,0xb4,0xb4,0xff),aI=new d['Color'](0xff,0xff,0xff,0xff),aJ=0.5,aK=aH['glColor'](),aL=aI['glColor']();c['gl']['uniform3f'](aE,aK['r'],aK['g'],aK['b']),c['gl']['uniform3f'](aF,aL['r'],aL['g'],aL['b']),c['gl']['uniform1f'](aG,aJ);{let aQ=a8['glColor']();c['gl']['uniform3f'](aA,aQ['r'],aQ['g'],aQ['b']),c['gl']['uniform3f'](az,ax['x'],ax['y'],ax['z']);}let aM=new Float32Array(0x4*0x3),aN=0x0;for(let aR=0x0;aR<aa['length'];aR++){let aS=aa[aR]['Color']['glColor']();aM[aN]=aS['r']*aa[aR]['Power'],aN++,aM[aN]=aS['g']*aa[aR]['Power'],aN++,aM[aN]=aS['b']*aa[aR]['Power'],aN++;}c['gl']['uniform3fv'](aD,aM);let aO=new Float32Array(0x4*0x3);aN=0x0;for(let aT=0x0;aT<aa['length'];aT++){aO[aN]=aa[aT]['Position']['x'],aN++,aO[aN]=aa[aT]['Position']['y'],aN++,aO[aN]=aa[aT]['Position']['z'],aN++;}c['gl']['uniform3fv'](aB,aO);let aP=c['gl']['getUniformLocation'](g['currentProgram'],'uLightNum');c['gl']['uniform1i'](aP,aa['length']);}else{if(g['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PHONG'])||g['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PHONGUTIL'])){let aU=new d['Color'](0x50,0x50,0x50,0xff),aV=new d['Color'](0xff,0xff,0xea,0xff),aW=0.5,aX=a8['glColor'](),aY=aU['glColor'](),aZ=aV['glColor']();c['gl']['uniform3f'](aE,aY['r'],aY['g'],aY['b']),c['gl']['uniform3f'](aF,aZ['r'],aZ['g'],aZ['b']),c['gl']['uniform1f'](aG,aW),c['gl']['uniform3f'](aA,aX['r'],aX['g'],aX['b']),c['gl']['uniform3f'](az,ax['x'],ax['y'],ax['z']);}}c['gl']['uniform3f'](aC,ay['x'],ay['y'],ay['z']);},this['GetLightDirection']=function(){return a5;},this['SetLightDirection']=function(au){a5['copy'](au)['normalize']();},this['GetDirectionalLight']=function(){return a6;},this['SetLightColor']=function(au){a6['Color']['copy'](au);},this['SetAmbientColor']=function(au){a3['copy'](au);},this['SetLightTime']=function(au){let av=au;av=Math['max'](0x6,av),av=Math['min'](0x12,av);let aw=new d['Vector3']()['copy'](a7);aw['normalize']();let ax=(av-0xb)*0xe,ay=new d['Matrix4']()['makeRotationY'](ax*Math['PI']/0xb4);aw['applyMatrix4'](ay),aw['normalize'](),g['SetLightDirection'](aw);},this['SetSSAAMultiplier']=function(au){p=au;let av=function(aw){let ax=k['get'](aw);if(ax===undefined)return;ax['multiplier']=au,ab(c['gl']['canvas']['width'],c['gl']['canvas']['height'],ax);};av(d['Enum']['FB_RENDER_TYPES']['MAIN']),av(d['Enum']['FB_RENDER_TYPES']['UI']),av(d['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']);},this['SetMSAA']=function(au){if(au==r)return;r=au,g['UpdateShader']();},this['GetMSAA']=function(){return r;},this['SetHDR']=function(au){if(au==g['UseHDR'])return;g['UseHDR']=au,g['UpdateShader']();},this['GetHDR']=function(){return g['UseHDR'];},this['Resize']=function(au){if(au===undefined||!au){for(let av=0x0;av<l['length'];av++){k=l[av],ac(c['MultiCamera'][av]);}k=l[0x0];}else ac(c['Camera']);};}}export default Shader;